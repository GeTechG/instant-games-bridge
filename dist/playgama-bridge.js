/*! For license information please see playgama-bridge.js.LICENSE.txt */
(()=>{var e={258:e=>{!function(t){e.exports=t;var r="listeners",n={on:function(e,t){return a(this,e).push(t),this},once:function(e,t){var r=this;return n.originalListener=t,a(r,e).push(n),r;function n(){i.call(r,e,n),t.apply(this,arguments)}},off:i,emit:function(e,t){var r=this,n=a(r,e,!0);if(!n)return!1;var o=arguments.length;if(1===o)n.forEach((function(e){e.call(r)}));else if(2===o)n.forEach((function(e){e.call(r,t)}));else{var i=Array.prototype.slice.call(arguments,1);n.forEach((function(e){e.apply(r,i)}))}return!!n.length}};function o(e){for(var t in n)e[t]=n[t];return e}function i(e,t){var n,o=this;if(arguments.length){if(t){if(n=a(o,e,!0)){if(!(n=n.filter((function(e){return e!==t&&e.originalListener!==t}))).length)return i.call(o,e);o[r][e]=n}}else if((n=o[r])&&(delete n[e],!Object.keys(n).length))return i.call(o)}else delete o[r];return o}function a(e,t,n){if(!n||e[r]){var o=e[r]||(e[r]={});return o[t]||(o[t]=[])}}o(t.prototype),t.mixin=o}((function e(){if(!(this instanceof e))return new e}))}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e={VK:"vk",OK:"ok",YANDEX:"yandex",CRAZY_GAMES:"crazy_games",ABSOLUTE_GAMES:"absolute_games",GAME_DISTRIBUTION:"game_distribution",PLAYGAMA:"playgama",WORTAL:"wortal",PLAYDECK:"playdeck",TELEGRAM:"telegram",Y8:"y8",LAGGED:"lagged",FACEBOOK:"facebook",POKI:"poki",MOCK:"mock",QA_TOOL:"qa_tool",MSN:"msn"},t={PLATFORM:"platform",PLAYER:"player",GAME:"game",STORAGE:"storage",ADVERTISEMENT:"advertisement",SOCIAL:"social",DEVICE:"device",LEADERBOARD:"leaderboard",PAYMENTS:"payments",REMOTE_CONFIG:"remote_config",CLIPBOARD:"clipboard",ACHIEVEMENTS:"achievements"},n={INTERSTITIAL_STATE_CHANGED:"interstitial_state_changed",REWARDED_STATE_CHANGED:"rewarded_state_changed",BANNER_STATE_CHANGED:"banner_state_changed",VISIBILITY_STATE_CHANGED:"visibility_state_changed"},o={VISIBLE:"visible",HIDDEN:"hidden"},i={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed"},a={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed",REWARDED:"rewarded"},s={LOADING:"loading",SHOWN:"shown",HIDDEN:"hidden",FAILED:"failed"},u={LOCAL_STORAGE:"local_storage",PLATFORM_INTERNAL:"platform_internal"},c={DESKTOP:"desktop",MOBILE:"mobile",TABLET:"tablet",TV:"tv"},l={GAME_READY:"game_ready",IN_GAME_LOADING_STARTED:"in_game_loading_started",IN_GAME_LOADING_STOPPED:"in_game_loading_stopped",GAMEPLAY_STARTED:"gameplay_started",GAMEPLAY_STOPPED:"gameplay_stopped",PLAYER_GOT_ACHIEVEMENT:"player_got_achievement",GAME_OVER:"game_over"},f={INITIALIZE:"initialize",AUTHORIZE_PLAYER:"authorize_player",SHARE:"share",INVITE_FRIENDS:"invite_friends",JOIN_COMMUNITY:"join_community",CREATE_POST:"create_post",ADD_TO_HOME_SCREEN:"add_to_home_screen",ADD_TO_FAVORITES:"add_to_favorites",RATE:"rate",SET_LEADERBOARD_SCORE:"set_leaderboard_score",GET_LEADERBOARD_SCORE:"get_leaderboard_score",GET_LEADERBOARD_ENTRIES:"get_leaderboard_entries",GET_PURCHASES:"get_purchases",GET_CATALOG:"get_catalog",PURCHASE:"purchase",CONSUME_PURCHASE:"consume_purchase",GET_REMOTE_CONFIG:"get_remote_config",GET_STORAGE_DATA:"get_storage_data",SHOW_LEADERBOARD_NATIVE_POPUP:"show_leaderboard_native_popup",CLIPBOARD_WRITE:"clipboard_write",ADBLOCK_DETECT:"adblock_detect"},p={message:"Before using the SDK you must initialize it"},d={message:"Storage not supported"},y={message:"Storage not available"},h={message:"GameDistribution Game ID is undefined"},m={message:"Y8 Game params are not found"},v={message:"OK Game params are not found"},_={message:"Lagged Game params are not found"},g={message:"Message is too long"};function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function E(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==S(t)?t:String(t)}function P(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function A(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,O(e,t,"set"),r),r}function w(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,O(e,t,"get"))}function O(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var k=new WeakMap,D=new WeakMap,R=new WeakMap;const I=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),P(this,k,{writable:!0,value:void 0}),P(this,D,{writable:!0,value:void 0}),P(this,R,{writable:!0,value:void 0}),A(this,k,new Promise((function(e,r){A(t,D,e),A(t,R,r)})))}var t,r;return t=e,(r=[{key:"promise",get:function(){return w(this,k)}},{key:"resolve",value:function(e){w(this,D).call(this,e)}},{key:"reject",value:function(e){w(this,R).call(this,e)}}])&&b(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j(n.key),n)}}function j(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==T(t)?t:String(t)}const N=function(){function e(t){var r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=void 0,(n=j(n="_platformBridge"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._platformBridge=t}var t,r;return t=e,(r=[{key:"initialize",value:function(){return Promise.resolve()}}])&&L(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,M(n.key),n)}}function M(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==C(t)?t:String(t)}function G(e,t){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},G(e,t)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}function U(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var z=new WeakMap;const W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=H(n);if(o){var r=H(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return F(e)}(this,e)});function a(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];return t=F(e=i.call.apply(i,[this].concat(s))),n={writable:!0,value:!1},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r=z),r.set(t,n),e}return t=a,(r=[{key:"id",get:function(){return this._platformBridge.platformId}},{key:"sdk",get:function(){return this._platformBridge.platformSdk}},{key:"language",get:function(){return this._platformBridge.platformLanguage}},{key:"payload",get:function(){return this._platformBridge.platformPayload}},{key:"tld",get:function(){return this._platformBridge.platformTld}},{key:"isGetAllGamesSupported",get:function(){return this._platformBridge.isPlatformGetAllGamesSupported}},{key:"isGetGameByIdSupported",get:function(){return this._platformBridge.isPlatformGetGameByIdSupported}},{key:"sendMessage",value:function(e){if(e===l.GAME_READY){if(function(e,t){return t.get?t.get.call(e):t.value}(this,U(this,z,"get")))return Promise.reject();!function(e,t,r){(function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}})(e,U(e,t,"set"),r)}(this,z,!0)}return this._platformBridge.sendMessage(e)}},{key:"getServerTime",value:function(){return this._platformBridge.getServerTime()}},{key:"getAllGames",value:function(){return this._platformBridge.getAllGames()}},{key:"getGameById",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getGameById(t)}return this._platformBridge.getGameById(e)}}])&&B(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(N);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function V(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Y(n.key),n)}}function Y(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:String(t)}function Z(e,t){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Z(e,t)}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}const J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=K(n);if(o){var r=K(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isAuthorizationSupported",get:function(){return this._platformBridge.isPlayerAuthorizationSupported}},{key:"isAuthorized",get:function(){return this._platformBridge.isPlayerAuthorized}},{key:"id",get:function(){return this._platformBridge.playerId}},{key:"name",get:function(){return this._platformBridge.playerName}},{key:"photos",get:function(){return this._platformBridge.playerPhotos}},{key:"authorize",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.authorize(t)}return this._platformBridge.authorizePlayer(e)}}])&&V(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(N);var q=r(258),X=r.n(q);function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function $(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ee(n.key),n)}}function ee(e){var t=function(e,t){if("object"!=Q(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Q(t)?t:String(t)}function te(e,t){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},te(e,t)}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}var ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&te(e,t)}(s,e);var t,r,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=re(o);if(i){var r=re(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this,e))._platformBridge.on(n.VISIBILITY_STATE_CHANGED,(function(e){return t.emit(n.VISIBILITY_STATE_CHANGED,e)})),t}return t=s,(r=[{key:"visibilityState",get:function(){return this._platformBridge.visibilityState}}])&&$(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(N);X().mixin(ne.prototype);const oe=ne;function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,se(n.key),n)}}function se(e){var t=function(e,t){if("object"!=ie(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ie(t)?t:String(t)}function ue(e,t){return ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ue(e,t)}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}const le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ue(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ce(n);if(o){var r=ce(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,r=[{key:"defaultType",get:function(){return this._platformBridge.defaultStorageType}},{key:"isSupported",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.isSupported(t)}return this._platformBridge.isStorageSupported(e)}},{key:"isAvailable",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.isSupported(t)}return this._platformBridge.isStorageAvailable(e)}},{key:"get",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t){var n=t[this._platformBridge.platformId];if(n)return this.get(e,n,r)}var o=t;return o||(o=this.defaultType),this._platformBridge.isStorageAvailable(o)?this._platformBridge.getDataFromStorage(e,o,r):Promise.reject()}},{key:"set",value:function(e,t,r){if(r){var n=r[this._platformBridge.platformId];if(n)return this.set(e,t,n)}var o=r;return o||(o=this.defaultType),this._platformBridge.isStorageAvailable(o)?this._platformBridge.setDataToStorage(e,t,o):Promise.reject()}},{key:"delete",value:function(e,t){if(t){var r=t[this._platformBridge.platformId];if(r)return this.delete(e,r)}var n=t;return n||(n=this.defaultType),this._platformBridge.isStorageAvailable(n)?this._platformBridge.deleteDataFromStorage(e,n):Promise.reject()}}],r&&ae(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(N);function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,de(n.key),n)}}function de(e){var t=function(e,t){if("object"!=fe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==fe(t)?t:String(t)}function ye(e,t){me(e,t),t.add(e)}function he(e,t,r){me(e,t),t.set(e,r)}function me(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ve(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function _e(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Se(e,t,"set"),r),r}function ge(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Se(e,t,"get"))}function Se(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var be="created",Ee="completed",Pe=new WeakMap,Ae=new WeakMap,we=new WeakMap,Oe=new WeakMap,ke=new WeakSet,De=new WeakSet,Re=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ye(this,De),ye(this,ke),he(this,Pe,{writable:!0,value:0}),he(this,Ae,{writable:!0,value:0}),he(this,we,{writable:!0,value:be}),he(this,Oe,{writable:!0,value:0}),_e(this,Pe,t)}var t,r;return t=e,(r=[{key:"state",get:function(){return ge(this,we)}},{key:"start",value:function(){var e=this;ge(this,we)!==be&&ge(this,we)!==Ee||(_e(this,Ae,ge(this,Pe)),ve(this,ke,Ie).call(this,"started"),_e(this,Oe,setInterval((function(){_e(e,Ae,ge(e,Ae)-1),e.emit("time_left_changed",ge(e,Ae)),ge(e,Ae)<=0&&(ve(e,De,Te).call(e),ve(e,ke,Ie).call(e,Ee))}),1e3)))}},{key:"stop",value:function(){ve(this,De,Te).call(this),ve(this,ke,Ie).call(this,"stopped")}}])&&pe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ie(e){_e(this,we,e),this.emit("state_changed",ge(this,we))}function Te(){_e(this,Ae,0),clearInterval(ge(this,Oe))}X().mixin(Re.prototype);const Le=Re;function je(e){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(e)}function Ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ce(n.key),n)}}function Ce(e){var t=function(e,t){if("object"!=je(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==je(t)?t:String(t)}function Be(e,t){return Be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Be(e,t)}function Me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ge(e){return Ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ge(e)}function Fe(e,t){Ue(e,t),t.add(e)}function He(e,t,r){Ue(e,t),t.set(e,r)}function Ue(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ze(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Ve(e,t,"set"),r),r}function We(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function xe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ve(e,t,"get"))}function Ve(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Ye=new WeakMap,Ze=new WeakMap,Ke=new WeakSet,Je=new WeakSet,qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Be(e,t)}(l,e);var t,r,o,u,c=(o=l,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ge(o);if(u){var r=Ge(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===je(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Me(e)}(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),Fe(Me(t=c.call(this,e)),Je),Fe(Me(t),Ke),He(Me(t),Ye,{writable:!0,value:void 0}),He(Me(t),Ze,{writable:!0,value:60}),t._platformBridge.on(n.INTERSTITIAL_STATE_CHANGED,(function(e){e===i.CLOSED&&xe(Me(t),Ze)>0&&We(Me(t),Ke,Xe).call(Me(t)),t.emit(n.INTERSTITIAL_STATE_CHANGED,e)})),t._platformBridge.on(n.REWARDED_STATE_CHANGED,(function(e){return t.emit(n.REWARDED_STATE_CHANGED,e)})),t._platformBridge.on(n.BANNER_STATE_CHANGED,(function(e){return t.emit(n.BANNER_STATE_CHANGED,e)})),t}return t=l,(r=[{key:"isBannerSupported",get:function(){return this._platformBridge.isBannerSupported}},{key:"bannerState",get:function(){return this._platformBridge.bannerState}},{key:"interstitialState",get:function(){return this._platformBridge.interstitialState}},{key:"rewardedState",get:function(){return this._platformBridge.rewardedState}},{key:"minimumDelayBetweenInterstitial",get:function(){return xe(this,Ze)}},{key:"setMinimumDelayBetweenInterstitial",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(void 0!==t)return void this.setMinimumDelayBetweenInterstitial(t)}var r=je(e),n=xe(this,Ze);switch(r){case"number":n=e;break;case"string":if(n=parseInt(e,10),Number.isNaN(n))return;break;default:return}ze(this,Ze,n),xe(this,Ye)&&(xe(this,Ye).stop(),We(this,Ke,Xe).call(this))}},{key:"showBanner",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return void this.showBanner(t)}this.bannerState!==s.LOADING&&this.bannerState!==s.SHOWN&&(this._platformBridge._setBannerState(s.LOADING),this.isBannerSupported?this._platformBridge.showBanner(e):this._platformBridge._setBannerState(s.FAILED))}},{key:"hideBanner",value:function(){this.bannerState!==s.LOADING&&this.bannerState!==s.HIDDEN&&this.isBannerSupported&&this._platformBridge.hideBanner()}},{key:"showInterstitial",value:function(e){if(!We(this,Je,Qe).call(this)){if(e){var t=e[this._platformBridge.platformId];if(t)return void this.showInterstitial(t)}var r=!1;e&&"boolean"==typeof e.ignoreDelay&&(r=e.ignoreDelay),this._platformBridge._setInterstitialState(i.LOADING),!xe(this,Ye)||xe(this,Ye).state===Ee||r?this._platformBridge.showInterstitial(e):this._platformBridge._setInterstitialState(i.FAILED)}}},{key:"showRewarded",value:function(e){if(!We(this,Je,Qe).call(this)){if(e){var t=e[this._platformBridge.platformId];if(t)return void this.showRewarded(t)}this._platformBridge._setRewardedState(a.LOADING),this._platformBridge.showRewarded(e)}}},{key:"checkAdBlock",value:function(){return this._platformBridge.checkAdBlock()}}])&&Ne(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(N);function Xe(){ze(this,Ye,new Le(xe(this,Ze))),xe(this,Ye).start()}function Qe(){return this.interstitialState===i.LOADING||this.interstitialState===i.OPENED||!![a.LOADING,a.OPENED,a.REWARDED].includes(this.rewardedState)}X().mixin(qe.prototype);const $e=qe;function et(e){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rt(n.key),n)}}function rt(e){var t=function(e,t){if("object"!=et(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==et(t)?t:String(t)}function nt(e,t){return nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nt(e,t)}function ot(e){return ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ot(e)}const it=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ot(n);if(o){var r=ot(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===et(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isInviteFriendsSupported",get:function(){return this._platformBridge.isInviteFriendsSupported}},{key:"isJoinCommunitySupported",get:function(){return this._platformBridge.isJoinCommunitySupported}},{key:"isShareSupported",get:function(){return this._platformBridge.isShareSupported}},{key:"isCreatePostSupported",get:function(){return this._platformBridge.isCreatePostSupported}},{key:"isAddToHomeScreenSupported",get:function(){return this._platformBridge.isAddToHomeScreenSupported}},{key:"isAddToFavoritesSupported",get:function(){return this._platformBridge.isAddToFavoritesSupported}},{key:"isRateSupported",get:function(){return this._platformBridge.isRateSupported}},{key:"isExternalLinksAllowed",get:function(){return this._platformBridge.isExternalLinksAllowed}},{key:"inviteFriends",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.inviteFriends(t)}return this._platformBridge.inviteFriends(e)}},{key:"joinCommunity",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.joinCommunity(t)}return this._platformBridge.joinCommunity(e)}},{key:"share",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.share(t)}return this._platformBridge.share(e)}},{key:"createPost",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.createPost(t)}return this._platformBridge.createPost(e)}},{key:"addToHomeScreen",value:function(){return this._platformBridge.addToHomeScreen()}},{key:"addToFavorites",value:function(){return this._platformBridge.addToFavorites()}},{key:"rate",value:function(){return this._platformBridge.rate()}}])&&tt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(N);function at(e){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(e)}function st(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ut(n.key),n)}}function ut(e){var t=function(e,t){if("object"!=at(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=at(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==at(t)?t:String(t)}function ct(e,t){return ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ct(e,t)}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}const ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ct(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=lt(n);if(o){var r=lt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===at(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"type",get:function(){return this._platformBridge.deviceType}}])&&st(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(N);function pt(e){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(e)}function dt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yt(n.key),n)}}function yt(e){var t=function(e,t){if("object"!=pt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=pt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pt(t)?t:String(t)}function ht(e,t){return ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ht(e,t)}function mt(e){return mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mt(e)}const vt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ht(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=mt(n);if(o){var r=mt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===pt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isLeaderboardSupported}},{key:"isNativePopupSupported",get:function(){return this._platformBridge.isLeaderboardNativePopupSupported}},{key:"isMultipleBoardsSupported",get:function(){return this._platformBridge.isLeaderboardMultipleBoardsSupported}},{key:"isSetScoreSupported",get:function(){return this._platformBridge.isLeaderboardSetScoreSupported}},{key:"isGetScoreSupported",get:function(){return this._platformBridge.isLeaderboardGetScoreSupported}},{key:"isGetEntriesSupported",get:function(){return this._platformBridge.isLeaderboardGetEntriesSupported}},{key:"setScore",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.setScore(t)}return this._platformBridge.setLeaderboardScore(e)}},{key:"getScore",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getScore(t)}return this._platformBridge.getLeaderboardScore(e)}},{key:"getEntries",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getEntries(t)}return this._platformBridge.getLeaderboardEntries(e)}},{key:"showNativePopup",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.showNativePopup(t)}return this._platformBridge.showLeaderboardNativePopup(e)}}])&&dt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(N);function _t(e){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_t(e)}function gt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,St(n.key),n)}}function St(e){var t=function(e,t){if("object"!=_t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=_t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_t(t)?t:String(t)}function bt(e,t){return bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bt(e,t)}function Et(e){return Et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Et(e)}const Pt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Et(n);if(o){var r=Et(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===_t(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isPaymentsSupported}},{key:"isAvailable",get:function(){return this._platformBridge.isPaymentsAvailable}},{key:"isGetCatalogSupported",get:function(){return this._platformBridge.isPaymentsGetCatalogSupported}},{key:"isGetPurchasesSupported",get:function(){return this._platformBridge.isPaymentsGetPurchasesSupported}},{key:"isConsumePurchaseSupported",get:function(){return this._platformBridge.isPaymentsConsumePurchaseSupported}},{key:"purchase",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.purchase(t)}return this._platformBridge.paymentsPurchase(e)}},{key:"getPurchases",value:function(){return this._platformBridge.paymentsGetPurchases()}},{key:"getCatalog",value:function(e){return this._platformBridge.paymentsGetCatalog(e)}},{key:"consumePurchase",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.consumePurchase(t)}return this._platformBridge.paymentsConsumePurchase(e)}}])&&gt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(N);function At(e){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},At(e)}function wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ot(n.key),n)}}function Ot(e){var t=function(e,t){if("object"!=At(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=At(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==At(t)?t:String(t)}function kt(e,t){return kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kt(e,t)}function Dt(e){return Dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dt(e)}const Rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Dt(n);if(o){var r=Dt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===At(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isRemoteConfigSupported}},{key:"get",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.get(t)}return this._platformBridge.getRemoteConfig(e)}}])&&wt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(N);function It(e){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},It(e)}function Tt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Lt(n.key),n)}}function Lt(e){var t=function(e,t){if("object"!=It(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=It(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==It(t)?t:String(t)}function jt(e,t){return jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jt(e,t)}function Nt(e){return Nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nt(e)}const Ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Nt(n);if(o){var r=Nt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===It(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isClipboardSupported}},{key:"read",value:function(){return this._platformBridge.clipboardRead()}},{key:"write",value:function(e){return this._platformBridge.clipboardWrite(e)}}])&&Tt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(N);function Bt(e){return Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bt(e)}function Mt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Gt(n.key),n)}}function Gt(e){var t=function(e,t){if("object"!=Bt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Bt(t)?t:String(t)}function Ft(e,t){return Ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ft(e,t)}function Ht(e){return Ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ht(e)}const Ut=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ft(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ht(n);if(o){var r=Ht(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Bt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isAchievementsSupported}},{key:"isGetListSupported",get:function(){return this._platformBridge.isGetAchievementsListSupported}},{key:"isNativePopupSupported",get:function(){return this._platformBridge.isAchievementsNativePopupSupported}},{key:"unlock",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.unlock(t)}return this._platformBridge.unlockAchievement(e)}},{key:"getList",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getList(t)}return this._platformBridge.getAchievementsList(e)}},{key:"showNativePopup",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.showNativePopup(t)}return this._platformBridge.showAchievementsNativePopup(e)}}])&&Mt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(N);function zt(e){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(e)}function Wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Yt(n.key),n)}}function Vt(e,t,r){return(t=Yt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yt(e){var t=function(e,t){if("object"!=zt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==zt(t)?t:String(t)}function Zt(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}var Kt=new WeakMap,Jt=function(){function t(e){var r,n,i,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Vt(this,"_isInitialized",!1),Vt(this,"_platformSdk",null),Vt(this,"_isPlayerAuthorized",!1),Vt(this,"_playerId",null),Vt(this,"_playerName",null),Vt(this,"_playerPhotos",[]),Vt(this,"_visibilityState",null),Vt(this,"_localStorage",null),Vt(this,"_defaultStorageType",u.LOCAL_STORAGE),Vt(this,"_platformStorageCachedData",null),Vt(this,"_isBannerSupported",!1),Vt(this,"_interstitialState",null),Vt(this,"_rewardedState",null),Vt(this,"_bannerState",null),i={writable:!0,value:{}},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,n=Kt),n.set(r,i);try{this._localStorage=window.localStorage}catch(e){}this._visibilityState=document.visibilityState,document.addEventListener("visibilitychange",(function(){a._setVisibilityState(document.visibilityState)})),window.addEventListener("blur",(function(){a._setVisibilityState(o.HIDDEN)})),window.addEventListener("focus",(function(){a._setVisibilityState(o.VISIBLE)})),e&&(this._options=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(r),!0).forEach((function(t){Vt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))}var r,l;return r=t,(l=[{key:"platformId",get:function(){return e.MOCK}},{key:"platformSdk",get:function(){return this._platformSdk}},{key:"platformLanguage",get:function(){var e=navigator.language;return"string"==typeof e?e.substring(0,2).toLowerCase():"en"}},{key:"platformPayload",get:function(){return new URL(window.location.href).searchParams.get("payload")}},{key:"platformTld",get:function(){return null}},{key:"isPlatformGetAllGamesSupported",get:function(){return!1}},{key:"isPlatformGetGameByIdSupported",get:function(){return!1}},{key:"visibilityState",get:function(){return this._visibilityState}},{key:"isPlayerAuthorizationSupported",get:function(){return!1}},{key:"isPlayerAuthorized",get:function(){return this._isPlayerAuthorized}},{key:"playerId",get:function(){return this._playerId}},{key:"playerName",get:function(){return this._playerName}},{key:"playerPhotos",get:function(){return this._playerPhotos}},{key:"defaultStorageType",get:function(){return this._defaultStorageType}},{key:"isBannerSupported",get:function(){return this._isBannerSupported}},{key:"bannerState",get:function(){return this._bannerState}},{key:"interstitialState",get:function(){return this._interstitialState}},{key:"rewardedState",get:function(){return this._rewardedState}},{key:"isInviteFriendsSupported",get:function(){return!1}},{key:"isJoinCommunitySupported",get:function(){return!1}},{key:"isShareSupported",get:function(){return!1}},{key:"isCreatePostSupported",get:function(){return!1}},{key:"isAddToHomeScreenSupported",get:function(){return!1}},{key:"isAddToFavoritesSupported",get:function(){return!1}},{key:"isRateSupported",get:function(){return!1}},{key:"isExternalLinksAllowed",get:function(){return!0}},{key:"deviceType",get:function(){if(navigator&&navigator.userAgent){var e=navigator.userAgent.toLowerCase();if(/android|webos|iphone|ipod|blackberry|iemobile|opera mini/i.test(e))return c.MOBILE;if(/ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP)))/.test(e))return c.TABLET}return c.DESKTOP}},{key:"isLeaderboardSupported",get:function(){return!1}},{key:"isLeaderboardNativePopupSupported",get:function(){return!1}},{key:"isLeaderboardMultipleBoardsSupported",get:function(){return!1}},{key:"isLeaderboardSetScoreSupported",get:function(){return!1}},{key:"isLeaderboardGetScoreSupported",get:function(){return!1}},{key:"isLeaderboardGetEntriesSupported",get:function(){return!1}},{key:"isPaymentsSupported",get:function(){return!1}},{key:"isPaymentsAvailable",get:function(){return!1}},{key:"isPaymentsGetCatalogSupported",get:function(){var e;return!(null===(e=this._options)||void 0===e||null===(e=e.payments)||void 0===e||!e.catalog)}},{key:"isPaymentsGetPurchasesSupported",get:function(){return!1}},{key:"isPaymentsConsumePurchaseSupported",get:function(){return!1}},{key:"isRemoteConfigSupported",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!0}},{key:"isAchievementsSupported",get:function(){return!1}},{key:"isGetAchievementsListSupported",get:function(){return!1}},{key:"isAchievementsNativePopupSupported",get:function(){return!1}},{key:"initialize",value:function(){return Promise.resolve()}},{key:"sendMessage",value:function(){return Promise.resolve()}},{key:"getServerTime",value:function(){return new Promise((function(e,t){fetch("https://worldtimeapi.org/api/timezone/Etc/UTC").then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(t){e(1e3*t.unixtime)})).catch((function(){t()}))}))}},{key:"getAllGames",value:function(){return Promise.reject()}},{key:"getGameById",value:function(){return Promise.reject()}},{key:"authorizePlayer",value:function(){return Promise.reject()}},{key:"isStorageSupported",value:function(e){switch(e){case u.LOCAL_STORAGE:return null!==this._localStorage;case u.PLATFORM_INTERNAL:default:return!1}}},{key:"isStorageAvailable",value:function(e){switch(e){case u.LOCAL_STORAGE:return null!==this._localStorage;case u.PLATFORM_INTERNAL:default:return!1}}},{key:"getDataFromStorage",value:function(e,t,r){if(t===u.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var n=[],o=0;o<e.length;o++)n.push(this._getDataFromLocalStorage(e[o],r));return Promise.resolve(n)}var i=this._getDataFromLocalStorage(e,r);return Promise.resolve(i)}return Promise.reject(d)}return Promise.reject(d)}},{key:"setDataToStorage",value:function(e,t,r){if(r===u.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var n=0;n<e.length;n++)this._setDataToLocalStorage(e[n],t[n]);return Promise.resolve()}return this._setDataToLocalStorage(e,t),Promise.resolve()}return Promise.reject(d)}return Promise.reject(d)}},{key:"deleteDataFromStorage",value:function(e,t){if(t===u.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var r=0;r<e.length;r++)this._deleteDataFromLocalStorage(e[r]);return Promise.resolve()}return this._deleteDataFromLocalStorage(e),Promise.resolve()}return Promise.reject(d)}return Promise.reject(d)}},{key:"showBanner",value:function(){this._setBannerState(s.FAILED)}},{key:"hideBanner",value:function(){this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(){this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){this._setRewardedState(a.FAILED)}},{key:"checkAdBlock",value:function(){var e=document.createElement("div");e.className="textads banner-ads banner_ads ad-unit ad-zone ad-space adsbox",e.style.position="absolute",e.style.left="-9999px",e.style.width="1px",e.style.height="1px",document.body.appendChild(e);var t={method:"HEAD",mode:"no-cors"};return new Promise((function(r){fetch("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",t).then((function(t){t.redirected?r(t.redirected):window.setTimeout((function(){var t,n=0===e.offsetHeight||"none"===(null===(t=window.getComputedStyle(e))||void 0===t?void 0:t.display);r(n),e.remove()}),100)})).catch((function(){r(!0)}))}))}},{key:"inviteFriends",value:function(){return Promise.reject()}},{key:"joinCommunity",value:function(){return Promise.reject()}},{key:"share",value:function(){return Promise.reject()}},{key:"createPost",value:function(){return Promise.reject()}},{key:"addToHomeScreen",value:function(){return Promise.reject()}},{key:"addToFavorites",value:function(){return Promise.reject()}},{key:"rate",value:function(){return Promise.reject()}},{key:"setLeaderboardScore",value:function(){return Promise.reject()}},{key:"getLeaderboardScore",value:function(){return Promise.reject()}},{key:"getLeaderboardEntries",value:function(){return Promise.reject()}},{key:"showLeaderboardNativePopup",value:function(){return Promise.reject()}},{key:"paymentsPurchase",value:function(){return Promise.reject()}},{key:"paymentsGetPurchases",value:function(){return Promise.reject()}},{key:"paymentsGetCatalog",value:function(){var e;return null!==(e=this._options)&&void 0!==e&&null!==(e=e.payments)&&void 0!==e&&e.catalog?Promise.resolve(this._options.payments.catalog):Promise.reject()}},{key:"paymentsConsumePurchase",value:function(){return Promise.reject()}},{key:"getRemoteConfig",value:function(){return Promise.reject()}},{key:"clipboardRead",value:function(){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.readText():Promise.reject()}},{key:"clipboardWrite",value:function(e){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.writeText(e):Promise.reject()}},{key:"unlockAchievement",value:function(){return Promise.reject()}},{key:"getAchievementsList",value:function(){return Promise.reject()}},{key:"showAchievementsNativePopup",value:function(){return Promise.reject()}},{key:"_getDataFromLocalStorage",value:function(e,t){var r=this._localStorage.getItem(e);if(t&&"string"==typeof r)try{r=JSON.parse(r)}catch(e){}return r}},{key:"_setDataToLocalStorage",value:function(e,t){this._localStorage.setItem(e,"object"===zt(t)?JSON.stringify(t):t)}},{key:"_deleteDataFromLocalStorage",value:function(e){this._localStorage.removeItem(e)}},{key:"_setVisibilityState",value:function(e){this._visibilityState!==e&&(this._visibilityState=e,this.emit(n.VISIBILITY_STATE_CHANGED,this._visibilityState))}},{key:"_setInterstitialState",value:function(e){this._interstitialState===e&&e!==i.FAILED||(this._interstitialState=e,this.emit(n.INTERSTITIAL_STATE_CHANGED,this._interstitialState))}},{key:"_setRewardedState",value:function(e){this._rewardedState===e&&e!==a.FAILED||(this._rewardedState=e,this.emit(n.REWARDED_STATE_CHANGED,this._rewardedState))}},{key:"_setBannerState",value:function(e){this._bannerState===e&&e!==s.FAILED||(this._bannerState=e,this.emit(n.BANNER_STATE_CHANGED,this._bannerState))}},{key:"_createPromiseDecorator",value:function(e){var t=new I;return Zt(this,Kt)[e]=t,t}},{key:"_getPromiseDecorator",value:function(e){return Zt(this,Kt)[e]}},{key:"_resolvePromiseDecorator",value:function(e,t){Zt(this,Kt)[e]&&(Zt(this,Kt)[e].resolve(t),delete Zt(this,Kt)[e])}},{key:"_rejectPromiseDecorator",value:function(e,t){Zt(this,Kt)[e]&&(Zt(this,Kt)[e].reject(t),delete Zt(this,Kt)[e])}}])&&xt(r.prototype,l),Object.defineProperty(r,"prototype",{writable:!1}),t}();X().mixin(Jt.prototype);const qt=Jt;var Xt=function(e){return new Promise((function(t){var r=document.createElement("script");r.src=e,r.addEventListener("load",t),document.head.appendChild(r)}))},Qt=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length<=0?Promise.resolve():new Promise((function(e){var r=setInterval((function(){for(var n=window,o=0;o<t.length;o++){var i=n[t[o]];if(!i)return;n=i}e(),clearInterval(r)}),100)}))},$t=function(e){return/^data:image\/(png|jpeg|jpg|gif|bmp|webp|svg\+xml);base64,[A-Za-z0-9+/]+={0,2}$/.test(e)},er=function(e,t){return void 0===e[t]?null:e[t]};function tr(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Array.isArray(e)?e.reduce((function(e,n,o){if(e[o]=er(t,n),r)try{e[o]=JSON.parse(e[o])}catch(e){console.error(e)}return e}),new Array(e.length)):er(t,e)}function rr(e){return rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rr(e)}function nr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,or(n.key),n)}}function or(e){var t=function(e,t){if("object"!=rr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=rr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==rr(t)?t:String(t)}function ir(){return ir="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ur(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},ir.apply(this,arguments)}function ar(e,t){return ar=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ar(e,t)}function sr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ur(e){return ur=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ur(e)}function cr(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function lr(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function fr(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,pr(e,t,"get"))}function pr(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var dr=new WeakMap,yr=new WeakSet;function hr(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"result",i=this._getPromiseDecorator(e);return i||(i=this._createPromiseDecorator(e),this._platformSdk.send(t,n).then((function(t){t[o]?r._resolvePromiseDecorator(e):r._rejectPromiseDecorator(e)})).catch((function(t){r._rejectPromiseDecorator(e,t)}))),i.promise}const mr=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ar(e,t)}(d,t);var r,n,o,l,p=(o=d,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ur(o);if(l){var r=ur(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===rr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sr(e)}(this,e)});function d(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return cr(t=sr(e=p.call.apply(p,[this].concat(o))),r=yr),r.add(t),function(e,t,r){cr(e,t),t.set(e,{writable:!0,value:void 0})}(sr(e),dr),e}return r=d,(n=[{key:"platformId",get:function(){return e.VK}},{key:"platformLanguage",get:function(){var e=new URL(window.location.href);if(e.searchParams.has("language")){var t=e.searchParams.get("language"),r=0;try{r=parseInt(t,10)}catch(e){r=0}switch(r){case 0:default:return"ru";case 1:return"uk";case 2:return"be";case 3:return"en"}}return ir(ur(d.prototype),"platformLanguage",this)}},{key:"platformPayload",get:function(){var e=new URL(window.location.href);return e.searchParams.has("hash")?e.searchParams.get("hash"):ir(ur(d.prototype),"platformPayload",this)}},{key:"deviceType",get:function(){switch(fr(this,dr)){case"html5_ios":case"html5_android":case"html5_mobile":return c.MOBILE;case"web":return c.DESKTOP;default:return ir(ur(d.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPlayerAuthorized",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return"html5_android"===fr(this,dr)}},{key:"isAddToFavoritesSupported",get:function(){return!0}},{key:"isLeaderboardSupported",get:function(){return this.deviceType===c.MOBILE}},{key:"isLeaderboardNativePopupSupported",get:function(){return this.deviceType===c.MOBILE}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t,r,n,o=this._getPromiseDecorator(f.INITIALIZE);if(!o){o=this._createPromiseDecorator(f.INITIALIZE);var i=new URL(window.location.href);i.searchParams.has("platform")&&(t=this,r=dr,n=i.searchParams.get("platform"),function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(t,pr(t,r,"set"),n)),Xt("https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js").then((function(){Qt("vkBridge").then((function(){e._platformSdk=window.vkBridge,e._platformSdk.send("VKWebAppInit").then((function(){e._isBannerSupported=!0,e._platformSdk.send("VKWebAppGetUserInfo").then((function(t){t&&(e._playerId=t.id,e._playerName="".concat(t.first_name," ").concat(t.last_name),t.photo_100&&e._playerPhotos.push(t.photo_100),t.photo_200&&e._playerPhotos.push(t.photo_200),t.photo_max_orig&&e._playerPhotos.push(t.photo_max_orig))})).finally((function(){e._isInitialized=!0,e._defaultStorageType=u.PLATFORM_INTERNAL,e._resolvePromiseDecorator(f.INITIALIZE)}))}))}))}))}return o.promise}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||ir(ur(d.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL||ir(ur(d.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,o){var i=Array.isArray(e)?e:[e];n._platformSdk.send("VKWebAppStorageGet",{keys:i}).then((function(n){if(Array.isArray(e)){var o=[];return i.forEach((function(e){var t=n.keys.findIndex((function(t){return t.key===e}));if(t<0)o.push(null);else if(""!==n.keys[t].value){var i=n.keys[t].value;if(r)try{i=JSON.parse(n.keys[t].value)}catch(e){}o.push(i)}else o.push(null)})),void t(o)}if(""!==n.keys[0].value){var a=n.keys[0].value;if(r)try{a=JSON.parse(n.keys[0].value)}catch(e){}t(a)}else t(null)})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?o(e.error_data.error_reason):o()}))})):ir(ur(d.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;if(r===u.PLATFORM_INTERNAL){if(Array.isArray(e)){for(var o=[],i=0;i<e.length;i++){var a={key:e[i],value:t[i]};"string"!=typeof t[i]&&(a.value=JSON.stringify(t[i])),o.push(this._platformSdk.send("VKWebAppStorageSet",a))}return Promise.all(o)}var s={key:e,value:t};return"string"!=typeof t&&(s.value=JSON.stringify(t)),new Promise((function(e,t){n._platformSdk.send("VKWebAppStorageSet",s).then((function(){e()})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?t(e.error_data.error_reason):t()}))}))}return ir(ur(d.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){if(t===u.PLATFORM_INTERNAL){if(Array.isArray(e)){for(var r=[],n=0;n<e.length;n++)r.push(this.setDataToStorage(e[n],"",t));return Promise.all(r)}return this.setDataToStorage(e,"",t)}return ir(ur(d.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(e){var t=this,r="bottom",n="resize",o=!1;e&&("string"==typeof e.position&&(r=e.position),"string"==typeof e.layoutType&&(n=e.layoutType),"boolean"==typeof e.canClose&&(o=e.canClose)),this._platformSdk.send("VKWebAppShowBannerAd",{banner_location:r,layout_type:n,can_close:o}).then((function(e){e.result?t._setBannerState(s.SHOWN):t._setBannerState(s.FAILED)})).catch((function(){t._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.send("VKWebAppHideBannerAd").then((function(t){t.result&&e._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"interstitial"}).then((function(t){t.result&&e._setInterstitialState(i.OPENED)})).finally((function(){e._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"interstitial"}).then((function(t){e._setInterstitialState(t.result?i.CLOSED:i.FAILED)})).catch((function(){e._setInterstitialState(i.FAILED)}))}))}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(t){t.result&&e._setRewardedState(a.OPENED)})).finally((function(){e._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(t){t.result?(e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)})).catch((function(){e._setRewardedState(a.FAILED)}))}))}},{key:"inviteFriends",value:function(){return lr(this,yr,hr).call(this,f.INVITE_FRIENDS,"VKWebAppShowInviteBox",{},"success")}},{key:"joinCommunity",value:function(e){if(!e||!e.groupId)return Promise.reject();var t=e.groupId;return"string"==typeof t&&(t=parseInt(t,10),Number.isNaN(t))?Promise.reject():lr(this,yr,hr).call(this,f.JOIN_COMMUNITY,"VKWebAppJoinGroup",{group_id:t}).then((function(){window.open("https://vk.com/public".concat(t))}))}},{key:"share",value:function(e){var t={};return e&&e.link&&(t.link=e.link),lr(this,yr,hr).call(this,f.SHARE,"VKWebAppShare",t,"type")}},{key:"addToHomeScreen",value:function(){return this.isAddToHomeScreenSupported?lr(this,yr,hr).call(this,f.ADD_TO_HOME_SCREEN,"VKWebAppAddToHomeScreen"):Promise.reject()}},{key:"addToFavorites",value:function(){return lr(this,yr,hr).call(this,f.ADD_TO_FAVORITES,"VKWebAppAddToFavorites")}},{key:"showLeaderboardNativePopup",value:function(e){if(!this.isLeaderboardNativePopupSupported)return Promise.reject();if(!e||!e.userResult)return Promise.reject();var t={user_result:e.userResult};return"boolean"==typeof e.global&&(t.global=e.global?1:0),lr(this,yr,hr).call(this,f.SHOW_LEADERBOARD_NATIVE_POPUP,"VKWebAppShowLeaderBoardBox",t)}},{key:"clipboardWrite",value:function(e){return lr(this,yr,hr).call(this,f.CLIPBOARD_WRITE,"VKWebAppCopyText",{text:e})}}])&&nr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),d}(qt);function vr(e){return vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vr(e)}function _r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_r(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=br(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_r(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Sr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,br(n.key),n)}}function br(e){var t=function(e,t){if("object"!=vr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=vr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==vr(t)?t:String(t)}function Er(){return Er="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wr(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Er.apply(this,arguments)}function Pr(e,t){return Pr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pr(e,t)}function Ar(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wr(e){return wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wr(e)}function Or(e,t,r){kr(e,t),t.set(e,r)}function kr(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Dr(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Tr(e,t,"set"),r),r}function Rr(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Ir(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Tr(e,t,"get"))}function Tr(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Lr=new WeakMap,jr=new WeakMap,Nr=new WeakMap,Cr=new WeakMap,Br=new WeakSet;function Mr(e){var t=this;return new Promise((function(r){var n={scopes:!1};e&&"boolean"==typeof e.scopes&&(n.scopes=e.scopes),t._platformSdk.getPlayer(n).then((function(e){t._playerId=e.getUniqueID(),t._isPlayerAuthorized="lite"!==e.getMode(),t._defaultStorageType=t._isPlayerAuthorized?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE;var r=e.getName();""!==r&&(t._playerName=r),t._playerPhotos=[];var n=e.getPhoto("small"),o=e.getPhoto("medium"),i=e.getPhoto("large");return n&&t._playerPhotos.push(n),o&&t._playerPhotos.push(o),i&&t._playerPhotos.push(i),Dr(t,jr,e),e.getData()})).then((function(e){t._platformStorageCachedData=e})).finally((function(){r()}))}))}const Gr=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pr(e,t)}(y,t);var r,n,o,p,d=(o=y,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=wr(o);if(p){var r=wr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===vr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ar(e)}(this,e)});function y(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return kr(t=Ar(e=d.call.apply(d,[this].concat(o))),r=Br),r.add(t),Or(Ar(e),Lr,{writable:!0,value:!1}),Or(Ar(e),jr,{writable:!0,value:null}),Or(Ar(e),Nr,{writable:!0,value:null}),Or(Ar(e),Cr,{writable:!0,value:null}),e}return r=y,(n=[{key:"platformId",get:function(){return e.YANDEX}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.lang.toLowerCase():Er(wr(y.prototype),"platformLanguage",this)}},{key:"platformTld",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.tld.toLowerCase():Er(wr(y.prototype),"platformTld",this)}},{key:"isPlatformGetAllGamesSupported",get:function(){return!0}},{key:"isPlatformGetGameByIdSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(this._platformSdk&&this._platformSdk.deviceInfo.type){case c.DESKTOP:return c.DESKTOP;case c.MOBILE:return c.MOBILE;case c.TABLET:return c.TABLET;case c.TV:return c.TV;default:return Er(wr(y.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return Ir(this,Lr)}},{key:"isRateSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isLeaderboardSupported",get:function(){return!0}},{key:"isLeaderboardMultipleBoardsSupported",get:function(){return!0}},{key:"isLeaderboardSetScoreSupported",get:function(){return!0}},{key:"isLeaderboardGetScoreSupported",get:function(){return!0}},{key:"isLeaderboardGetEntriesSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isPaymentsAvailable",get:function(){return!0}},{key:"isPaymentsGetCatalogSupported",get:function(){return!0}},{key:"isPaymentsGetPurchasesSupported",get:function(){return!0}},{key:"isPaymentsConsumePurchaseSupported",get:function(){return!0}},{key:"isRemoteConfigSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),Xt("/sdk.js").then((function(){Qt("YaGames","init").then((function(){window.YaGames.init().then((function(t){var r;e._platformSdk=t;var n=Rr(e,Br,Mr).call(e),o=null===(r=e._platformSdk.features.PluginEngineDataReporterAPI)||void 0===r?void 0:r.report({engineName:"",engineVersion:"",pluginName:"playgama-bridge",pluginVersion:"1.21.0"}),i=e._platformSdk.shortcut.canShowPrompt().then((function(t){Dr(e,Lr,t.canShow)})),a=new Promise((function(e){setTimeout(e,1e3)})),u=Promise.race([i,a]),c=e._platformSdk.getLeaderboards().then((function(t){Dr(e,Nr,t)})),l=e._platformSdk.getPayments().then((function(t){Dr(e,Cr,t)}));e._isBannerSupported=!0;var p=e._platformSdk.adv.getBannerAdvStatus().then((function(t){t.stickyAdvIsShowing&&e._setBannerState(s.SHOWN)}));Promise.all([n,o,u,c,l,p]).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE)}))}))}))}))),t.promise}},{key:"sendMessage",value:function(e){switch(e){case l.GAME_READY:var t;return null===(t=this._platformSdk.features.LoadingAPI)||void 0===t||t.ready(),Promise.resolve();case l.GAMEPLAY_STARTED:var r;return null===(r=this._platformSdk.features.GameplayAPI)||void 0===r||r.start(),Promise.resolve();case l.GAMEPLAY_STOPPED:var n;return null===(n=this._platformSdk.features.GameplayAPI)||void 0===n||n.stop(),Promise.resolve();default:return Er(wr(y.prototype),"sendMessage",this).call(this,e)}}},{key:"getServerTime",value:function(){var e=this;return new Promise((function(t){t(e._platformSdk.serverTime())}))}},{key:"getAllGames",value:function(){var e=this;return new Promise((function(t,r){e._platformSdk.features.GamesAPI.getAllGames().then((function(e){var r=e.games;t(r)})).catch(r)}))}},{key:"getGameById",value:function(e){var t=this;return null!=e&&e.gameId?new Promise((function(r,n){t._platformSdk.features.GamesAPI.getGameByID(null==e?void 0:e.gameId).then((function(e){var t=e.game,n=e.isAvailable;r(gr(gr({},t),{},{isAvailable:n}))})).catch(n)})):Promise.reject(new Error("Provide gameId"))}},{key:"authorizePlayer",value:function(e){var t=this,r=this._getPromiseDecorator(f.AUTHORIZE_PLAYER);return r||(r=this._createPromiseDecorator(f.AUTHORIZE_PLAYER),this._isPlayerAuthorized?Rr(this,Br,Mr).call(this,e).then((function(){t._resolvePromiseDecorator(f.AUTHORIZE_PLAYER)})):this._platformSdk.auth.openAuthDialog().then((function(){Rr(t,Br,Mr).call(t,e).then((function(){t._resolvePromiseDecorator(f.AUTHORIZE_PLAYER)}))})).catch((function(e){t._rejectPromiseDecorator(f.AUTHORIZE_PLAYER,e)}))),r.promise}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||Er(wr(y.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:Er(wr(y.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?new Promise((function(t){if(Array.isArray(e)){for(var r=[],o=0;o<e.length;o++){var i=void 0===n._platformStorageCachedData[e[o]]?null:n._platformStorageCachedData[e[o]];r.push(i)}t(r)}else t(void 0===n._platformStorageCachedData[e]?null:n._platformStorageCachedData[e])})):Promise.reject():Er(wr(y.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?gr({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;Ir(n,jr).setData(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(e){o(e)}))})):Promise.reject():Er(wr(y.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?new Promise((function(t,n){var o=null!==r._platformStorageCachedData?gr({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];Ir(r,jr).setData(o).then((function(){r._platformStorageCachedData=o,t()})).catch((function(e){n(e)}))})):Promise.reject():Er(wr(y.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(){var e=this;this._platformSdk.adv.showBannerAdv().then((function(t){t.stickyAdvIsShowing?e._setBannerState(s.SHOWN):e._setBannerState(s.FAILED)})).catch((function(){e._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.adv.hideBannerAdv().then((function(t){t.stickyAdvIsShowing||e._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.adv.showFullscreenAdv({callbacks:{onOpen:function(){e._setInterstitialState(i.OPENED)},onClose:function(t){t?e._setInterstitialState(i.CLOSED):e._setInterstitialState(i.FAILED)},onError:function(e){console.error(e)}}})}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.adv.showRewardedVideo({callbacks:{onOpen:function(){e._setRewardedState(a.OPENED)},onRewarded:function(){e._setRewardedState(a.REWARDED)},onClose:function(){e._setRewardedState(a.CLOSED)},onError:function(){e._setRewardedState(a.FAILED)}}})}},{key:"checkAdBlock",value:function(){return new Promise((function(e){e(!1)}))}},{key:"addToHomeScreen",value:function(){var e=this;if(!this.isAddToHomeScreenSupported)return Promise.reject();var t=this._getPromiseDecorator(f.ADD_TO_HOME_SCREEN);return t||(t=this._createPromiseDecorator(f.ADD_TO_HOME_SCREEN),this._platformSdk.shortcut.showPrompt().then((function(t){"accepted"!==t.outcome?e._rejectPromiseDecorator(f.ADD_TO_HOME_SCREEN):e._resolvePromiseDecorator(f.ADD_TO_HOME_SCREEN)})).catch((function(t){e._rejectPromiseDecorator(f.ADD_TO_HOME_SCREEN,t)}))),t.promise}},{key:"rate",value:function(){var e=this,t=this._getPromiseDecorator(f.RATE);return t||(t=this._createPromiseDecorator(f.RATE),this._platformSdk.feedback.canReview().then((function(t){t.value?e._platformSdk.feedback.requestReview().then((function(t){t.feedbackSent?e._resolvePromiseDecorator(f.RATE):e._rejectPromiseDecorator(f.RATE)})).catch((function(t){e._rejectPromiseDecorator(f.RATE,t)})):e._rejectPromiseDecorator(f.RATE,t.reason)})).catch((function(t){e._rejectPromiseDecorator(f.RATE,t)}))),t.promise}},{key:"setLeaderboardScore",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!(Ir(this,Nr)&&e&&e.score&&e.leaderboardName))return Promise.reject();var r=this._getPromiseDecorator(f.SET_LEADERBOARD_SCORE);return r||(r=this._createPromiseDecorator(f.SET_LEADERBOARD_SCORE),Ir(this,Nr).setLeaderboardScore(e.leaderboardName,"string"==typeof e.score?parseInt(e.score,10):e.score).then((function(){t._resolvePromiseDecorator(f.SET_LEADERBOARD_SCORE)})).catch((function(e){t._rejectPromiseDecorator(f.SET_LEADERBOARD_SCORE,e)}))),r.promise}},{key:"getLeaderboardScore",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!Ir(this,Nr)||!e||!e.leaderboardName)return Promise.reject();var r=this._getPromiseDecorator(f.GET_LEADERBOARD_SCORE);return r||(r=this._createPromiseDecorator(f.GET_LEADERBOARD_SCORE),Ir(this,Nr).getLeaderboardPlayerEntry(e.leaderboardName).then((function(e){t._resolvePromiseDecorator(f.GET_LEADERBOARD_SCORE,e.score)})).catch((function(e){t._rejectPromiseDecorator(f.GET_LEADERBOARD_SCORE,e)}))),r.promise}},{key:"getLeaderboardEntries",value:function(e){var t=this;if(!Ir(this,Nr)||!e||!e.leaderboardName)return Promise.reject();var r=this._getPromiseDecorator(f.GET_LEADERBOARD_ENTRIES);if(!r){r=this._createPromiseDecorator(f.GET_LEADERBOARD_ENTRIES);var n={};n.includeUser="boolean"==typeof e.includeUser&&e.includeUser,n.quantityAround="string"==typeof e.quantityAround?parseInt(e.quantityAround,10):e.quantityAround,Number.isNaN(n.quantityAround)&&(n.quantityAround=5),n.quantityTop="string"==typeof e.quantityTop?parseInt(e.quantityTop,10):e.quantityTop,Number.isNaN(n.quantityTop)&&(n.quantityTop=5),Ir(this,Nr).getLeaderboardEntries(e.leaderboardName,n).then((function(e){var r=null;e&&e.entries.length>0&&(r=e.entries.map((function(e){return{id:e.player.uniqueID,score:e.score,rank:e.rank,name:e.player.publicName,photo:e.player.getAvatarSrc("large")}}))),t._resolvePromiseDecorator(f.GET_LEADERBOARD_ENTRIES,r)})).catch((function(e){t._rejectPromiseDecorator(f.GET_LEADERBOARD_ENTRIES,e)}))}return r.promise}},{key:"paymentsPurchase",value:function(e){var t=this;if(!Ir(this,Cr)||!e.id)return Promise.reject();var r=this._getPromiseDecorator(f.PURCHASE);return r||(r=this._createPromiseDecorator(f.PURCHASE),Ir(this,Cr).purchase(e).then((function(e){t._resolvePromiseDecorator(f.PURCHASE,e)})).catch((function(e){t._rejectPromiseDecorator(f.PURCHASE,e)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this;if(!Ir(this,Cr))return Promise.reject();var t=this._getPromiseDecorator(f.GET_PURCHASES);return t||(t=this._createPromiseDecorator(f.GET_PURCHASES),Ir(this,Cr).getPurchases().then((function(t){var r=t.map((function(e){return{developerPayload:e.developerPayload,productID:e.productID,purchaseToken:e.purchaseToken}}));e._resolvePromiseDecorator(f.GET_PURCHASES,r)})).catch((function(t){e._rejectPromiseDecorator(f.GET_PURCHASES,t)}))),t.promise}},{key:"paymentsGetCatalog",value:function(){var e=this;if(!Ir(this,Cr))return Promise.reject();var t=this._getPromiseDecorator(f.GET_CATALOG);return t||(t=this._createPromiseDecorator(f.GET_CATALOG),Ir(this,Cr).getCatalog().then((function(t){var r=t.map((function(e){return{id:e.id,description:e.description,imageURI:e.imageURI,price:e.price,priceCurrencyCode:e.priceCurrencyCode,priceValue:e.priceValue,priceCurrencyImage:e.getPriceCurrencyImage("medium"),title:e.title}}));e._resolvePromiseDecorator(f.GET_CATALOG,r)})).catch((function(t){e._rejectPromiseDecorator(f.GET_CATALOG,t)}))),t.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this;if(!Ir(this,Cr)||!e.purchaseToken)return Promise.reject();var r=this._getPromiseDecorator(f.CONSUME_PURCHASE);return r||(r=this._createPromiseDecorator(f.CONSUME_PURCHASE),Ir(this,Cr).consumePurchase(e.purchaseToken).then((function(e){t._resolvePromiseDecorator(f.CONSUME_PURCHASE,e)})).catch((function(e){t._rejectPromiseDecorator(f.CONSUME_PURCHASE,e)}))),r.promise}},{key:"getRemoteConfig",value:function(e){var t=this;if(!this._platformSdk)return Promise.reject();var r=e;r||(r={}),r.clientFeatures||(r.clientFeatures=[]);var n=this._getPromiseDecorator(f.GET_REMOTE_CONFIG);return n||(n=this._createPromiseDecorator(f.GET_REMOTE_CONFIG),this._platformSdk.getFlags(r).then((function(e){t._resolvePromiseDecorator(f.GET_REMOTE_CONFIG,e)})).catch((function(e){t._rejectPromiseDecorator(f.GET_REMOTE_CONFIG,e)}))),n.promise}},{key:"clipboardWrite",value:function(e){var t=this,r=this._getPromiseDecorator(f.CLIPBOARD_WRITE);return r||(r=this._createPromiseDecorator(f.CLIPBOARD_WRITE),this._platformSdk.clipboard.writeText(e).then((function(){t._resolvePromiseDecorator(f.CLIPBOARD_WRITE,!0)})).catch((function(e){t._rejectPromiseDecorator(f.CLIPBOARD_WRITE,e)}))),r.promise}}])&&Sr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),y}(qt);function Fr(e){return Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fr(e)}function Hr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ur(n.key),n)}}function Ur(e){var t=function(e,t){if("object"!=Fr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Fr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Fr(t)?t:String(t)}function zr(){return zr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vr(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},zr.apply(this,arguments)}function Wr(e,t){return Wr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wr(e,t)}function xr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vr(e){return Vr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vr(e)}function Yr(e,t,r){Zr(e,t),t.set(e,r)}function Zr(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Kr(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Jr(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Xr(e,t,"set"),r),r}function qr(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Xr(e,t,"get"))}function Xr(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Qr="banner-container",$r=new WeakMap,en=new WeakMap,tn=new WeakMap,rn=new WeakSet;function nn(){var e=this;return qr(this,en)?new Promise((function(t,r){e._platformSdk.user.getUser().then((function(n){n?(e._isPlayerAuthorized=!0,e._defaultStorageType=u.PLATFORM_INTERNAL,n.username&&(e._playerName=n.username),n.profilePictureUrl&&(e._playerPhotos=[n.profilePictureUrl]),t()):r()})).catch((function(e){r(e)}))})):Promise.reject()}const on=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wr(e,t)}(y,t);var r,n,o,p,d=(o=y,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Vr(o);if(p){var r=Vr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Fr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xr(e)}(this,e)});function y(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return Zr(t=xr(e=d.call.apply(d,[this].concat(o))),r=rn),r.add(t),Yr(xr(e),$r,{writable:!0,value:!1}),Yr(xr(e),en,{writable:!0,value:!1}),Yr(xr(e),tn,{writable:!0,value:{adStarted:function(){qr(xr(e),$r)?e._setRewardedState(a.OPENED):e._setInterstitialState(i.OPENED)},adFinished:function(){qr(xr(e),$r)?(e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setInterstitialState(i.CLOSED)},adError:function(){qr(xr(e),$r)?e._setRewardedState(a.FAILED):e._setInterstitialState(i.FAILED)}}}),e}return r=y,(n=[{key:"platformId",get:function(){return e.CRAZY_GAMES}},{key:"platformLanguage",get:function(){return qr(this,en)?this._platformSdk.user.systemInfo.countryCode.toLowerCase():zr(Vr(y.prototype),"platformLanguage",this)}},{key:"isPlayerAuthorizationSupported",get:function(){return qr(this,en)}},{key:"deviceType",get:function(){if(qr(this,en)){var e=this._platformSdk.user.systemInfo.device.type.toLowerCase();if([c.DESKTOP,c.MOBILE,c.TABLET].includes(e))return e}return zr(Vr(y.prototype),"deviceType",this)}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),Xt("https://sdk.crazygames.com/crazygames-sdk-v3.js").then((function(){Qt("CrazyGames","SDK","init").then((function(){e._platformSdk=window.CrazyGames.SDK,e._defaultStorageType=u.LOCAL_STORAGE,e._isBannerSupported=!0,e._platformSdk.init().then((function(){Jr(e,en,e._platformSdk.user.isUserAccountAvailable);var t=Kr(e,rn,nn).call(e);Promise.all([t]).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE)}))}))}))}))),t.promise}},{key:"authorizePlayer",value:function(){var e=this;if(!qr(this,en))return Promise.reject();if(this._isPlayerAuthorized)return Promise.resolve();var t=this._getPromiseDecorator(f.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(f.AUTHORIZE_PLAYER),this._platformSdk.user.showAuthPrompt().then((function(){Kr(e,rn,nn).call(e).then((function(){e._resolvePromiseDecorator(f.AUTHORIZE_PLAYER)}))})).catch((function(t){e._rejectPromiseDecorator(f.AUTHORIZE_PLAYER,t)}))),t.promise}},{key:"sendMessage",value:function(e){switch(e){case l.IN_GAME_LOADING_STARTED:return this._platformSdk.game.loadingStart(),Promise.resolve();case l.IN_GAME_LOADING_STOPPED:return this._platformSdk.game.loadingStop(),Promise.resolve();case l.GAMEPLAY_STARTED:return this._platformSdk.game.gameplayStart(),Promise.resolve();case l.GAMEPLAY_STOPPED:return this._platformSdk.game.gameplayStop(),Promise.resolve();case l.PLAYER_GOT_ACHIEVEMENT:return this._platformSdk.game.happytime(),Promise.resolve();default:return zr(Vr(y.prototype),"sendMessage",this).call(this,e)}}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||zr(Vr(y.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:zr(Vr(y.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t){if(Array.isArray(e)){var o=[];return e.forEach((function(e){var t=n._platformSdk.data.getItem(e);if(r)try{t=JSON.parse(t)}catch(e){}o.push(t)})),void t(o)}var i=n._platformSdk.data.getItem(e);if(r)try{i=JSON.parse(i)}catch(e){}t(i)})):zr(Vr(y.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r){if(Array.isArray(e)){for(var o=0;o<e.length;o++){var i=t[o];"string"!=typeof t[o]&&(i=JSON.stringify(t[o])),n._platformSdk.data.setItem(e[o],i)}r()}else{var a=t;"string"!=typeof t&&(a=JSON.stringify(t)),n._platformSdk.data.setItem(e,a),r()}})):zr(Vr(y.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?Array.isArray(e)?(e.forEach((function(e){return r._platformSdk.data.removeItem(e)})),Promise.resolve()):(this._platformSdk.data.removeItem(e),Promise.resolve()):zr(Vr(y.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(e){var t=this,r=document.getElementById(Qr);r||((r=document.createElement("div")).id=Qr,r.style.position="absolute",document.body.appendChild(r)),"top"===(null==e?void 0:e.position)?(r.style.top=0,r.style.height="90px",r.style.width="100%"):"left"===(null==e?void 0:e.position)?(r.style.left=0,r.style.top=0,r.style.height="100%",r.style.width="90px"):"right"===(null==e?void 0:e.position)?(r.style.right=0,r.style.top=0,r.style.height="100%",r.style.width="90px"):(r.style.bottom=0,r.style.height="90px",r.style.width="100%"),r.style.display="block",this._platformSdk.banner.requestResponsiveBanner([Qr]).then((function(){t._setBannerState(s.SHOWN)})).catch((function(){t._setBannerState(s.FAILED),r.style.display="none"}))}},{key:"hideBanner",value:function(){var e=document.getElementById(Qr);e&&(e.style.display="none"),this._platformSdk.banner.clearAllBanners(),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(){Jr(this,$r,!1),this._platformSdk.ad.requestAd("midgame",qr(this,tn))}},{key:"showRewarded",value:function(){Jr(this,$r,!0),this._platformSdk.ad.requestAd("rewarded",qr(this,tn))}},{key:"checkAdBlock",value:function(){var e=this;return new Promise((function(t){e._platformSdk.ad.hasAdblock().then((function(e){t(e)}))}))}}])&&Hr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),y}(qt);function an(e){return an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},an(e)}function sn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function un(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=ln(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function cn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ln(n.key),n)}}function ln(e){var t=function(e,t){if("object"!=an(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=an(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==an(t)?t:String(t)}function fn(){return fn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yn(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},fn.apply(this,arguments)}function pn(e,t){return pn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pn(e,t)}function dn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yn(e){return yn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yn(e)}var hn=new WeakSet;function mn(){var e=this;return this._playerId=this._platformSdk.options.player_id,this._isPlayerAuthorized="false"===this._platformSdk.options.guest,new Promise((function(t){e._platformSdk.getUsers([e._playerId],(function(r){if(r&&1===r.length){var n=r[0];e._playerName=n.full_name,""!==n.avatar&&(e._playerPhotos=[n.avatar])}t()}))}))}const vn=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pn(e,t)}(l,t);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=yn(o);if(s){var r=yn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===an(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return dn(e)}(this,e)});function l(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=dn(e=c.call.apply(c,[this].concat(o))),r=hn),r.add(t),e}return r=l,(n=[{key:"platformId",get:function(){return e.ABSOLUTE_GAMES}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),Xt("https://unpkg.com/@agru/sdk/dist/umd/index.min.js").then((function(){e._platformSdk=new window.AgRuSdk,e._platformSdk.on(window.AgRuSdkMethods.ShowCampaign,(function(t,r){"rewarded"===t.type?null===r?t.status?e._setRewardedState(a.OPENED):(t.reward&&e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED):null===r?t.status?e._setInterstitialState(i.OPENED):e._setInterstitialState(i.CLOSED):e._setInterstitialState(i.FAILED)}));var t=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}(e,hn,mn).call(e);Promise.all([t]).finally((function(){e._isInitialized=!0,e._defaultStorageType=e._isPlayerAuthorized?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE,e._resolvePromiseDecorator(f.INITIALIZE)}))}))),t.promise}},{key:"authorizePlayer",value:function(){var e=this;if(this._isPlayerAuthorized)return Promise.resolve();var t=this._getPromiseDecorator(f.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(f.AUTHORIZE_PLAYER),this._platformSdk.authorize((function(t,r){null===r?e._resolvePromiseDecorator(f.AUTHORIZE_PLAYER):e._rejectPromiseDecorator(f.AUTHORIZE_PLAYER,r)}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||fn(yn(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:fn(yn(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,r){if(n._platformStorageCachedData){if(Array.isArray(e)){for(var o=[],i=0;i<e.length;i++){var a=void 0===n._platformStorageCachedData[e[i]]?null:n._platformStorageCachedData[e[i]];o.push(a)}return void t(o)}t(void 0===n._platformStorageCachedData[e]?null:n._platformStorageCachedData[e])}else n._isPlayerAuthorized?n._platformSdk.getSaveData((function(o,i){if(null===i){if(n._platformStorageCachedData=o||{},Array.isArray(e)){for(var a=[],s=0;s<e.length;s++){var u=void 0===n._platformStorageCachedData[e[s]]?null:n._platformStorageCachedData[e[s]];a.push(u)}return void t(a)}t(void 0===n._platformStorageCachedData[e]?null:n._platformStorageCachedData[e])}else r(i)})):r()})):fn(yn(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){if(n._isPlayerAuthorized){var i=null!==n._platformStorageCachedData?un({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n._platformSdk.setSaveData(i,(function(e,t){null===t&&(n._platformStorageCachedData=i,r()),o(t)}))}else o()})):fn(yn(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,n){if(r._isPlayerAuthorized){var o=null!==r._platformStorageCachedData?un({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];r._platformSdk.setSaveData(o,(function(e,i){null===i&&(r._platformStorageCachedData=o,t()),n(i)}))}else n()})):fn(yn(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){this._platformSdk.showCampaign("default")}},{key:"showRewarded",value:function(){this._platformSdk.showCampaign("rewarded")}}])&&cn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(qt);function _n(e){return _n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_n(e)}function gn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Sn(n.key),n)}}function Sn(e){var t=function(e,t){if("object"!=_n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=_n(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_n(t)?t:String(t)}function bn(e,t){return bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bn(e,t)}function En(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pn(e){return Pn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pn(e)}function An(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,On(e,t,"set"),r),r}function wn(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,On(e,t,"get"))}function On(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var kn="banner-container",Dn=new WeakMap;const Rn=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bn(e,t)}(p,t);var r,n,o,c,l=(o=p,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Pn(o);if(c){var r=Pn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===_n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return En(e)}(this,e)});function p(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=En(e=l.call.apply(l,[this].concat(i))),n={writable:!0,value:!1},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r=Dn),r.set(t,n),e}return r=p,(n=[{key:"platformId",get:function(){return e.GAME_DISTRIBUTION}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(f.INITIALIZE);if(!e)if(e=this._createPromiseDecorator(f.INITIALIZE),this._options&&"string"==typeof this._options.gameId){var t=this;window.GD_OPTIONS={gameId:this._options.gameId,onEvent:function(e){switch(e.name){case"SDK_READY":t._platformSdk=window.gdsdk,t._platformSdk.preloadAd("rewarded"),t._isInitialized=!0,t.showInterstitial(),t._resolvePromiseDecorator(f.INITIALIZE);break;case"SDK_GAME_START":wn(t,Dn)?t._setRewardedState(a.CLOSED):t._setInterstitialState(i.CLOSED);break;case"SDK_GAME_PAUSE":wn(t,Dn)?t._setRewardedState(a.OPENED):t._setInterstitialState(i.OPENED);break;case"SDK_REWARDED_WATCH_COMPLETE":t._setRewardedState(a.REWARDED)}}},this._defaultStorageType=u.LOCAL_STORAGE,this._isBannerSupported=!0,Xt("https://html5.api.gamedistribution.com/main.min.js")}else this._rejectPromiseDecorator(f.INITIALIZE,h);return e.promise}},{key:"showBanner",value:function(e){var t=this,r=document.getElementById(kn);r||((r=document.createElement("div")).id=kn,r.style.position="absolute",document.body.appendChild(r)),"top"===(null==e?void 0:e.position)?(r.style.top=0,r.style.height="90px",r.style.width="100%"):"left"===(null==e?void 0:e.position)?(r.style.left=0,r.style.top=0,r.style.height="100%",r.style.width="90px"):"right"===(null==e?void 0:e.position)?(r.style.right=0,r.style.top=0,r.style.height="100%",r.style.width="90px"):(r.style.bottom=0,r.style.height="90px",r.style.width="100%"),r.style.display="block",this._platformSdk.showAd("display",{containerId:kn}).then((function(){t._setBannerState(s.SHOWN)})).catch((function(){t._setBannerState(s.FAILED),r.style.display="none"}))}},{key:"hideBanner",value:function(){var e=document.getElementById(kn);e&&(e.style.display="none"),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(){var e=this;An(this,Dn,!1),this._platformSdk?this._platformSdk.showAd().catch((function(){e._setInterstitialState(i.FAILED)})):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var e=this;An(this,Dn,!0),this._platformSdk?this._platformSdk.showAd("rewarded").catch((function(){e._setRewardedState(a.FAILED)})):this._setRewardedState(a.FAILED)}}])&&gn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(qt);function In(e){return In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},In(e)}function Tn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ln(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(r),!0).forEach((function(t){Un(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zn(n.key),n)}}function Nn(){return Nn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Mn(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Nn.apply(this,arguments)}function Cn(e,t){return Cn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Cn(e,t)}function Bn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mn(e){return Mn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mn(e)}function Gn(e,t){Hn(e,t),t.add(e)}function Fn(e,t,r){Hn(e,t),t.set(e,r)}function Hn(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Un(e,t,r){return(t=zn(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zn(e){var t=function(e,t){if("object"!=In(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=In(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==In(t)?t:String(t)}function Wn(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function xn(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}var Vn="AUTHORIZED",Yn={VALUABLE_ACCESS:"VALUABLE_ACCESS",PHOTO_CONTENT:"PHOTO_CONTENT"},Zn=new WeakMap,Kn=new WeakMap,Jn=new WeakMap,qn=new WeakSet,Xn=new WeakSet,Qn=new WeakSet,$n=new WeakSet,eo=new WeakSet,to=new WeakSet,ro=new WeakSet,no=new WeakSet,oo=new WeakSet,io=new WeakSet,ao=new WeakSet,so=new WeakSet,uo=new WeakSet,co=new WeakSet,lo=new WeakSet,fo=new WeakSet;function po(){return{userProfile:{fields:"uid,name,pic50x50,pic128x128,pic_base",method:"users.getCurrentUser"},hasAppPermission:function(e){return{method:"users.hasAppPermission",ext_perm:e}}}}function yo(){var e=this;return{userProfileCallback:function(t,r,n){return Wn(e,qn,mo).call(e,t,r,n)},hasValueAccessCallback:function(t,r,n){return Wn(e,Qn,_o).call(e,r,n)}}}function ho(){var e=this;return{showPermissions:function(){return Wn(e,$n,go).call(e)},loadAd:function(t){return Wn(e,eo,So).call(e,t)},showLoadedAd:function(t,r){return Wn(e,to,bo).call(e,r)},showAd:function(t,r){return Wn(e,ro,Eo).call(e,r)},requestBannerAds:function(t,r){return Wn(e,no,Po).call(e,t,r)},showBannerAds:function(t,r){return Wn(e,io,wo).call(e,r)},hideBannerAds:function(t,r){return Wn(e,oo,Ao).call(e,r)},setBannerFormat:function(t){return Wn(e,ao,Oo).call(e,t)},showInvite:function(t){return Wn(e,so,ko).call(e,t)},showRatingDialog:function(t,r){return Wn(e,uo,Do).call(e,t,r)},joinGroup:function(t,r){return Wn(e,co,Ro).call(e,t,r)},showLoginSuggestion:function(t,r){return Wn(e,Xn,vo).call(e,t,r)},postMediatopic:function(t,r){return Wn(e,lo,Io).call(e,t,r)},isAdBlockEnabled:function(t,r){return Wn(e,fo,To).call(e,t,r)}}}function mo(e,t){"ok"===e&&(this._playerId=t.uid,this._playerName=t.name,this._playerPhotos=[t.pic50x50,t.pic128x128,t.pic_base]),this._isInitialized=!0,this._platformSdk.Client.call(xn(this,Zn).hasAppPermission(Yn.VALUABLE_ACCESS),xn(this,Kn).hasValueAccessCallback)}function vo(e,t){if("error"===e)return this._isPlayerAuthorized=!1,void this._rejectPromiseDecorator(f.AUTHORIZE_PLAYER,t);this._isPlayerAuthorized=!0,this._resolvePromiseDecorator(f.AUTHORIZE_PLAYER)}function _o(e){if(this._hasValuableAccessPermission=!!e,this._defaultStorageType=this._hasValuableAccessPermission?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE,this._hasValuableAccessPermission||this._hasValuableAccessPermissionShowed)this._resolvePromiseDecorator(f.INITIALIZE);else{var t=Object.values(Yn).map((function(e){return'"'.concat(e,'"')})).join(",");this._platformSdk.UI.showPermissions("[".concat(t,"]"))}}function go(){this._hasValuableAccessPermissionShowed=!0,this._platformSdk.Client.call(xn(this,Zn).hasAppPermission(Yn.VALUABLE_ACCESS),xn(this,Kn).hasValueAccessCallback)}function So(e){"error"===e?this._setRewardedState(a.FAILED):(this._setRewardedState(a.OPENED),this._platformSdk.UI.showLoadedAd())}function bo(e){switch(e){case"complete":this._setRewardedState(a.REWARDED),this._setRewardedState(a.CLOSED);break;case"skip":this._setRewardedState(a.CLOSED);break;default:this._setRewardedState(a.FAILED)}}function Eo(e){switch(e){case"ready":case"ad_prepared":break;case"ad_shown":this._setInterstitialState(i.OPENED),this._setInterstitialState(i.CLOSED);break;default:this._setInterstitialState(i.FAILED)}}function Po(e,t){if("error"!==e)switch(t){case"ad_loaded":this._platformSdk.invokeUIMethod("showBannerAds");break;case"banner_shown":case"ad_shown":this._setBannerState(s.SHOWN);break;case"hidden_by_user":this._setBannerState(s.HIDDEN)}else this._setBannerState(s.FAILED)}function Ao(e){e?this._setBannerState(s.HIDDEN):this._setBannerState(s.FAILED)}function wo(e){e||this._setBannerState(s.FAILED)}function Oo(e){"error"===e?this._setBannerState(s.FAILED):this.showBanner(this._platformBannerOptions)}function ko(e){"error"===e?this._rejectPromiseDecorator(f.INVITE_FRIENDS):this._resolvePromiseDecorator(f.INVITE_FRIENDS)}function Do(e,t){"error"===e?this._rejectPromiseDecorator(f.RATE,t):this._resolvePromiseDecorator(f.RATE)}function Ro(e,t){"error"===e?this._rejectPromiseDecorator(f.JOIN_COMMUNITY,t):this._resolvePromiseDecorator(f.JOIN_COMMUNITY)}function Io(e,t){"error"===e?this._rejectPromiseDecorator(f.CREATE_POST,t):this._resolvePromiseDecorator(f.CREATE_POST)}function To(e,t){"ok"===e?this._resolvePromiseDecorator(f.ADBLOCK_DETECT,"true"===t):this._rejectPromiseDecorator(f.ADBLOCK_DETECT)}const Lo=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cn(e,t)}(l,t);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mn(o);if(s){var r=Mn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===In(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bn(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Gn(Bn(e=c.call.apply(c,[this].concat(r))),fo),Gn(Bn(e),lo),Gn(Bn(e),co),Gn(Bn(e),uo),Gn(Bn(e),so),Gn(Bn(e),ao),Gn(Bn(e),io),Gn(Bn(e),oo),Gn(Bn(e),no),Gn(Bn(e),ro),Gn(Bn(e),to),Gn(Bn(e),eo),Gn(Bn(e),$n),Gn(Bn(e),Qn),Gn(Bn(e),Xn),Gn(Bn(e),qn),Fn(Bn(e),Jn,{get:ho,set:void 0}),Fn(Bn(e),Kn,{get:yo,set:void 0}),Fn(Bn(e),Zn,{get:po,set:void 0}),Un(Bn(e),"_hasValuableAccessPermission",!1),Un(Bn(e),"_hasValuableAccessPermissionShowed",!1),Un(Bn(e),"_platformBannerOptions",{}),e}return r=l,(n=[{key:"platformId",get:function(){return e.OK}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isCreatePostSupported",get:function(){return!0}},{key:"isRateSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),Xt("//api.ok.ru/js/fapi5.js").then((function(){Qt("FAPI").then((function(){e._platformSdk=window.FAPI,window.API_callback=function(t,r,n){return xn(e,Jn)[t](r,n)};var t=e._platformSdk.Util.getRequestParameters()||{};t.api_server&&t.apiconnection?e._platformSdk.init(t.api_server,t.apiconnection,(function(){var t,r=null===(t=e._platformSdk)||void 0===t?void 0:t.saved_state;e._isPlayerAuthorized=!r||r===Vn,e._isPlayerAuthorized?e._platformSdk.Client.call(xn(e,Zn).userProfile,xn(e,Kn).userProfileCallback):(e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE))}),(function(){e._rejectPromiseDecorator(f.INITIALIZE)})):e._rejectPromiseDecorator(f.INITIALIZE,v)}))}))),t.promise}},{key:"authorizePlayer",value:function(){if(this._isPlayerAuthorized)return Promise.resolve();var e=this._getPromiseDecorator(f.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(f.AUTHORIZE_PLAYER),this._platformSdk.UI.showLoginSuggestion(Vn)),e.promise}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||Nn(Mn(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL?this._hasValuableAccessPermission:Nn(Mn(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===u.PLATFORM_INTERNAL?this._hasValuableAccessPermission?new Promise((function(t,o){var i=Array.isArray(e)?e:[e],a={method:"storage.get",keys:i,scope:"CUSTOM"};n._platformSdk.Client.call(a,(function(n,a,s){if(a){var u=a.data||{};if(Array.isArray(e)){var c=[];return i.forEach((function(e){if(""!==u[e]&&void 0!==u[e]){var t=u[e];if(r)try{t=JSON.parse(u[e])}catch(e){}c.push(t)}else c.push(null)})),void t(c)}if(""===u[e]||void 0===u[e])return void t(null);var l=u[e];if(r)try{l=JSON.parse(u[e])}catch(e){}t(l)}else o(s)}))})):Promise.reject(y):Nn(Mn(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;if(r===u.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(y);for(var o=Array.isArray(e)?e:[e],i=Array.isArray(e)?t:[t],a=[],s=function(){var e=o[c],t=i[c];"string"!=typeof t&&(t=JSON.stringify(t));var r={method:"storage.set",key:e,value:t},s=new Promise((function(e,t){n._platformSdk.Client.call(r,(function(r,n){n?e():t()}))}));a.push(s)},c=0;c<o.length;c++)s();return Promise.all(a)}return Nn(Mn(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;if(t===u.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(y);for(var n=Array.isArray(e)?e:[e],o=[],i=function(){var e={method:"storage.set",key:n[a]},t=new Promise((function(t,n){r._platformSdk.Client.call(e,(function(e,r){r?t():n()}))}));o.push(t)},a=0;a<n.length;a++)i();return Promise.all(o)}return Nn(Mn(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){try{this._platformSdk.UI.showAd()}catch(e){this._setInterstitialState(i.FAILED)}}},{key:"showRewarded",value:function(){try{this._platformSdk.UI.loadAd()}catch(e){this._setRewardedState(a.FAILED)}}},{key:"showBanner",value:function(e){if(e){if("string"==typeof e.layoutType)return this._platformBannerOptions=Ln(Ln({},e),{},{layoutType:null}),void this._platformSdk.invokeUIMethod("setBannerFormat",e.layoutType);if("string"==typeof e.position)return void this._platformSdk.invokeUIMethod("requestBannerAds",e.position)}this._platformSdk.invokeUIMethod("requestBannerAds","bottom")}},{key:"hideBanner",value:function(){this._platformSdk.invokeUIMethod("hideBannerAds")}},{key:"checkAdBlock",value:function(){var e=this._getPromiseDecorator(f.ADBLOCK_DETECT);return e||(e=this._createPromiseDecorator(f.ADBLOCK_DETECT),this._platformSdk.invokeUIMethod("isAdBlockEnabled")),e.promise}},{key:"inviteFriends",value:function(e){var t=(e||{}).text;if(!e||"string"!=typeof t)return Promise.reject();var r=this._getPromiseDecorator(f.INVITE_FRIENDS);return r||(r=this._createPromiseDecorator(f.INVITE_FRIENDS),t.length>120?this._rejectPromiseDecorator(f.INVITE_FRIENDS,g):this._platformSdk.UI.showInvite(t)),r.promise}},{key:"rate",value:function(){var e=this._getPromiseDecorator(f.RATE);return e||(e=this._createPromiseDecorator(f.RATE),this._platformSdk.UI.showRatingDialog()),e.promise}},{key:"createPost",value:function(e){if(!e||null==e||!e.media)return Promise.reject();var t,r=this._getPromiseDecorator(f.CREATE_POST);return r||(r=this._createPromiseDecorator(f.CREATE_POST),this._platformSdk.UI.postMediatopic(e,null!==(t=e.status)&&void 0!==t&&t)),r.promise}},{key:"joinCommunity",value:function(e){if(!e||null==e||!e.groupId)return Promise.reject();var t,r=this._getPromiseDecorator(f.JOIN_COMMUNITY);return r||(r=this._createPromiseDecorator(f.JOIN_COMMUNITY),this._platformSdk.UI.joinGroup(e.groupId,null!==(t=e.enableMessages)&&void 0!==t&&t)),r.promise}}])&&jn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(qt);function jo(e){return jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jo(e)}function No(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Co(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?No(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Fo(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):No(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bo(){Bo=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="suspendedYield",y="executing",h="completed",m={};function v(){}function _(){}function g(){}var S={};c(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(T([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function A(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var u=f(e[o],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==jo(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,r,n){var o=p;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=k(s,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?h:d,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=h,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(jo(t)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=c(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(P),e},t.awrap=function(e){return{__await:e}},A(w.prototype),c(w.prototype,s,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},A(P),c(P,u,"Generator"),c(P,a,(function(){return this})),c(P,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),R(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Mo(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Go(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fo(n.key),n)}}function Fo(e){var t=function(e,t){if("object"!=jo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=jo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==jo(t)?t:String(t)}function Ho(){return Ho="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wo(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Ho.apply(this,arguments)}function Uo(e,t){return Uo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Uo(e,t)}function zo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wo(e){return Wo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wo(e)}function xo(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var Vo=new WeakSet;function Yo(){var e=this;return new Promise((function(t){e._platformSdk.userService.getUser().then((function(t){return e._playerId=t.id,e._isPlayerAuthorized=t.isAuthorized,e._playerName=t.name,e._playerPhotos=t.photos,e._defaultStorageType=e._isPlayerAuthorized?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE,e._isPlayerAuthorized?e.getDataFromPlatformStorage([]):Promise.resolve()})).finally((function(){t()}))}))}const Zo=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uo(e,t)}(y,t);var r,n,o,s,c,l,p=(c=y,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wo(c);if(l){var r=Wo(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===jo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zo(e)}(this,e)});function y(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=zo(e=p.call.apply(p,[this].concat(o))),r=Vo),r.add(t),e}return r=y,n=[{key:"platformId",get:function(){return e.PLAYGAMA}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),Xt("https://developer.playgama.com/sdk/v1.js").then((function(){Qt("PLAYGAMA_SDK").then((function(){e._platformSdk=window.PLAYGAMA_SDK,xo(e,Vo,Yo).call(e).then((function(){e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE)}))}))}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||Ho(Wo(y.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:Ho(Wo(y.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromPlatformStorage",value:(o=Bo().mark((function e(t){var r,n=arguments;return Bo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.length>1&&void 0!==n[1]&&n[1],this._platformStorageCachedData){e.next=5;break}return e.next=4,this.platformSdk.cloudSaveApi.getState();case 4:this._platformStorageCachedData=e.sent;case 5:return e.abrupt("return",tr(t,this._platformStorageCachedData,r));case 6:case"end":return e.stop()}}),e,this)})),s=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=o.apply(e,t);function a(e){Mo(i,r,n,a,s,"next",e)}function s(e){Mo(i,r,n,a,s,"throw",e)}a(void 0)}))},function(e){return s.apply(this,arguments)})},{key:"getDataFromStorage",value:function(e,t,r){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?this.getDataFromPlatformStorage(e,r):Promise.reject():Ho(Wo(y.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;switch(r){case u.PLATFORM_INTERNAL:return this._isPlayerAuthorized?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?Co({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n.platformSdk.cloudSaveApi.setItems(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(e){o(e)}))})):Promise.reject();case u.LOCAL_STORAGE:var o={};if(Array.isArray(e))for(var i=0;i<e.length;i++)o[e[i]]="string"!=typeof t[i]?JSON.stringify(t[i]):t[i];else o[e]="string"!=typeof t?JSON.stringify(t):t;return this._platformSdk.storageApi.setItems(o),Ho(Wo(y.prototype),"setDataToStorage",this).call(this,e,t,r);default:return Promise.reject(d)}}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;switch(t){case u.PLATFORM_INTERNAL:return new Promise((function(t,n){var o=null!==r._platformStorageCachedData?Co({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];r.platformSdk.cloudSaveApi.setItems(o).then((function(){r._platformStorageCachedData=o,t()})).catch((function(e){n(e)}))}));case u.LOCAL_STORAGE:return this._platformSdk.storageApi.deleteItems(Array.isArray(e)?e:[e]),Ho(Wo(y.prototype),"deleteDataFromStorage",this).call(this,e,t);default:return Promise.reject(d)}}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.advService.showInterstitial({onOpen:function(){e._setInterstitialState(i.OPENED)},onEmpty:function(){e._setInterstitialState(i.FAILED)},onClose:function(){e._setInterstitialState(i.CLOSED)},onError:function(){e._setInterstitialState(i.FAILED)}})}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.advService.showRewarded({onOpen:function(){e._setRewardedState(a.OPENED)},onRewarded:function(){e._setRewardedState(a.REWARDED)},onEmpty:function(){e._setRewardedState(a.FAILED)},onClose:function(){e._setRewardedState(a.CLOSED)},onError:function(){e._setRewardedState(a.FAILED)}})}},{key:"authorizePlayer",value:function(e){var t=this,r=this._getPromiseDecorator(f.AUTHORIZE_PLAYER);return r||(r=this._createPromiseDecorator(f.AUTHORIZE_PLAYER),this._isPlayerAuthorized?xo(this,Vo,Yo).call(this,e).then((function(){t._resolvePromiseDecorator(f.AUTHORIZE_PLAYER)})):this._platformSdk.userService.authorizeUser().then((function(){xo(t,Vo,Yo).call(t,e).then((function(){t._resolvePromiseDecorator(f.AUTHORIZE_PLAYER)}))})).catch((function(e){t._rejectPromiseDecorator(f.AUTHORIZE_PLAYER,e)}))),r.promise}}],n&&Go(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),y}(qt);function Ko(e){return Ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ko(e)}function Jo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ti(n.key),n)}}function qo(){return qo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$o(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},qo.apply(this,arguments)}function Xo(e,t){return Xo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xo(e,t)}function Qo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $o(e){return $o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$o(e)}function ei(e,t,r){return(t=ti(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ti(e){var t=function(e,t){if("object"!=Ko(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ko(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ko(t)?t:String(t)}function ri(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function ni(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,ii(e,t,"set"),r),r}function oi(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ii(e,t,"get"))}function ii(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var ai=new WeakMap,si=new WeakMap;const ui=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xo(e,t)}(p,t);var r,n,o,s,c=(o=p,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$o(o);if(s){var r=$o(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ko(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Qo(e)}(this,e)});function p(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ri(Qo(e=c.call.apply(c,[this].concat(r))),ai,{writable:!0,value:void 0}),ri(Qo(e),si,{writable:!0,value:void 0}),ei(Qo(e),"_defaultStorageType",u.PLATFORM_INTERNAL),ei(Qo(e),"_isPlayerAuthorized",!0),e}return r=p,(n=[{key:"platformId",get:function(){return e.PLAYDECK}},{key:"platformLanguage",get:function(){return oi(this,ai)?oi(this,ai):qo($o(p.prototype),"platformLanguage",this)}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isPaymentsAvailable",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),window.addEventListener("message",(function t(r){var n=r.data;if(n&&n.playdeck){var o=n.playdeck;if("getUserProfile"===o.method){var i=o.value;e._playerId=i.telegramId,e._playerPhotos=[i.avatar],e._playerName=i.username,ni(e,ai,i.locale),ni(e,si,i.params),window.removeEventListener("message",t),e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE)}}})),window.parent.postMessage({playdeck:{method:"getUserProfile"}},"*")),t.promise}},{key:"sendMessage",value:function(e){switch(e){case l.GAME_OVER:return window.parent.postMessage({playdeck:{method:"gameEnd"}},"*"),Promise.resolve();case l.GAME_READY:return window.parent.postMessage({playdeck:{method:"loading",value:100}},"*"),Promise.resolve();default:return qo($o(p.prototype),"sendMessage",this).call(this,e)}}},{key:"showInterstitial",value:function(){var e=this;window.addEventListener("message",(function t(r){var n=r.data,o=null==n?void 0:n.playdeck;if(o)switch(o.method){case"startAd":e._setInterstitialState(i.OPENED);break;case"rewardedAd":case"skipAd":e._setInterstitialState(i.CLOSED),window.removeEventListener("message",t);break;case"errAd":case"notFoundAd":e._setInterstitialState(i.FAILED),window.removeEventListener("message",t)}})),window.parent.postMessage({playdeck:{method:"showAd"}},"*")}},{key:"showRewarded",value:function(){var e=this;window.addEventListener("message",(function t(r){var n=r.data,o=null==n?void 0:n.playdeck;if(o)switch(o.method){case"startAd":e._setRewardedState(a.OPENED);break;case"rewardedAd":e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED),window.removeEventListener("message",t);break;case"skipAd":e._setRewardedState(a.CLOSED),window.removeEventListener("message",t);break;case"errAd":case"notFoundAd":e._setRewardedState(a.FAILED),window.removeEventListener("message",t)}})),window.parent.postMessage({playdeck:{method:"showAd"}},"*")}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||qo($o(p.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL||qo($o(p.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){return t===u.PLATFORM_INTERNAL?new Promise((function(t){var r={},n=Array.isArray(e)?e:[e];window.addEventListener("message",(function o(i){var a=i.data;if(a&&a.playdeck&&"getData"===a.playdeck.method&&n.includes(a.playdeck.key)){var s=a.playdeck;if("getData"===s.method&&(r[s.key]=s.value.data),Object.keys(r).length===n.length){window.removeEventListener("message",o);var u=Array.isArray(e)?e.map((function(e){return r[e]})):r[e];t(u)}}})),n.forEach((function(e){return window.parent.postMessage({playdeck:{method:"getData",key:e}},"*")}))})):qo($o(p.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){return r===u.PLATFORM_INTERNAL?new Promise((function(r){var n=Array.isArray(e)?e:[e],o=(Array.isArray(t)?t:[t]).map((function(e){return"string"!=typeof e?JSON.stringify(e):e}));n.forEach((function(e,t){return window.parent.postMessage({playdeck:{method:"setData",key:e,value:o[t]}},"*")})),r()})):qo($o(p.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){return t===u.PLATFORM_INTERNAL?new Promise((function(t){(Array.isArray(e)?e:[e]).forEach((function(e){return window.parent.postMessage({playdeck:{method:"setData",key:e,value:""}},"*")})),t()})):qo($o(p.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"share",value:function(){window.parent.postMessage({playdeck:{method:"customShare",value:oi(this,si)}},"*")}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._getPromiseDecorator(f.PURCHASE);return r||(r=this._createPromiseDecorator(f.PURCHASE),window.addEventListener("message",(function e(t){var r=t.data,n=null==r?void 0:r.playdeck;n&&"requestPayment"===n.method&&(window.parent.postMessage({playdeck:{method:"openTelegramLink",value:n.value.url}},"*"),window.removeEventListener("message",e))})),window.addEventListener("message",(function e(r){var n=r.data,o=null==n?void 0:n.playdeck;o&&"invoiceClosed"===o.method&&("paid"===o.value.status?(window.removeEventListener("message",e),t._resolvePromiseDecorator(f.PURCHASE,o.value)):"cancelled"!==o.value.status&&"failed"!==o.value.status||(window.removeEventListener("message",e),t._rejectPromiseDecorator(f.PURCHASE,o.value)))})),window.parent.postMessage({playdeck:{method:"requestPayment",value:e}},"*")),r.promise}}])&&Jo(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(qt);function ci(e){return ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ci(e)}function li(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?li(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=di(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):li(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,di(n.key),n)}}function di(e){var t=function(e,t){if("object"!=ci(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ci(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ci(t)?t:String(t)}function yi(){return yi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vi(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},yi.apply(this,arguments)}function hi(e,t){return hi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hi(e,t)}function mi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vi(e){return vi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vi(e)}function _i(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function gi(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Si(e,t,"get"))}function Si(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var bi=new WeakMap,Ei=new WeakSet;function Pi(){this._playerId=this._platformSdk.player.getId(),this._playerName=this._platformSdk.player.getName(),this._playerPhotos=[this._platformSdk.player.getPhoto()]}const Ai=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hi(e,t)}(d,t);var r,n,o,c,p=(o=d,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=vi(o);if(c){var r=vi(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ci(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return mi(e)}(this,e)});function d(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return _i(t=mi(e=p.call.apply(p,[this].concat(o))),r=Ei),r.add(t),function(e,t,r){_i(e,t),t.set(e,{writable:!0,value:void 0})}(mi(e),bi),e}return r=d,(n=[{key:"platformId",get:function(){return e.WORTAL}},{key:"platformLanguage",get:function(){if(this._platformSdk){var e=this._platformSdk.session.getLocale();if(e)return e.toLowerCase().slice(0,2)}return yi(vi(d.prototype),"platformLanguage",this)}},{key:"deviceType",get:function(){var e=this._platformSdk.session.getDevice();return e?e.toLowerCase():yi(vi(d.prototype),"deviceType",this)}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),Xt("https://storage.googleapis.com/cdn-wortal-ai/v2/wortal-core.js").then((function(){Qt("Wortal","initializeAsync").then((function(){window.Wortal.initializeAsync().then((function(){var t,r,n;e._platformSdk=window.Wortal,t=e,r=bi,n=e._platformSdk.getSupportedAPIs(),function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(t,Si(t,r,"set"),n),e._isBannerSupported=gi(e,bi).includes("ads.showBanner"),e._platformSdk.player.onLogin(function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}(e,Ei,Pi)),e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE)}))}))}))),t.promise}},{key:"sendMessage",value:function(e){switch(e){case l.GAMEPLAY_STARTED:return this._platformSdk.session.gameplayStart(),Promise.resolve();case l.GAMEPLAY_STOPPED:return this._platformSdk.session.gameplayStop(),Promise.resolve();case l.GAME_READY:return this._platformSdk.setLoadingProgress(100),this._platformSdk.startGameAsync(),Promise.resolve();case l.PLAYER_GOT_ACHIEVEMENT:return this._platformSdk.session.happyTime(),Promise.resolve();default:return yi(vi(d.prototype),"sendMessage",this).call(this,e)}}},{key:"showBanner",value:function(e){var t="bottom";e&&"string"==typeof e.position&&(t=e.position),this._platformSdk.ads.showBanner(!0,t),this._setBannerState(s.SHOWN)}},{key:"hideBanner",value:function(){this._platformSdk.ads.showBanner(!1),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(e){var t=this,r="next",n="NextLevel";e&&(e.placement&&(r=e.placement),e.description&&(n=e.description)),this._platformSdk.ads.showInterstitial(r,n,(function(){t._setInterstitialState(i.OPENED)}),(function(){t._setInterstitialState(i.CLOSED)}),(function(){t._setInterstitialState(i.FAILED)}))}},{key:"showRewarded",value:function(e){var t=this,r="Bonus";e&&e.description&&(r=e.description),this._platformSdk.ads.showRewarded(r,(function(){t._setRewardedState(a.OPENED)}),(function(){t._setRewardedState(a.CLOSED)}),(function(){t._setRewardedState(a.CLOSED)}),(function(){t._setRewardedState(a.REWARDED)}),(function(){t._setRewardedState(a.FAILED)}))}},{key:"checkAdBlock",value:function(){var e=this;return new Promise((function(t){t(e._platformSdk.ads.isAdBlocked())}))}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL?gi(this,bi).includes("player.setDataAsync"):yi(vi(d.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL?gi(this,bi).includes("player.setDataAsync"):yi(vi(d.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,r){var o=Array.isArray(e)?e:[e];n._platformSdk.player.getDataAsync(o).then((function(r){if(n._platformStorageCachedData||(n._platformStorageCachedData={}),Array.isArray(e)){for(var o=[],i=0;i<e.length;i++){var a=void 0===r[e[i]]?null:r[e[i]];o.push(a),n._platformStorageCachedData[e[i]]=a}t(o)}else{var s=void 0===r[e]?null:r[e];n._platformStorageCachedData[e]=s,t(s)}})).catch((function(e){return r(e)}))})):yi(vi(d.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?fi({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n._platformSdk.player.setDataAsync(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(e){return o(e)}))})):yi(vi(d.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,n){var o=null!==r._platformStorageCachedData?fi({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];r._platformSdk.player.setDataAsync(o).then((function(){r._platformStorageCachedData=o,t()})).catch((function(e){return n(e)}))})):yi(vi(d.prototype),"deleteDataFromStorage",this).call(this,e,t)}}])&&pi(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),d}(qt);function wi(e){return wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wi(e)}function Oi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ji(n.key),n)}}function ki(){return ki="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ii(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},ki.apply(this,arguments)}function Di(e,t){return Di=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Di(e,t)}function Ri(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ii(e){return Ii=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ii(e)}function Ti(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function Li(e,t,r){return(t=ji(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ji(e){var t=function(e,t){if("object"!=wi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=wi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==wi(t)?t:String(t)}function Ni(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Bi(e,t,"set"),r),r}function Ci(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Bi(e,t,"get"))}function Bi(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Mi=new WeakMap,Gi=new WeakMap,Fi=new WeakMap,Hi=new WeakMap;const Ui=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Di(e,t)}(d,t);var r,n,o,s,p=(o=d,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ii(o);if(s){var r=Ii(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===wi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ri(e)}(this,e)});function d(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Li(Ri(e=p.call.apply(p,[this].concat(r))),"_defaultStorageType",u.PLATFORM_INTERNAL),Li(Ri(e),"_isPlayerAuthorized",!0),Ti(Ri(e),Mi,{writable:!0,value:void 0}),Ti(Ri(e),Gi,{writable:!0,value:void 0}),Ti(Ri(e),Fi,{writable:!0,value:{onStart:function(){return e._setRewardedState(a.OPENED)},onSkip:function(){return e._setRewardedState(a.CLOSED)},onReward:function(){return e._setRewardedState(a.REWARDED)},onError:function(){return e._setRewardedState(a.FAILED)}}}),Ti(Ri(e),Hi,{writable:!0,value:{onStart:function(){return e._setInterstitialState(i.OPENED)},onSkip:function(){return e._setInterstitialState(i.CLOSED)},onError:function(){return e._setInterstitialState(i.FAILED)}}}),e}return r=d,(n=[{key:"platformId",get:function(){return e.TELEGRAM}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.initDataUnsafe.user.language_code:ki(Ii(d.prototype),"platformLanguage",this)}},{key:"deviceType",get:function(){switch(Ci(this,Mi)){case"android":case"android_x":case"ios":return c.MOBILE;case"tdesktop":case"unigram":case"macos":return c.DESKTOP;default:return ki(Ii(d.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),Xt("https://telegram.org/js/telegram-web-app.js").then((function(){e._platformSdk=window.Telegram.WebApp;var t=e._platformSdk.initDataUnsafe.user;e._playerId=t.id,e._playerName=[t.first_name,t.last_name].filter(Boolean).join(" "),e._playerPhotos=[t.photo_url],Ni(e,Mi,e._platformSdk.platform),e._isInitialized=!0,e._options&&e._options.adsgramBlockId?Xt("https://sad.adsgram.ai/js/sad.min.js").then((function(){Ni(e,Gi,window.Adsgram.init({blockId:e._options.adsgramBlockId}))})).finally((function(){e._resolvePromiseDecorator(f.INITIALIZE)})):e._resolvePromiseDecorator(f.INITIALIZE)}))),t.promise}},{key:"sendMessage",value:function(e){return e===l.GAME_READY?(this._platformSdk.ready(),Promise.resolve()):ki(Ii(d.prototype),"sendMessage",this).call(this,e)}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||ki(Ii(d.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL||ki(Ii(d.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,o){Array.isArray(e)?n._platformSdk.CloudStorage.getItems(e,(function(n,i){if(n)o(n);else{var a=[];e.forEach((function(e){var t=i[e];if(r&&"string"==typeof t)try{t=JSON.parse(t)}catch(e){}a.push(t)})),t(a)}})):n._platformSdk.CloudStorage.getItem(e,(function(e,n){e&&o(e);var i=n;if(r&&"string"==typeof i)try{i=JSON.parse(i)}catch(e){}t(i)}))})):ki(Ii(d.prototype),"getDataFromStorage",this).call(this,e,t)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r){var o=Array.isArray(e)?e:[e],i=(Array.isArray(t)?t:[t]).map((function(e){return"string"!=typeof e?JSON.stringify(e):e}));o.forEach((function(e,t){return n._platformSdk.CloudStorage.setItem(e,i[t])})),r()})):ki(Ii(d.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t){(Array.isArray(e)?e:[e]).forEach((function(e){return r._platformSdk.CloudStorage.removeItem(e)})),t()})):ki(Ii(d.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){var e=this;Ci(this,Gi)?(Ci(this,Gi).addEventListener("onStart",Ci(this,Hi).onStart),Ci(this,Gi).addEventListener("onSkip",Ci(this,Hi).onSkip),Ci(this,Gi).addEventListener("onError",Ci(this,Hi).onError),Ci(this,Gi).addEventListener("onBannerNotFound",Ci(this,Hi).onError),Ci(this,Gi).show().finally((function(){Ci(e,Gi).removeEventListener("onStart",Ci(e,Hi).onStart),Ci(e,Gi).removeEventListener("onSkip",Ci(e,Hi).onSkip),Ci(e,Gi).removeEventListener("onError",Ci(e,Hi).onError),Ci(e,Gi).removeEventListener("onBannerNotFound",Ci(e,Hi).onError)}))):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var e=this;Ci(this,Gi)?(Ci(this,Gi).addEventListener("onStart",Ci(this,Fi).onStart),Ci(this,Gi).addEventListener("onSkip",Ci(this,Fi).onSkip),Ci(this,Gi).addEventListener("onReward",Ci(this,Fi).onReward),Ci(this,Gi).addEventListener("onError",Ci(this,Fi).onError),Ci(this,Gi).addEventListener("onBannerNotFound",Ci(this,Fi).onError),Ci(this,Gi).show().finally((function(){Ci(e,Gi).addEventListener("onStart",Ci(e,Fi).onStart),Ci(e,Gi).addEventListener("onSkip",Ci(e,Fi).onSkip),Ci(e,Gi).addEventListener("onReward",Ci(e,Fi).onReward),Ci(e,Gi).addEventListener("onError",Ci(e,Fi).onError),Ci(e,Gi).addEventListener("onBannerNotFound",Ci(e,Fi).onError)}))):this._setRewardedState(a.FAILED)}},{key:"clipboardRead",value:function(){var e=this,t=this._getPromiseDecorator(f.CLIPBOARD_READ);return t||(t=this._createPromiseDecorator(f.CLIPBOARD_READ),this._platformSdk.readTextFromClipboard((function(t){t?e._resolvePromiseDecorator(f.CLIPBOARD_READ,t):e._rejectPromiseDecorator(f.CLIPBOARD_READ)}))),t.promise}}])&&Oi(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),d}(qt);var zi=["player"];function Wi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wi(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Zi(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vi(e){return Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vi(e)}function Yi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Zi(n.key),n)}}function Zi(e){var t=function(e,t){if("object"!=Vi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Vi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Vi(t)?t:String(t)}function Ki(){return Ki="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xi(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Ki.apply(this,arguments)}function Ji(e,t){return Ji=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ji(e,t)}function qi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xi(e){return Xi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xi(e)}function Qi(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function $i(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var ea="userData",ta="6129580795478709",ra=new WeakSet,na=new WeakSet;function oa(){var e=this;return new Promise((function(t,r){e._platformStorageCachedData?t(e._platformStorageCachedData):e._platformSdk.api("user_data/retrieve","POST",{key:ea},(function(n){n.error&&"Key not found"!==n.error&&r(n);var o={};try{n.jsondata&&(o=JSON.parse(n.jsondata))}catch(e){}e._platformStorageCachedData=o,t(o)}))}))}function ia(e){if("ok"===e.status){this._isPlayerAuthorized=!0,this._defaultStorageType=u.PLATFORM_INTERNAL;var t=e.authResponse.details,r=t.pid,n=t.locale,o=t.nickname,i=t.first_name,a=t.last_name,s=t.avatars;r&&(this._playerId=r),this._platformLanguage=n,this._playerName=[i,a].filter((function(e){return!!e})).join(" ")||o,this._playerPhotos=[];var c=s.thumb_url,l=s.medium_url,f=s.large_url;c&&this._playerPhotos.push(c),l&&this._playerPhotos.push(l),f&&this._playerPhotos.push(f)}}const aa=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ji(e,t)}(l,t);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Xi(o);if(s){var r=Xi(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Vi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qi(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Qi(qi(e=c.call.apply(c,[this].concat(r))),na),Qi(qi(e),ra),e}return r=l,(n=[{key:"platformId",get:function(){return e.Y8}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isLeaderboardSupported",get:function(){return!0}},{key:"isLeaderboardNativePopupSupported",get:function(){return!0}},{key:"isLeaderboardMultipleBoardsSupported",get:function(){return!0}},{key:"isLeaderboardSetScoreSupported",get:function(){return!0}},{key:"isLeaderboardGetScoreSupported",get:function(){return!0}},{key:"isLeaderboardGetEntriesSupported",get:function(){return!0}},{key:"isAchievementsSupported",get:function(){return!0}},{key:"isGetAchievementsListSupported",get:function(){return!0}},{key:"isAchievementsNativePopupSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t,r=this._getPromiseDecorator(f.INITIALIZE);return r||(r=this._createPromiseDecorator(f.INITIALIZE),null!==(t=this._options)&&void 0!==t&&t.gameId?Xt("https://cdn.y8.com/api/sdk.js").then((function(){Qt("ID").then((function(){e._platformSdk=window.ID,e._platformSdk.Event.subscribe("id.init",(function(){var t,r,n,o,i,a;(t={hostId:"ca-host-pub-".concat(ta),adsenseId:e._options.channelId?"ca-pub-".concat(ta):e._options.adsenseId,channelId:e._options.channelId},r=t.hostId,n=t.adsenseId,o=t.channelId,i=t.adFrequencyHint,a=void 0===i?"180s":i,new Promise((function(e){var t=document.createElement("script");t.setAttribute("data-ad-client",n),o?t.setAttribute("data-ad-channel",o):r&&t.setAttribute("data-ad-host",r),t.setAttribute("data-ad-frequency-hint",a),t.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",t.addEventListener("load",e),document.head.appendChild(t)}))).then((function(){e._showAd=function(e){window.adsbygoogle.push(e)},window.adsbygoogle.push({preloadAdBreaks:"on",sound:"on",onReady:function(){}})})),e._platformSdk.getLoginStatus((function(t){$i(e,na,ia).call(e,t),e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE)}))})),e._platformSdk.init({appId:e._options.gameId})}))})):this._rejectPromiseDecorator(f.INITIALIZE,m)),r.promise}},{key:"authorizePlayer",value:function(){var e=this;return this._isPlayerAuthorized?Promise.resolve():new Promise((function(t,r){e._platformSdk.login((function(n){$i(e,na,ia).call(e,n),"ok"===n.status?(e._platformStorageCachedData=null,t()):r()}))}))}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||Ki(Xi(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:Ki(Xi(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,o){$i(n,ra,oa).call(n).then((function(n){var o=(Array.isArray(e)?e:[e]).map((function(e){var t=n[e];return r||"object"!==Vi(t)||null===t?null!=t?t:null:JSON.stringify(t)}));t(o)})).catch(o)})):Ki(Xi(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){$i(n,ra,oa).call(n).then((function(i){var a=xi({},i);if(Array.isArray(e))for(var s=0;s<e.length;s++)a[e[s]]=t[s];else a[e]=t;n._platformSdk.api("user_data/submit","POST",{key:ea,value:JSON.stringify(a)},(function(e){"ok"===e.status?(n._platformStorageCachedData=a,r()):o(e)}))})).catch(o)})):Ki(Xi(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,n){$i(r,ra,oa).call(r).then((function(o){var i=xi({},o);if(Array.isArray(e))for(var a=0;a<e.length;a++)delete i[e[a]];else delete i[e];r._platformSdk.api("user_data/submit","POST",{key:ea,value:JSON.stringify(i)},(function(e){"ok"===e.status?(r._platformStorageCachedData=i,t()):n(e)}))})).catch(n)})):Ki(Xi(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){var e=this;this._showAd?this._showAd({type:"start",name:"start-game",beforeAd:function(){e._setInterstitialState(i.OPENED)},afterAd:function(){e.interstitialState!==i.FAILED&&e._setInterstitialState(i.CLOSED)},adBreakDone:function(t){"viewed"!==t.breakStatus&&e._setInterstitialState(i.FAILED)}}):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var e=this;this._showAd?this._showAd({type:"reward",name:"rewarded Ad",beforeAd:function(){e._setRewardedState(a.OPENED)},afterAd:function(){e.rewardedState!==a.FAILED&&e._setRewardedState(a.CLOSED)},beforeReward:function(e){e(0)},adDismissed:function(){e._setRewardedState(a.FAILED)},adViewed:function(){e._setRewardedState(a.REWARDED)},adBreakDone:function(t){"frequencyCapped"!==t.breakStatus&&"other"!==t.breakStatus||e._setRewardedState(a.FAILED)}}):this._setRewardedState(a.FAILED)}},{key:"showLeaderboardNativePopup",value:function(e){return this._isPlayerAuthorized?e&&e.table?(this._platformSdk.GameAPI.Leaderboards.list(e),Promise.resolve()):Promise.reject(new Error("`table` property is not provided")):Promise.reject()}},{key:"setLeaderboardScore",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!e||!e.points||!e.table)return Promise.reject(new Error("`table` or `points` property is not provided"));var r=this._getPromiseDecorator(f.SET_LEADERBOARD_SCORE);return r||(r=this._createPromiseDecorator(f.SET_LEADERBOARD_SCORE),this._platformSdk.GameAPI.Leaderboards.save(e,(function(e){var r=e.success,n=e.errormessage;r?t._resolvePromiseDecorator(f.SET_LEADERBOARD_SCORE):t._rejectPromiseDecorator(f.SET_LEADERBOARD_SCORE,n)}))),r.promise}},{key:"getLeaderboardScore",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!e||!e.table)return Promise.reject(new Error("`table` property is not provided"));var r=this._getPromiseDecorator(f.GET_LEADERBOARD_SCORE);return r||(r=this._createPromiseDecorator(f.GET_LEADERBOARD_SCORE),this._platformSdk.GameAPI.Leaderboards.listCustom(xi(xi({},e),{},{playerid:this.playerId}),(function(e){var r=e.scores,n=e.success,o=e.errormessage;n?t._resolvePromiseDecorator(f.GET_LEADERBOARD_SCORE,r[0]):t._rejectPromiseDecorator(f.GET_LEADERBOARD_SCORE,o)}))),r.promise}},{key:"getLeaderboardEntries",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!e||!e.table)return Promise.reject(new Error("`table` property is not provided"));var r=this._getPromiseDecorator(f.GET_LEADERBOARD_ENTRIES);return r||(r=this._createPromiseDecorator(f.GET_LEADERBOARD_ENTRIES),this._platformSdk.GameAPI.Leaderboards.listCustom(e,(function(e){var r=e.scores,n=e.success,o=e.errormessage;n?t._resolvePromiseDecorator(f.GET_LEADERBOARD_ENTRIES,r):t._rejectPromiseDecorator(f.GET_LEADERBOARD_ENTRIES,o)}))),r.promise}},{key:"unlockAchievement",value:function(e){var t=this;return this._isPlayerAuthorized&&e.achievement&&e.achievementkey?new Promise((function(r){t._platformSdk.GameAPI.Achievements.save(e,(function(e){r(e)}))})):Promise.reject()}},{key:"getAchievementsList",value:function(e){var t=this;return new Promise((function(r,n){t._platformSdk.GameAPI.Achievements.listCustom(e,(function(e){e.success?r(e.achievements.map((function(e){var t=e.player;return xi(xi({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,zi)),{},{playerid:t.playerid,playername:t.playername,lastupdated:t.lastupdated,date:t.date,rdate:t.rdate})}))):n(new Error(e.errorcode))}))}))}},{key:"showAchievementsNativePopup",value:function(e){return this._platformSdk.GameAPI.Achievements.list(e),Promise.resolve()}}])&&Yi(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(qt);function sa(e){return sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sa(e)}function ua(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ca(n.key),n)}}function ca(e){var t=function(e,t){if("object"!=sa(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=sa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==sa(t)?t:String(t)}function la(){return la="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pa(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},la.apply(this,arguments)}function fa(e,t){return fa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fa(e,t)}function pa(e){return pa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pa(e)}const da=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fa(e,t)}(l,t);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pa(o);if(s){var r=pa(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===sa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return r=l,(n=[{key:"platformId",get:function(){return e.LAGGED}},{key:"isLeaderboardSupported",get:function(){return!0}},{key:"isLeaderboardSetScoreSupported",get:function(){return!0}},{key:"isAchievementsSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),this._options&&this._options.devId&&this._options.publisherId?Xt("https://lagged.com/api/rev-share/lagged.js").then((function(){Qt("LaggedAPI").then((function(){e._platformSdk=window.LaggedAPI,e._platformSdk.init(e._options.devId,e._options.publisherId),e._platformSdk.User.get((function(t){var r,n=null!==(r=null==t?void 0:t.user)&&void 0!==r?r:{},o=n.id,i=n.name,a=n.avatar;o>0&&(e._playerId=o,e._playerName=i,e._playerPhotos.push(a),e._isPlayerAuthorized=!0),e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE)}))}))})):this._rejectPromiseDecorator(f.INITIALIZE,_)),t.promise}},{key:"isStorageSupported",value:function(e){return e!==u.PLATFORM_INTERNAL&&la(pa(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e!==u.PLATFORM_INTERNAL&&la(pa(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"showInterstitial",value:function(){var e=this;this._setInterstitialState(i.OPENED),this._platformSdk.APIAds.show((function(){e._setInterstitialState(i.CLOSED)}))}},{key:"showRewarded",value:function(){var e=this;this._setRewardedState(a.OPENED),this._platformSdk.GEvents.reward((function(t,r){t?r():e._setRewardedState(a.FAILED)}),(function(t){t?(e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)}))}},{key:"setLeaderboardScore",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(void 0===(null==e?void 0:e.score)||null==e||!e.boardId)return Promise.reject();var r=this._getPromiseDecorator(f.SET_LEADERBOARD_SCORE);if(!r){r=this._createPromiseDecorator(f.SET_LEADERBOARD_SCORE);var n={score:"string"==typeof e.score?parseInt(e.score,10):e.score,board:e.boardId};this._platformSdk.Scores.save(n,(function(e){e.success?t._resolvePromiseDecorator(f.SET_LEADERBOARD_SCORE):t._rejectPromiseDecorator(f.SET_LEADERBOARD_SCORE,e.errormsg)}))}return r.promise}},{key:"unlockAchievement",value:function(e){var t=this;return e.achievement?new Promise((function(r,n){t._platformSdk.Achievements.save(Array.isArray(e.achievement)?e.achievement:[e.achievement],(function(e){e.success?r(e):n(e.errormsg)}))})):Promise.reject()}}])&&ua(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(qt);function ya(e){return ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ya(e)}function ha(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ea(n.key),n)}}function ma(){return ma="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ga(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},ma.apply(this,arguments)}function va(e,t){return va=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},va(e,t)}function _a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ga(e){return ga=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ga(e)}function Sa(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function ba(e,t,r){return(t=Ea(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ea(e){var t=function(e,t){if("object"!=ya(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ya(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ya(t)?t:String(t)}function Pa(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var Aa=new WeakSet,wa=new WeakSet;function Oa(e){var t=this;if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this._preloadedInterstitialPromises[e])return this._preloadedInterstitialPromises[e];var r=null;return this._preloadedInterstitialPromises[e]=this._platformSdk.getInterstitialAdAsync(e).then((function(e){return r=e,e.loadAsync()})).then((function(){return r})).catch((function(){return t._preloadedInterstitialPromises[e]=null,Promise.reject()})),this._preloadedInterstitialPromises[e]}function ka(e){var t=this;if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this._preloadedRewardedPromises[e])return this._preloadedRewardedPromises[e];var r=null;return this._preloadedRewardedPromises[e]=this._platformSdk.getRewardedVideoAsync(e).then((function(e){return r=e,e.loadAsync()})).then((function(){return r})).catch((function(){return t._preloadedRewardedPromises[e]=null,Promise.reject()})),this._preloadedRewardedPromises[e]}const Da=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&va(e,t)}(y,t);var r,n,o,p,d=(o=y,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ga(o);if(p){var r=ga(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ya(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _a(e)}(this,e)});function y(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Sa(_a(e=d.call.apply(d,[this].concat(r))),wa),Sa(_a(e),Aa),ba(_a(e),"_contextId",null),ba(_a(e),"_bannerPlacementId",null),ba(_a(e),"_interstitialPlacements",[]),ba(_a(e),"_rewardedPlacements",[]),ba(_a(e),"_leaderboardId",null),ba(_a(e),"_isPlayerAuthorized",!0),ba(_a(e),"_supportedApis",[]),ba(_a(e),"_preloadedInterstitialPromises",{}),ba(_a(e),"_preloadedRewardedPromises",{}),e}return r=y,n=[{key:"platformId",get:function(){return e.FACEBOOK}},{key:"platformLanguage",get:function(){return this._platformLanguage}},{key:"deviceType",get:function(){switch(this._platformSdk&&this._platformSdk.getPlatform()){case"IOS":case"MOBILE_WEB":case"ANDROID":return c.MOBILE;case"WEB":return c.DESKTOP;default:return ma(ga(y.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPlayerAuthorized",get:function(){return this._isPlayerAuthorized}},{key:"isBannerSupported",get:function(){return!0}},{key:"isLeaderboardSupported",get:function(){return this._supportedApis.includes("getLeaderboardAsync")}},{key:"isLeaderboardMultipleBoardsSupported",get:function(){return this._supportedApis.includes("getLeaderboardAsync")}},{key:"isLeaderboardSetScoreSupported",get:function(){return this._supportedApis.includes("getLeaderboardAsync")}},{key:"isLeaderboardGetScoreSupported",get:function(){return this._supportedApis.includes("getLeaderboardAsync")}},{key:"isLeaderboardGetEntriesSupported",get:function(){return this._supportedApis.includes("getLeaderboardAsync")}},{key:"isPaymentsSupported",get:function(){return this._supportedApis.includes("payments.purchaseAsync")}},{key:"isPaymentsAvailable",get:function(){return this._supportedApis.includes("payments.purchaseAsync")}},{key:"isPaymentsGetCatalogSupported",get:function(){return this._supportedApis.includes("payments.getCatalogAsync")}},{key:"isPaymentsGetPurchasesSupported",get:function(){return this._supportedApis.includes("payments.getPurchasesAsync")}},{key:"isPaymentsConsumePurchaseSupported",get:function(){return this._supportedApis.includes("payments.consumePurchaseAsync")}},{key:"isInviteFriendsSupported",get:function(){return this._supportedApis.includes("inviteAsync")}},{key:"isShareSupported",get:function(){return this._supportedApis.includes("shareAsync")}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),Xt("https://connect.facebook.net/en_US/fbinstant.7.1.js").then((function(){return Qt("FBInstant")})).then((function(){return e._platformSdk=window.FBInstant,e._platformSdk.initializeAsync()})).then((function(){e._bannerPlacementId=e._options.bannerPlacementId||null,e._interstitialPlacements=e._options.interstitialPlacements||[],e._rewardedPlacements=e._options.rewardedPlacements||[],e._playerId=e._platformSdk.player.getID(),e._playerName=e._platformSdk.player.getName(),e._playerPhotos.push(e._platformSdk.player.getPhoto()),e._contextId=e._platformSdk.context.getID(),e._platformLanguage=e._platformSdk.getLocale(),e._supportedApis=e._platformSdk.getSupportedAPIs(),e._isInitialized=!0;for(var t=0;t<e._interstitialPlacements.length;t++){var r=e._interstitialPlacements[t];Pa(e,Aa,Oa).call(e,r.id)}for(var n=0;n<e._rewardedPlacements.length;n++){var o=e._rewardedPlacements[n];Pa(e,wa,ka).call(e,o.id)}e._resolvePromiseDecorator(f.INITIALIZE)})).catch((function(t){return e._resolvePromiseDecorator(f.INITIALIZE,t)}))),t.promise}},{key:"sendMessage",value:function(e){var t=this;return e===l.GAME_READY?(this._platformSdk.setLoadingProgress(100),new Promise((function(e){t._platformSdk.startGameAsync().then(e)}))):ma(ga(y.prototype),"sendMessage",this).call(this,e)}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL?this._supportedApis.includes("getDataAsync"):ma(ga(y.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:ma(ga(y.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,o){var i=Array.isArray(e)?e:[e];n._platformSdk.player.getDataAsync(i).then((function(e){var n=i.map((function(t){var n=e[t];return r||"object"!==ya(n)||null===n?null!=n?n:null:JSON.stringify(n)}));t(n)})).catch(o)})):ma(ga(y.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){var i={};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n._platformSdk.player.setDataAsync(i).then(r).catch(o)})):ma(ga(y.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,n){var o={};if(Array.isArray(e))for(var i=0;i<e.length;i++)o[e[i]]=null;else o[e]=null;r._platformSdk.player.setDataAsync(o).then(t).catch(n)})):ma(ga(y.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(e){var t=this;this._platformSdk.loadBannerAdAsync(this._bannerPlacementId,e).then((function(){t._setBannerState(s.SHOWN)})).catch((function(){t._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.hideBannerAdAsync().then((function(){e._setBannerState(s.HIDDEN)})).catch((function(){e._setBannerState(s.FAILED)}))}},{key:"showInterstitial",value:function(e){var t=this;Pa(this,Aa,Oa).call(this,e).then((function(e){return t._setInterstitialState(i.OPENED),e.showAsync()})).then((function(){t._setInterstitialState(i.CLOSED)})).catch((function(){t._setInterstitialState(i.FAILED)})).finally((function(){Pa(t,Aa,Oa).call(t,e,!0)}))}},{key:"showRewarded",value:function(e){var t=this;Pa(this,wa,ka).call(this,e).then((function(e){return t._setRewardedState(a.OPENED),e.showAsync()})).then((function(){t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)})).catch((function(){t._setRewardedState(a.FAILED)})).finally((function(){Pa(t,wa,ka).call(t,e,!0)}))}},{key:"setLeaderboardScore",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!e||!e.score||!e.leaderboardName)return Promise.reject();var r=this._getPromiseDecorator(f.SET_LEADERBOARD_SCORE);return r||(r=this._createPromiseDecorator(f.SET_LEADERBOARD_SCORE),this._platformSdk.getLeaderboardAsync(e.leaderboardName).then((function(t){return t.setScoreAsync(e.score,e.extraData?JSON.stringify(e.extraData):null)})).then((function(){t._resolvePromiseDecorator(f.SET_LEADERBOARD_SCORE)})).catch((function(e){t._rejectPromiseDecorator(f.SET_LEADERBOARD_SCORE,e)}))),r.promise}},{key:"getLeaderboardScore",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!e||!e.leaderboardName)return Promise.reject();var r=this._getPromiseDecorator(f.GET_LEADERBOARD_SCORE);return r||(r=this._createPromiseDecorator(f.GET_LEADERBOARD_SCORE),this._platformSdk.getLeaderboardAsync(e.leaderboardName).then((function(e){return e.getPlayerEntryAsync()})).then((function(e){t._resolvePromiseDecorator(f.GET_LEADERBOARD_SCORE,e.getScore())})).catch((function(e){t._rejectPromiseDecorator(f.GET_LEADERBOARD_SCORE,e)}))),r.promise}},{key:"getLeaderboardEntries",value:function(e){var t=this;if(!e||!e.leaderboardName)return Promise.reject();var r=this._getPromiseDecorator(f.GET_LEADERBOARD_ENTRIES);if(!r){var n,o;r=this._createPromiseDecorator(f.GET_LEADERBOARD_ENTRIES);var i=[null!==(n=e.count)&&void 0!==n?n:5,null!==(o=e.offset)&&void 0!==o?o:0];this._platformSdk.getLeaderboardAsync(e.leaderboardName).then((function(e){return e.getConnectedPlayerEntriesAsync.apply(e,i)})).then((function(e){var r=null;e&&e.entries.length>0&&(r=e.entries.map((function(e){return{rank:e.rank,score:e.score,format_score:e.format_score,ts:e.ts,extra_data:e.extra_data,playerId:e.player.player_id,playerName:e.player.name,playerPhoto:e.player.photo}}))),t._resolvePromiseDecorator(f.GET_LEADERBOARD_ENTRIES,r)})).catch((function(e){t._rejectPromiseDecorator(f.GET_LEADERBOARD_ENTRIES,e)}))}return r.promise}},{key:"paymentsPurchase",value:function(e){var t=this;if(!e.productID)return Promise.reject();var r=this._getPromiseDecorator(f.PURCHASE);return r||(r=this._createPromiseDecorator(f.PURCHASE),this._platformSdk.payments.purchaseAsync({productID:e.productID,developerPayload:e.developerPayload?JSON.stringify(e.developerPayload):void 0}).then((function(e){t._resolvePromiseDecorator(f.PURCHASE,e)})).catch((function(e){t._rejectPromiseDecorator(f.PURCHASE,e)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(f.GET_PURCHASES);return t||(t=this._createPromiseDecorator(f.GET_PURCHASES),this._platformSdk.payments.getPurchasesAsync().then((function(t){e._resolvePromiseDecorator(f.GET_PURCHASES,t)})).catch((function(t){e._rejectPromiseDecorator(f.GET_PURCHASES,t)}))),t.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,t=this._getPromiseDecorator(f.GET_CATALOG);return t||(t=this._createPromiseDecorator(f.GET_CATALOG),this._platformSdk.payments.getCatalogAsync().then((function(t){e._resolvePromiseDecorator(f.GET_CATALOG,t)})).catch((function(t){e._rejectPromiseDecorator(f.GET_CATALOG,t)}))),t.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this;if(!e.purchaseToken)return Promise.reject();var r=this._getPromiseDecorator(f.CONSUME_PURCHASE);return r||(r=this._createPromiseDecorator(f.CONSUME_PURCHASE),this._platformSdk.payments.consumePurchaseAsync(e.purchaseToken).then((function(){t._resolvePromiseDecorator(f.CONSUME_PURCHASE)})).catch((function(e){t._rejectPromiseDecorator(f.CONSUME_PURCHASE,e)}))),r.promise}},{key:"inviteFriends",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.image||!t.text)return Promise.reject();if(!$t(t.image))return Promise.reject(new Error("Image is not base64"));var r=this._getPromiseDecorator(f.INVITE_FRIENDS);return r||(r=this._createPromiseDecorator(f.INVITE_FRIENDS),this._platformSdk.inviteAsync(t).then((function(){e._resolvePromiseDecorator(f.INVITE_FRIENDS)})).catch((function(t){e._rejectPromiseDecorator(f.INVITE_FRIENDS,t)}))),r.promise}},{key:"share",value:function(e){var t=this;if(!e.image||!e.text)return Promise.reject();if(!$t(e.image))return Promise.reject(new Error("Image is not base64"));var r=this._getPromiseDecorator(f.SHARE);return r||(r=this._createPromiseDecorator(f.SHARE),this._platformSdk.shareAsync(e).then((function(){t._resolvePromiseDecorator(f.SHARE)})).catch((function(e){t._rejectPromiseDecorator(f.SHARE,e)}))),r.promise}}],n&&ha(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),y}(qt);function Ra(e){return Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ra(e)}function Ia(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ta(n.key),n)}}function Ta(e){var t=function(e,t){if("object"!=Ra(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ra(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ra(t)?t:String(t)}var La,ja=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";window.parent&&window.parent.postMessage(e,t)}},{key:"addListener",value:function(e){window.addEventListener("message",e)}},{key:"removeListener",value:function(e){window.removeEventListener("message",e)}},{key:"generateMessageId",value:function(){return"".concat(Date.now(),"-").concat(Math.random())}}],r&&Ia(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Na(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ca(e){return Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ca(e)}function Ba(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Wa(n.key),n)}}function Ma(e,t){return Ma=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ma(e,t)}function Ga(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fa(e,t){Va(e,t),t.add(e)}function Ha(){return Ha="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ua(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Ha.apply(this,arguments)}function Ua(e){return Ua=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ua(e)}function za(e,t,r){return(t=Wa(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wa(e){var t=function(e,t){if("object"!=Ca(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ca(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ca(t)?t:String(t)}function xa(e,t,r){Va(e,t),t.set(e,r)}function Va(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ya(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}function Za(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var Ka="banner",Ja="get_data_from_storage",qa="get_server_time",Xa="clipboard_read",Qa="unlock_achievement",$a="get_achievements",es="get_performance_resources",ts="isPaymentsSupported",rs="isStorageInternalSupported",ns="isStorageLocalSupported",os=new WeakMap,is=new WeakMap,as=new WeakSet,ss=new WeakSet,us=function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ma(e,t)}(y,r);var n,o,c,p,d=(c=y,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ua(c);if(p){var r=Ua(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ca(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ga(e)}(this,e)});function y(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Fa(Ga(e=d.call.apply(d,[this].concat(r))),ss),Fa(Ga(e),as),xa(Ga(e),os,{get:cs,set:void 0}),xa(Ga(e),is,{writable:!0,value:new ja}),za(Ga(e),"_supportedFeatures",[]),e}return n=y,o=[{key:"platformId",get:function(){return e.QA_TOOL}},{key:"platformLanguage",get:function(){return this._platformLanguage}},{key:"platformTld",get:function(){return this._platformTld}},{key:"deviceType",get:function(){return this._deviceType}},{key:"platformPayload",get:function(){return this._platformPayload}},{key:"isPlayerAuthorizationSupported",get:function(){return this._supportedFeatures.includes("isPlayerAuthorizationSupported")}},{key:"isPaymentsSupported",get:function(){return this._supportedFeatures.includes(ts)}},{key:"isPaymentsAvailable",get:function(){return this._supportedFeatures.includes(ts)}},{key:"isPaymentsGetCatalogSupported",get:function(){return this._supportedFeatures.includes("isGetCatalogSupported")}},{key:"isPaymentsGetPurchasesSupported",get:function(){return this._supportedFeatures.includes("isGetPurchasesSupported")}},{key:"isPaymentsConsumePurchaseSupported",get:function(){return this._supportedFeatures.includes("isConsumePurchaseSupported")}},{key:"isRemoteConfigSupported",get:function(){return this._supportedFeatures.includes("isRemoteConfigSupported")}},{key:"isInviteFriendsSupported",get:function(){return this._supportedFeatures.includes("isInviteFriendsSupported")}},{key:"isJoinCommunitySupported",get:function(){return this._supportedFeatures.includes("isJoinCommunitySupported")}},{key:"isShareSupported",get:function(){return this._supportedFeatures.includes("isShareSupported")}},{key:"isCreatePostSupported",get:function(){return this._supportedFeatures.includes("isCreatePostSupported")}},{key:"isAddToHomeScreenSupported",get:function(){return this._supportedFeatures.includes("isAddToHomeScreenSupported")}},{key:"isAddToFavoritesSupported",get:function(){return this._supportedFeatures.includes("isAddToFavoritesSupported")}},{key:"isRateSupported",get:function(){return this._supportedFeatures.includes("isRateSupported")}},{key:"isLeaderboardSupported",get:function(){return this._supportedFeatures.includes("isLeaderboardSupported")}},{key:"isLeaderboardMultipleBoardsSupported",get:function(){return this._supportedFeatures.includes("isLeaderboardMultipleBoardsSupported")}},{key:"isLeaderboardSetScoreSupported",get:function(){return this._supportedFeatures.includes("isLeaderboardSetScoreSupported")}},{key:"isLeaderboardGetScoreSupported",get:function(){return this._supportedFeatures.includes("isLeaderboardGetScoreSupported")}},{key:"isLeaderboardGetEntriesSupported",get:function(){return this._supportedFeatures.includes("isLeaderboardGetEntriesSupported")}},{key:"isLeaderboardNativePopupSupported",get:function(){return this._supportedFeatures.includes("isLeaderboardNativePopupSupported")}},{key:"isClipboardSupported",get:function(){return this._supportedFeatures.includes("isClipboardSupported")}},{key:"isAchievementsSupported",get:function(){return this._supportedFeatures.includes("isAchievementsSupported")}},{key:"isGetAchievementsListSupported",get:function(){return this._supportedFeatures.includes("isGetAchievementsListSupported")}},{key:"isAchievementsNativePopupSupported",get:function(){return this._supportedFeatures.includes("isAchievementsNativePopupSupported")}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var r=this._getPromiseDecorator(f.INITIALIZE);return r||(r=this._createPromiseDecorator(f.INITIALIZE),this._defaultStorageType=u.PLATFORM_INTERNAL,Ya(this,is).addListener((function(r){var n=r.data;if(null!=n&&n.type&&n.type===t.PLATFORM&&(n.action===f.INITIALIZE&&Za(e,as,ls).call(e,n),n.action===es)){var o,i=Ya(e,is).generateMessageId(),a=(null==n||null===(o=n.options)||void 0===o?void 0:o.resources)||[];Za(e,ss,fs).call(e,i,a)}})),Ya(this,is).send({type:t.PLATFORM,action:f.INITIALIZE})),r.promise}},{key:"authorizePlayer",value:function(){var e=this,r=this._getPromiseDecorator(f.AUTHORIZE_PLAYER);if(!r){r=this._createPromiseDecorator(f.AUTHORIZE_PLAYER);var n=Ya(this,is).generateMessageId();Ya(this,is).addListener((function r(o){var i=o.data;if((null==i?void 0:i.type)===t.PLAYER&&i.action===f.AUTHORIZE_PLAYER&&i.id===n){var a=i.player;e._isPlayerAuthorized=!0,e._playerId=a.userId,e._playerName=a.name,a.profilePictureUrl&&(e._playerPhotos=[a.profilePictureUrl]),e._resolvePromiseDecorator(f.AUTHORIZE_PLAYER),Ya(e,is).removeListener(r)}})),Ya(this,is).send({type:t.PLAYER,action:f.AUTHORIZE_PLAYER,id:n})}return r.promise}},{key:"sendMessage",value:function(e){return[l.GAME_READY,l.IN_GAME_LOADING_STARTED,l.IN_GAME_LOADING_STOPPED,l.GAMEPLAY_STARTED,l.GAMEPLAY_STOPPED,l.PLAYER_GOT_ACHIEVEMENT,l.GAME_OVER].includes(e)?(Ya(this,is).send({type:t.PLATFORM,action:e}),Promise.resolve()):Ha(Ua(y.prototype),"sendMessage",this).call(this,e)}},{key:"getServerTime",value:function(){var e=this;return new Promise((function(r,n){var o,i=Ya(e,is).generateMessageId(),a=function a(s){var u=s.data;if((null==u?void 0:u.type)===t.PLATFORM&&u.action===qa&&u.id===i){if(!u.time)return void n(new Error("Invalid server time"));clearTimeout(o),r(u.time),Ya(e,is).removeListener(a)}};Ya(e,is).addListener(a),Ya(e,is).send({type:t.PLATFORM,action:qa,id:i}),o=setTimeout((function(){n(new Error("Server time request timeout")),Ya(e,is).removeListener(a)}),5e3)}))}},{key:"isStorageSupported",value:function(e){return Ya(this,is).send({type:t.STORAGE,action:"is_storage_supported",options:{storageType:e}}),!(e!==u.PLATFORM_INTERNAL||!this._supportedFeatures.includes(rs))||!(e!==u.LOCAL_STORAGE||!this._supportedFeatures.includes(ns))}},{key:"isStorageAvailable",value:function(e){return Ya(this,is).send({type:t.STORAGE,action:"is_storage_available",options:{storageType:e}}),!(e!==u.PLATFORM_INTERNAL||!this._supportedFeatures.includes(rs))||!(e!==u.LOCAL_STORAGE||!this._supportedFeatures.includes(ns))}},{key:"getDataFromStorage",value:function(e,r,n){var o=this;if(r===u.PLATFORM_INTERNAL||r===u.LOCAL_STORAGE&&Ya(this,os)){var i=Ya(this,is).generateMessageId();return new Promise((function(a){Ya(o,is).addListener((function e(r){var n=r.data;if((null==n?void 0:n.type)===t.STORAGE&&n.action===Ja&&n.id===i){var s=Object.values(n.storage);a(s),Ya(o,is).removeListener(e)}})),Ya(o,is).send({type:t.STORAGE,action:Ja,id:i,options:{key:e,storageType:r,tryParseJson:n}})}))}return Ya(this,is).send({type:t.STORAGE,action:Ja,options:{key:e,storageType:r,tryParseJson:n}}),Ha(Ua(y.prototype),"getDataFromStorage",this).call(this,e,r,n)}},{key:"setDataToStorage",value:function(e,r,n){return Ya(this,is).send({type:t.STORAGE,action:"set_data_to_storage",options:{key:e,value:r,storageType:n}}),n===u.PLATFORM_INTERNAL||n===u.LOCAL_STORAGE&&Ya(this,os)?Promise.resolve():Ha(Ua(y.prototype),"setDataToStorage",this).call(this,e,r,n)}},{key:"deleteDataFromStorage",value:function(e,r){return Ya(this,is).send({type:t.STORAGE,action:"delete_data_from_storage",options:{key:e,storageType:r}}),r===u.PLATFORM_INTERNAL||r===u.LOCAL_STORAGE&&Ya(this,os)?Promise.resolve():Ha(Ua(y.prototype),"deleteDataFromStorage",this).call(this,e,r)}},{key:"showInterstitial",value:function(){var e=this;Ya(this,is).addListener((function r(n){var o=n.data;if((null==o?void 0:o.type)===t.ADVERTISEMENT)switch(o.payload.status){case"start":e._setInterstitialState(i.LOADING);break;case"open":e._setInterstitialState(i.OPENED);break;case"failed":e._setInterstitialState(i.FAILED);break;case"close":e._setInterstitialState(i.CLOSED),Ya(e,is).removeListener(r)}})),Ya(this,is).send({type:t.ADVERTISEMENT,action:"interstitial"})}},{key:"showRewarded",value:function(){var e=this;Ya(this,is).addListener((function r(n){var o=n.data;if((null==o?void 0:o.type)===t.ADVERTISEMENT)switch(o.payload.status){case"start":e._setRewardedState(a.LOADING);break;case"open":e._setRewardedState(a.OPENED);break;case"failed":e._setRewardedState(a.FAILED);break;case"rewarded":e._setRewardedState(a.REWARDED);break;case"close":e._setRewardedState(a.CLOSED),Ya(e,is).removeListener(r)}})),Ya(this,is).send({type:t.ADVERTISEMENT,action:"reward"})}},{key:"showBanner",value:function(){this._setBannerState(s.SHOWN),Ya(this,is).send({type:t.ADVERTISEMENT,action:s.SHOWN,options:{type:Ka}})}},{key:"hideBanner",value:function(){this._setBannerState(s.HIDDEN),Ya(this,is).send({type:t.ADVERTISEMENT,action:s.HIDDEN,options:{type:Ka}})}},{key:"checkAdBlock",value:function(){return Ya(this,is).send({type:"check_adblock",action:f.ADBLOCK_DETECT}),Ha(Ua(y.prototype),"checkAdBlock",this).call(this)}},{key:"inviteFriends",value:function(){var e=this._getPromiseDecorator(f.INVITE_FRIENDS);return e||(e=this._createPromiseDecorator(f.INVITE_FRIENDS),this._resolvePromiseDecorator(f.INVITE_FRIENDS),Ya(this,is).send({type:t.SOCIAL,action:f.INVITE_FRIENDS})),e.promise}},{key:"joinCommunity",value:function(){var e=this._getPromiseDecorator(f.JOIN_COMMUNITY);return e||(e=this._createPromiseDecorator(f.JOIN_COMMUNITY),this._resolvePromiseDecorator(f.JOIN_COMMUNITY),Ya(this,is).send({type:t.SOCIAL,action:f.JOIN_COMMUNITY})),e.promise}},{key:"share",value:function(){var e=this._getPromiseDecorator(f.SHARE);return e||(e=this._createPromiseDecorator(f.SHARE),this._resolvePromiseDecorator(f.SHARE),Ya(this,is).send({type:t.SOCIAL,action:f.SHARE})),e.promise}},{key:"createPost",value:function(){var e=this._getPromiseDecorator(f.CREATE_POST);return e||(e=this._createPromiseDecorator(f.CREATE_POST),this._resolvePromiseDecorator(f.CREATE_POST),Ya(this,is).send({type:t.SOCIAL,action:f.CREATE_POST})),e.promise}},{key:"addToHomeScreen",value:function(){var e=this._getPromiseDecorator(f.ADD_TO_HOME_SCREEN);return e||(e=this._createPromiseDecorator(f.ADD_TO_HOME_SCREEN),this._resolvePromiseDecorator(f.ADD_TO_HOME_SCREEN),Ya(this,is).send({type:t.SOCIAL,action:f.ADD_TO_HOME_SCREEN})),e.promise}},{key:"addToFavorites",value:function(){var e=this._getPromiseDecorator(f.ADD_TO_FAVORITES);return e||(e=this._createPromiseDecorator(f.ADD_TO_FAVORITES),this._resolvePromiseDecorator(f.ADD_TO_FAVORITES),Ya(this,is).send({type:t.SOCIAL,action:f.ADD_TO_FAVORITES})),e.promise}},{key:"rate",value:function(){var e=this._getPromiseDecorator(f.RATE);return e||(e=this._createPromiseDecorator(f.RATE),this._resolvePromiseDecorator(f.RATE),Ya(this,is).send({type:t.SOCIAL,action:f.RATE})),e.promise}},{key:"paymentsPurchase",value:function(){var e=this,r=this._getPromiseDecorator(f.PURCHASE);if(!r){r=this._createPromiseDecorator(f.PURCHASE);var n=Ya(this,is).generateMessageId();Ya(this,is).addListener((function r(o){var i=o.data;if((null==i?void 0:i.type)===t.PAYMENTS&&i.action===f.PURCHASE&&i.id===n){if(!i.purchase||"object"!==Ca(i.purchase))return void e._rejectPromiseDecorator(f.PURCHASE,new Error("Invalid purchase"));e._resolvePromiseDecorator(f.PURCHASE,i.purchase),Ya(e,is).removeListener(r)}})),Ya(this,is).send({type:t.PAYMENTS,action:f.PURCHASE,id:n})}return r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,r=this._getPromiseDecorator(f.GET_PURCHASES);if(!r){r=this._createPromiseDecorator(f.GET_PURCHASES);var n=Ya(this,is).generateMessageId();Ya(this,is).addListener((function r(o){var i=o.data;(null==i?void 0:i.type)===t.PAYMENTS&&i.action===f.GET_PURCHASES&&i.id===n&&(e._resolvePromiseDecorator(f.GET_PURCHASES,i.purchases),Ya(e,is).removeListener(r))})),Ya(this,is).send({type:t.PAYMENTS,action:f.GET_PURCHASES,id:n})}return r.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,r=this._getPromiseDecorator(f.GET_CATALOG);if(!r){r=this._createPromiseDecorator(f.GET_CATALOG);var n=Ya(this,is).generateMessageId();Ya(this,is).addListener((function r(o){var i=o.data;(null==i?void 0:i.type)===t.PAYMENTS&&i.action===f.GET_CATALOG&&i.id===n&&(e._resolvePromiseDecorator(f.GET_CATALOG,i.catalog),Ya(e,is).removeListener(r))})),Ya(this,is).send({type:t.PAYMENTS,action:f.GET_CATALOG,id:n})}return r.promise}},{key:"paymentsConsumePurchase",value:function(){var e=this,r=this._getPromiseDecorator(f.CONSUME_PURCHASE);if(!r){r=this._createPromiseDecorator(f.CONSUME_PURCHASE);var n=Ya(this,is).generateMessageId();Ya(this,is).addListener((function r(o){var i=o.data;(null==i?void 0:i.type)===t.PAYMENTS&&i.action===f.CONSUME_PURCHASE&&i.id===n&&(e._resolvePromiseDecorator(f.CONSUME_PURCHASE,i.result),Ya(e,is).removeListener(r))})),Ya(this,is).send({type:t.PAYMENTS,action:f.CONSUME_PURCHASE,id:n})}return r.promise}},{key:"getRemoteConfig",value:function(){var e=this,r=this._getPromiseDecorator(f.GET_REMOTE_CONFIG);if(!r){r=this._createPromiseDecorator(f.GET_REMOTE_CONFIG);var n=Ya(this,is).generateMessageId();Ya(this,is).addListener((function r(o){var i=o.data;(null==i?void 0:i.type)===t.REMOTE_CONFIG&&i.action===f.GET_REMOTE_CONFIG&&i.id===n&&(e._resolvePromiseDecorator(f.GET_REMOTE_CONFIG,i.result),Ya(e,is).removeListener(r))})),Ya(this,is).send({type:t.REMOTE_CONFIG,action:f.GET_REMOTE_CONFIG,id:n})}return r.promise}},{key:"clipboardWrite",value:function(e){var r=this,n=this._getPromiseDecorator(f.CLIPBOARD_WRITE);if(!n){n=this._createPromiseDecorator(f.CLIPBOARD_WRITE);var o=Ya(this,is).generateMessageId();Ya(this,is).addListener((function e(n){var i=n.data;(null==i?void 0:i.type)===t.CLIPBOARD&&i.action===f.CLIPBOARD_WRITE&&i.id===o&&(r._resolvePromiseDecorator(f.CLIPBOARD_WRITE,!0),Ya(r,is).removeListener(e))})),Ya(this,is).send({type:t.CLIPBOARD,action:f.CLIPBOARD_WRITE,id:o,options:{text:e}})}return n.promise}},{key:"clipboardRead",value:function(){var e=this,r=this._getPromiseDecorator(Xa);if(!r){r=this._createPromiseDecorator(Xa);var n=Ya(this,is).generateMessageId();Ya(this,is).addListener((function r(o){var i=o.data;if((null==i?void 0:i.type)===t.CLIPBOARD&&i.action===Xa&&i.id===n){var a=i.text;e._resolvePromiseDecorator(Xa,a),Ya(e,is).removeListener(r)}})),Ya(this,is).send({type:t.CLIPBOARD,action:Xa,id:n,options:{}})}return r.promise}},{key:"setLeaderboardScore",value:function(e){var r=this._getPromiseDecorator(f.SET_LEADERBOARD_SCORE);if(!r){r=this._createPromiseDecorator(f.SET_LEADERBOARD_SCORE);var n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Na(Object(r),!0).forEach((function(t){za(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Na(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e);"string"==typeof n.score&&(n.score=parseInt(n.score,10)),Ya(this,is).send({type:t.LEADERBOARD,action:f.SET_LEADERBOARD_SCORE,options:n}),this._resolvePromiseDecorator(f.SET_LEADERBOARD_SCORE)}return r.promise}},{key:"getLeaderboardScore",value:function(e){var r=this,n=Object.values(e||{}).find((function(e){return null==e?void 0:e.leaderboardName})),o=null==n?void 0:n.leaderboardName,i="".concat(f.GET_LEADERBOARD_SCORE,"_").concat(o),a=this._getPromiseDecorator(i);if(!a){a=this._createPromiseDecorator(i);var s=Ya(this,is).generateMessageId();Ya(this,is).addListener((function e(n){var a=n.data;(null==a?void 0:a.type)===t.LEADERBOARD&&a.action===f.GET_LEADERBOARD_SCORE&&a.id===s&&a.leaderboardName===o&&(r._resolvePromiseDecorator(i,a.score),Ya(r,is).removeListener(e))})),Ya(this,is).send({type:t.LEADERBOARD,action:f.GET_LEADERBOARD_SCORE,id:s,leaderboardName:o,options:e})}return a.promise}},{key:"getLeaderboardEntries",value:function(e){var r=this,n=this._getPromiseDecorator(f.GET_LEADERBOARD_ENTRIES);if(!n){n=this._createPromiseDecorator(f.GET_LEADERBOARD_ENTRIES);var o=Ya(this,is).generateMessageId();Ya(this,is).addListener((function e(n){var i;(null===(i=n.data)||void 0===i?void 0:i.type)===t.LEADERBOARD&&n.data.action===f.GET_LEADERBOARD_ENTRIES&&n.data.id===o&&(r._resolvePromiseDecorator(f.GET_LEADERBOARD_ENTRIES,n.data.entries),Ya(r,is).removeListener(e))})),Ya(this,is).send({type:t.LEADERBOARD,action:f.GET_LEADERBOARD_ENTRIES,id:o,options:e})}return n.promise}},{key:"showLeaderboardNativePopup",value:function(e){var r=this._getPromiseDecorator(f.SHOW_LEADERBOARD_NATIVE_POPUP);return r||(r=this._createPromiseDecorator(f.SHOW_LEADERBOARD_NATIVE_POPUP),Ya(this,is).send({type:t.LEADERBOARD,action:f.SHOW_LEADERBOARD_NATIVE_POPUP,options:e}),this._resolvePromiseDecorator(f.SHOW_LEADERBOARD_NATIVE_POPUP)),r.promise}},{key:"unlockAchievement",value:function(e){var r=this;return new Promise((function(n){var o=Ya(r,is).generateMessageId();Ya(r,is).addListener((function e(i){var a=i.data;(null==a?void 0:a.type)===t.ACHIEVEMENTS&&a.action===Qa&&a.id===o&&(n(a.result),Ya(r,is).removeListener(e))})),Ya(r,is).send({type:t.ACHIEVEMENTS,action:Qa,id:o,options:e})}))}},{key:"getAchievementsList",value:function(e){var r=this;return new Promise((function(n){var o=Ya(r,is).generateMessageId();Ya(r,is).addListener((function e(i){var a=i.data;(null==a?void 0:a.type)===t.ACHIEVEMENTS&&a.action===$a&&a.id===o&&(n(a.result),Ya(r,is).removeListener(e))})),Ya(r,is).send({type:t.ACHIEVEMENTS,action:$a,id:o,options:e})}))}},{key:"showAchievementsNativePopup",value:function(){return Ya(this,is).send({type:t.ACHIEVEMENTS,action:"show_achievements_native_popup"}),Promise.resolve()}}],o&&Ba(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),y}(qt);function cs(){return this._supportedFeatures.includes("isStorageRemoteLocalSupported")}function ls(e){var t,r,n,o;this._supportedFeatures=e.supportedFeatures||[],this._isBannerSupported=this._supportedFeatures.includes("isBannerSupported");var i=e.config,a=void 0===i?{}:i;this._deviceType=null!==(t=a.deviceType)&&void 0!==t?t:Ha(Ua(La.prototype),"deviceType",this),this._platformLanguage=null!==(r=a.platformLanguage)&&void 0!==r?r:Ha(Ua(La.prototype),"platformLanguage",this),this._platformTld=null!==(n=a.platformTld)&&void 0!==n?n:Ha(Ua(La.prototype),"platformTld",this),this._platformPayload=null!==(o=a.platformPayload)&&void 0!==o?o:Ha(Ua(La.prototype),"platformPayload",this),this._isInitialized=!0,this._resolvePromiseDecorator(f.INITIALIZE),Ya(this,is).send({type:"liveness",action:"ping",options:{version:"1.21.0"}})}function fs(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Array.isArray(r)?r:[],o=performance.getEntriesByType("resource")||[],i=n.length>0?n:["name","initiatorType"],a=o.map((function(e){var t={};return i.forEach((function(r){r in e&&(t[r]=e[r])})),t}));return Ya(this,is).send({type:t.PLATFORM,action:es,id:e,options:{resources:a}}),Promise.resolve(o)}La=us;const ps=us;function ds(e){return ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ds(e)}function ys(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hs(n.key),n)}}function hs(e){var t=function(e,t){if("object"!=ds(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ds(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ds(t)?t:String(t)}function ms(){return ms="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_s(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},ms.apply(this,arguments)}function vs(e,t){return vs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vs(e,t)}function _s(e){return _s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_s(e)}const gs=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vs(e,t)}(c,t);var r,n,o,s,u=(o=c,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_s(o);if(s){var r=_s(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ds(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),u.apply(this,arguments)}return r=c,(n=[{key:"platformId",get:function(){return e.POKI}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),Xt("https://game-cdn.poki.com/scripts/v2/poki-sdk.js").then((function(){Qt("PokiSDK","init").then((function(){e._platformSdk=window.PokiSDK,e._platformSdk.init().then((function(){e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE)}))}))}))),t.promise}},{key:"sendMessage",value:function(e){switch(e){case l.GAME_READY:return this._platformSdk.gameLoadingFinished(),Promise.resolve();case l.GAMEPLAY_STARTED:return this._platformSdk.gameplayStart(),Promise.resolve();case l.GAMEPLAY_STOPPED:return this._platformSdk.gameplayStop(),Promise.resolve();default:return ms(_s(c.prototype),"sendMessage",this).call(this,e)}}},{key:"showInterstitial",value:function(){var e=this,t=!1;this._platformSdk.commercialBreak((function(){t=!0,e._setInterstitialState(i.OPENED)})).then((function(){t?e._setInterstitialState(i.CLOSED):e._setInterstitialState(i.FAILED)})).catch((function(t){e._setInterstitialState(i.FAILED,t)}))}},{key:"showRewarded",value:function(){var e=this,t=!1;this._platformSdk.rewardedBreak((function(){t=!0,e._setRewardedState(a.OPENED)})).then((function(r){t?(r&&e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)})).catch((function(t){e._setRewardedState(a.FAILED,t)}))}}])&&ys(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(qt);function Ss(e){return Ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ss(e)}var bs=["price"];function Es(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ps(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Es(Object(r),!0).forEach((function(t){Rs(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Es(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function As(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Is(n.key),n)}}function ws(e,t){return ws=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ws(e,t)}function Os(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ks(e){return ks=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ks(e)}function Ds(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Rs(e,t,r){return(t=Is(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Is(e){var t=function(e,t){if("object"!=Ss(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ss(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ss(t)?t:String(t)}function Ts(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var Ls=new WeakSet,js=new WeakSet,Ns=new WeakSet,Cs=new WeakSet;function Bs(){var e=this;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]||!this._preloadedRewardedPromise?(this._preloadedRewardedPromise=Ts(this,Ns,Gs).call(this,!0).catch((function(){e._preloadedRewardedPromise=null})),this._preloadedRewardedPromise):this._preloadedRewardedPromise}function Ms(){var e=this;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]||!this._preloadedInterstitialPromise?(this._preloadedInterstitialPromise=Ts(this,Ns,Gs).call(this).catch((function(){e._preloadedInterstitialPromise=null})),this._preloadedInterstitialPromise):this._preloadedInterstitialPromise}function Gs(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(r,n){var o=3;!function i(){o-=1,e._platformSdk.loadAdsAsync(t).then(r).catch((function(e){"LOAD_ADS_FAILURE"!==e.code||o<1?n(e):i()}))}()}))}function Fs(e){e.playerId&&(this._playerId=e.playerId,this._playerName=e.playerDisplayName,this._isPlayerAuthorized=!0)}const Hs=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ws(e,t)}(l,t);var r,n,o,u,c=(o=l,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ks(o);if(u){var r=ks(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ss(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Os(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ds(Os(e=c.call.apply(c,[this].concat(r))),Cs),Ds(Os(e),Ns),Ds(Os(e),js),Ds(Os(e),Ls),Rs(Os(e),"_preloadedInterstitialPromise",null),Rs(Os(e),"_preloadedRewardedPromise",null),e}return r=l,n=[{key:"platformId",get:function(){return e.MSN}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isLeaderboardSupported",get:function(){return!0}},{key:"isLeaderboardSetScoreSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isPaymentsGetCatalogSupported",get:function(){return!0}},{key:"isPaymentsGetPurchasesSupported",get:function(){return!0}},{key:"isPaymentsConsumePurchaseSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),Xt("https://assets.msn.com/staticsb/statics/latest/msstart-games-sdk/msstart-v1.0.0-rc.19.min.js").then((function(){Qt("$msstart").then((function(){e._platformSdk=window.$msstart,e._platformSdk.getSignedInUserAsync().then((function(t){Ts(e,Cs,Fs).call(e,t),Ts(e,js,Ms).call(e,!0),Ts(e,Ls,Bs).call(e,!0)})).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE)}))}))}))),t.promise}},{key:"authorizePlayer",value:function(){var e=this;return this._isPlayerAuthorized?Promise.resolve():new Promise((function(t,r){e._platformSdk.signInAsync().then((function(r){Ts(e,Cs,Fs).call(e,r),t()})).catch((function(e){r(e)}))}))}},{key:"share",value:function(e){var t=this;return new Promise((function(r,n){t._platformSdk.shareAsync(e).then(r).catch(n)}))}},{key:"setLeaderboardScore",value:function(e){var t=this;return null!=e&&e.score?new Promise((function(r,n){t._platformSdk.submitGameResultsAsync(e.score).then(r).catch(n)})):Promise.reject(new Error("`score` option is required"))}},{key:"showBanner",value:function(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).position||"top:728x90";this._platformSdk.showDisplayAdsAsync(Array.isArray(t)?t:[t]).then((function(){e._setBannerState(s.SHOWN)})).catch((function(){e._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._bannerState===s.SHOWN&&this._platformSdk.hideDisplayAdsAsync().then((function(){e._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var e=this;Ts(this,js,Ms).call(this).then((function(t){return e._platformSdk.showAdsAsync(t.instanceId)})).then((function(t){return e._setInterstitialState(i.OPENED),t.showAdsCompletedAsync})).then((function(){return e._setInterstitialState(i.CLOSED)})).catch((function(){e._setInterstitialState(i.FAILED)})).finally((function(){Ts(e,js,Ms).call(e,!0)}))}},{key:"showRewarded",value:function(){var e=this;Ts(this,Ls,Bs).call(this).then((function(t){return e._platformSdk.showAdsAsync(t.instanceId)})).then((function(t){return e._setRewardedState(a.OPENED),t.showAdsCompletedAsync})).then((function(){e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)})).catch((function(){e._setRewardedState(a.FAILED)})).finally((function(){Ts(e,Ls,Bs).call(e,!0)}))}},{key:"paymentsPurchase",value:function(e){var t=this;if(null==e||!e.productId)return Promise.reject(new Error("`productId` option is required"));var r=this._getPromiseDecorator(f.PURCHASE);return r||(r=this._createPromiseDecorator(f.PURCHASE),this._platformSdk.iap.purchaseAsync({productId:e.productId}).then((function(e){"IAP_PURCHASE_FAILURE"!==e.code?t._resolvePromiseDecorator(f.PURCHASE,Ps(Ps({},e.receipt),{},{signature:e.receiptSignature})):t._rejectPromiseDecorator(f.PURCHASE,e)})).catch((function(e){t._rejectPromiseDecorator(f.PURCHASE,e)}))),r.promise}},{key:"paymentsGetPurchases",value:function(e){var t=this;if(null==e||!e.productId)return Promise.reject(new Error("`productId` option is required"));var r=this._getPromiseDecorator(f.GET_PURCHASES);return r||(r=this._createPromiseDecorator(f.GET_PURCHASES),this._platformSdk.iap.getPurchasesAsync(e).then((function(e){"IAP_GET_PURCHASES_FAILURE"!==e.code?t._resolvePromiseDecorator(f.GET_PURCHASES,[e]):t._rejectPromiseDecorator(f.GET_PURCHASES,e)})).catch((function(e){t._rejectPromiseDecorator(f.GET_PURCHASES,e)}))),r.promise}},{key:"paymentsGetCatalog",value:function(e){var t=this,r=this._getPromiseDecorator(f.GET_CATALOG);return r||(r=this._createPromiseDecorator(f.GET_CATALOG),this._platformSdk.iap.getAllAddOnsAsync(e).then((function(e){"IAP_GET_ALL_ADD_ONS_FAILURE"!==e.code?t._resolvePromiseDecorator(f.GET_CATALOG,e.map((function(e){var t=e.price;return Ps(Ps({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,bs)),{},{price:t.listPrice,currencyCode:t.currencyCode,msrp:t.msrp})}))):t._rejectPromiseDecorator(f.GET_CATALOG,e)})).catch((function(e){t._rejectPromiseDecorator(f.GET_CATALOG,e)}))),r.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this;if(null==e||!e.productId)return Promise.reject(new Error("`productId` option is required"));var r=this._getPromiseDecorator(f.CONSUME_PURCHASE);return r||(r=this._createPromiseDecorator(f.CONSUME_PURCHASE),this._platformSdk.iap.consumeAsync(e.productId).then((function(e){"IAP_CONSUME_FAILURE"!==e.code?t._resolvePromiseDecorator(f.CONSUME_PURCHASE,Ps(Ps({},e.consumptionReceipt),{},{signature:e.consumptionSignature})):t._rejectPromiseDecorator(f.CONSUME_PURCHASE,e)})).catch((function(e){t._rejectPromiseDecorator(f.CONSUME_PURCHASE,e)}))),r.promise}}],n&&As(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(qt);function Us(e){return Us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Us(e)}function zs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ws(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zs(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Vs(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vs(n.key),n)}}function Vs(e){var t=function(e,t){if("object"!=Us(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Us(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Us(t)?t:String(t)}function Ys(e,t){Ks(e,t),t.add(e)}function Zs(e,t,r){Ks(e,t),t.set(e,r)}function Ks(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Js(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Qs(e,t,"set"),r),r}function qs(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Xs(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Qs(e,t,"get"))}function Qs(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var $s=new WeakMap,eu=new WeakMap,tu=new WeakMap,ru=new WeakMap,nu=new WeakSet,ou=new WeakSet,iu=new WeakSet;function au(){var t,r=e.MOCK;this._options||(this._options={});var n=new URL(window.location.href);if(this._options.forciblySetPlatformId)r=qs(this,ou,su).call(this,this._options.forciblySetPlatformId.toLowerCase());else{var o=["y","a","n","d","e","x",".","n","e","t"].join("");n.searchParams.has("platform_id")?r=qs(this,ou,su).call(this,n.searchParams.get("platform_id").toLowerCase()):n.hostname.includes(o)||n.hash.includes("yandex")?r=e.YANDEX:n.hostname.includes("crazygames.")||n.hostname.includes("1001juegos.com")?r=e.CRAZY_GAMES:n.hostname.includes("gamedistribution.com")?r=e.GAME_DISTRIBUTION:n.hostname.includes("lagged.")?r=e.LAGGED:n.hostname.includes("wortal.ai")?r=e.WORTAL:n.searchParams.has("api_id")&&n.searchParams.has("viewer_id")&&n.searchParams.has("auth_key")||n.searchParams.has("vk_app_id")?r=e.VK:n.searchParams.has("app_id")&&n.searchParams.has("player_id")&&n.searchParams.has("game_sid")&&n.searchParams.has("auth_key")?r=e.ABSOLUTE_GAMES:n.searchParams.has("playdeck")?r=e.PLAYDECK:n.hash.includes("tgWebAppData")?r=e.TELEGRAM:n.hostname.includes("y8")?r=e.Y8:n.hostname.includes("fbsbx")?r=e.FACEBOOK:n.hostname.includes("poki-gdn")||n.hostname.includes("poki-user-content")?r=e.POKI:(n.hostname.includes("msn.")||n.hostname.includes("start.gg"))&&(r=e.MSN)}var i=n.searchParams.get("game_id");!this._options.gameId&&i&&(this._options.gameId=i);var a=(null===(t=this._options.platforms)||void 0===t?void 0:t[r])||this._options;switch(r){case e.VK:Js(this,tu,new mr(a));break;case e.YANDEX:Js(this,tu,new Gr(a));break;case e.CRAZY_GAMES:Js(this,tu,new on(a));break;case e.ABSOLUTE_GAMES:Js(this,tu,new vn(a));break;case e.GAME_DISTRIBUTION:Js(this,tu,new Rn(a));break;case e.OK:Js(this,tu,new Lo(a));break;case e.PLAYGAMA:Js(this,tu,new Zo(a));break;case e.WORTAL:Js(this,tu,new Ai(a));break;case e.PLAYDECK:Js(this,tu,new ui(a));break;case e.TELEGRAM:Js(this,tu,new Ui(a));break;case e.Y8:Js(this,tu,new aa(a));break;case e.LAGGED:Js(this,tu,new da(a));break;case e.FACEBOOK:Js(this,tu,new Da(a));break;case e.POKI:Js(this,tu,new gs(a));break;case e.QA_TOOL:Js(this,tu,new ps(a));break;case e.MSN:Js(this,tu,new Hs(a));break;default:Js(this,tu,new qt(a))}}function su(t){for(var r=Object.values(e),n=0;n<r.length;n++)if(t===r[n])return t;return e.MOCK}function uu(e){return Xs(this,$s)||console.error(p),Xs(this,ru)[e]}const cu=function(){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),Ys(this,iu),Ys(this,ou),Ys(this,nu),Zs(this,$s,{writable:!0,value:!1}),Zs(this,eu,{writable:!0,value:null}),Zs(this,tu,{writable:!0,value:null}),Zs(this,ru,{writable:!0,value:{}})}var f,p;return f=r,(p=[{key:"version",get:function(){return"1.21.0"}},{key:"isInitialized",get:function(){return Xs(this,$s)}},{key:"platform",get:function(){return qs(this,iu,uu).call(this,t.PLATFORM)}},{key:"player",get:function(){return qs(this,iu,uu).call(this,t.PLAYER)}},{key:"game",get:function(){return qs(this,iu,uu).call(this,t.GAME)}},{key:"storage",get:function(){return qs(this,iu,uu).call(this,t.STORAGE)}},{key:"advertisement",get:function(){return qs(this,iu,uu).call(this,t.ADVERTISEMENT)}},{key:"social",get:function(){return qs(this,iu,uu).call(this,t.SOCIAL)}},{key:"device",get:function(){return qs(this,iu,uu).call(this,t.DEVICE)}},{key:"leaderboard",get:function(){return qs(this,iu,uu).call(this,t.LEADERBOARD)}},{key:"payments",get:function(){return qs(this,iu,uu).call(this,t.PAYMENTS)}},{key:"achievements",get:function(){return qs(this,iu,uu).call(this,t.ACHIEVEMENTS)}},{key:"remoteConfig",get:function(){return qs(this,iu,uu).call(this,t.REMOTE_CONFIG)}},{key:"clipboard",get:function(){return qs(this,iu,uu).call(this,t.CLIPBOARD)}},{key:"PLATFORM_ID",get:function(){return e}},{key:"PLATFORM_MESSAGE",get:function(){return l}},{key:"MODULE_NAME",get:function(){return t}},{key:"EVENT_NAME",get:function(){return n}},{key:"INTERSTITIAL_STATE",get:function(){return i}},{key:"REWARDED_STATE",get:function(){return a}},{key:"BANNER_STATE",get:function(){return s}},{key:"STORAGE_TYPE",get:function(){return u}},{key:"VISIBILITY_STATE",get:function(){return o}},{key:"DEVICE_TYPE",get:function(){return c}},{key:"initialize",value:function(e){var r=this;if(Xs(this,$s))return Promise.resolve();if(!Xs(this,eu)){Js(this,eu,new I);var n="./playgama-bridge-config.json";e&&e.configFilePath&&(n=e.configFilePath),fetch(n).then((function(e){return e.json()})).then((function(e){r._options=Ws({},e)})).catch((function(){r._options=Ws({},e)})).finally((function(){qs(r,nu,au).call(r),Xs(r,tu).initialize().then((function(){Xs(r,ru)[t.PLATFORM]=new W(Xs(r,tu)),Xs(r,ru)[t.PLAYER]=new J(Xs(r,tu)),Xs(r,ru)[t.GAME]=new oe(Xs(r,tu)),Xs(r,ru)[t.STORAGE]=new le(Xs(r,tu)),Xs(r,ru)[t.ADVERTISEMENT]=new $e(Xs(r,tu)),Xs(r,ru)[t.SOCIAL]=new it(Xs(r,tu)),Xs(r,ru)[t.DEVICE]=new ft(Xs(r,tu)),Xs(r,ru)[t.LEADERBOARD]=new vt(Xs(r,tu)),Xs(r,ru)[t.PAYMENTS]=new Pt(Xs(r,tu)),Xs(r,ru)[t.REMOTE_CONFIG]=new Rt(Xs(r,tu)),Xs(r,ru)[t.CLIPBOARD]=new Ct(Xs(r,tu)),Xs(r,ru)[t.ACHIEVEMENTS]=new Ut(Xs(r,tu)),Js(r,$s,!0),console.info("%c PlaygamaBridge v.".concat(r.version," initialized. "),"background: #01A5DA; color: white"),Xs(r,eu)&&(Xs(r,eu).resolve(),Js(r,eu,null))}))}))}return Xs(this,eu).promise}}])&&xs(f.prototype,p),Object.defineProperty(f,"prototype",{writable:!1}),r}();window.bridge=new cu,window.playgamaBridge=window.bridge})()})();