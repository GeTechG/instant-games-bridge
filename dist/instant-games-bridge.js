(()=>{var e={258:e=>{!function(t){e.exports=t;var r={on:function(e,t){return i(this,e).push(t),this},once:function(e,t){var r=this;return o.originalListener=t,i(r,e).push(o),r;function o(){n.call(r,e,o),t.apply(this,arguments)}},off:n,emit:function(e,t){var r=this,o=i(r,e,!0);if(!o)return!1;var n=arguments.length;if(1===n)o.forEach(s);else if(2===n)o.forEach(u);else{var a=Array.prototype.slice.call(arguments,1);o.forEach(c)}return!!o.length;function s(e){e.call(r)}function u(e){e.call(r,t)}function c(e){e.apply(r,a)}}};function o(e){for(var t in r)e[t]=r[t];return e}function n(e,t){var r,o=this;if(arguments.length){if(t){if(r=i(o,e,!0)){if(!(r=r.filter(a)).length)return n.call(o,e);o.listeners[e]=r}}else if((r=o.listeners)&&(delete r[e],!Object.keys(r).length))return n.call(o)}else delete o.listeners;return o;function a(e){return e!==t&&e.originalListener!==t}}function i(e,t,r){if(!r||e.listeners){var o=e.listeners||(e.listeners={});return o[t]||(o[t]=[])}}o(t.prototype),t.mixin=o}((function e(){if(!(this instanceof e))return new e}))}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function t(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function o(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,i(e,t,"set"),r),r}function n(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,i(e,t,"get"))}function i(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var a=new WeakMap,s=new WeakMap,u=new WeakMap;const c=function(){function r(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t(this,a,{writable:!0,value:void 0}),t(this,s,{writable:!0,value:void 0}),t(this,u,{writable:!0,value:void 0}),o(this,a,new Promise((function(t,r){o(e,s,t),o(e,u,r)})))}var i,c;return i=r,(c=[{key:"promise",get:function(){return n(this,a)}},{key:"resolve",value:function(e){n(this,s).call(this,e)}},{key:"reject",value:function(e){n(this,u).call(this,e)}}])&&e(i.prototype,c),Object.defineProperty(i,"prototype",{writable:!1}),r}();var l=r(258),f=r.n(l);function h(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function p(e,t){m(e,t),t.add(e)}function d(e,t,r){m(e,t),t.set(e,r)}function m(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function y(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function w(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,_(e,t,"set"),r),r}function v(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,_(e,t,"get"))}function _(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var P="created",g="completed",b=new WeakMap,D=new WeakMap,k=new WeakMap,j=new WeakMap,S=new WeakSet,O=new WeakSet,I=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,O),p(this,S),d(this,b,{writable:!0,value:0}),d(this,D,{writable:!0,value:0}),d(this,k,{writable:!0,value:P}),d(this,j,{writable:!0,value:0}),w(this,b,t)}var t,r;return t=e,(r=[{key:"state",get:function(){return v(this,k)}},{key:"start",value:function(){var e=this;switch(v(this,k)){case P:case g:w(this,D,v(this,b)),y(this,S,R).call(this,"started"),w(this,j,setInterval((function(){w(e,D,v(e,D)-1),e.emit("time_left_changed",v(e,D)),v(e,D)<=0&&(y(e,O,z).call(e),y(e,S,R).call(e,g))}),1e3))}}},{key:"stop",value:function(){y(this,O,z).call(this),y(this,S,R).call(this,"stopped")}}])&&h(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function R(e){w(this,k,e),this.emit("state_changed",v(this,k))}function z(){w(this,D,0),clearInterval(v(this,j))}f().mixin(I.prototype);const E=I;function C(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function T(e,t,r){A(e,t),t.set(e,r)}function A(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function W(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function G(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,M(e,t,"set"),r),r}function F(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,M(e,t,"get"))}function M(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var x="interstitial_state_changed",L="rewarded_state_changed",N="opened",B="closed",J="failed",K="opened",V="closed",U="failed",Y="rewarded",q=new WeakMap,H=new WeakMap,Q=new WeakMap,X=new WeakSet,Z=function(){function e(t){var r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),A(this,r=X),r.add(this),T(this,q,{writable:!0,value:void 0}),T(this,H,{writable:!0,value:void 0}),T(this,Q,{writable:!0,value:60}),G(this,q,t),F(this,q).on(x,(function(e){return o.emit(x,e)})),F(this,q).on(L,(function(e){return o.emit(L,e)}))}var t,r;return t=e,(r=[{key:"interstitialState",get:function(){return F(this,q).interstitialState}},{key:"rewardedState",get:function(){return F(this,q).rewardedState}},{key:"minimumDelayBetweenInterstitial",get:function(){return F(this,Q)}},{key:"setMinimumDelayBetweenInterstitial",value:function(e){"number"!=typeof e&&(e=parseInt(e),isNaN(e))||(G(this,Q,e),F(this,H)&&(F(this,H).stop(),W(this,X,$).call(this)))}},{key:"showInterstitial",value:function(e){var t=e&&e.ignoreDelay;return F(this,H)&&F(this,H).state!==g&&!t?Promise.reject("The minimum delay between interstitials has not passed"):(F(this,Q)>0&&W(this,X,$).call(this),F(this,q).showInterstitial())}},{key:"showRewarded",value:function(){return F(this,q).showRewarded()}}])&&C(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $(){G(this,H,new E(F(this,Q))),F(this,H).start()}f().mixin(Z.prototype);const ee=Z;function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function re(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ne=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),oe(this,"LOCAL_STORAGE_GAME_DATA_KEY","game_data"),oe(this,"_isInitialized",!1),oe(this,"_initializationPromiseDecorator",null),oe(this,"_sdk",null),oe(this,"_localStorage",null),oe(this,"_isPlayerAuthorized",!1),oe(this,"_authorizationPromiseDecorator",null),oe(this,"_playerId",null),oe(this,"_playerName",null),oe(this,"_playerPhotos",[]),oe(this,"_gameData",null),oe(this,"_showInterstitialPromiseDecorator",null),oe(this,"_showRewardedPromiseDecorator",null),oe(this,"_interstitialState",null),oe(this,"_rewardedState",null),oe(this,"_sharePromiseDecorator",null),oe(this,"_inviteFriendsPromiseDecorator",null),oe(this,"_joinCommunityPromiseDecorator",null),oe(this,"_createPostPromiseDecorator",null),t&&(this._options=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){oe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t));try{this._localStorage=window.localStorage}catch(e){}}var t,r;return t=e,(r=[{key:"id",get:function(){return null}},{key:"sdk",get:function(){return this._sdk}},{key:"language",get:function(){var e=navigator.language;return"string"==typeof e?e.substring(0,2):"en"}},{key:"payload",get:function(){return new URL(window.location.href).searchParams.get("payload")}},{key:"isPlayerAuthorizationSupported",get:function(){return!1}},{key:"isPlayerAuthorized",get:function(){return this._isPlayerAuthorized}},{key:"playerId",get:function(){return this._playerId}},{key:"playerName",get:function(){return this._playerName}},{key:"playerPhotos",get:function(){return this._playerPhotos}},{key:"interstitialState",get:function(){return this._interstitialState}},{key:"rewardedState",get:function(){return this._rewardedState}},{key:"isInviteFriendsSupported",get:function(){return!1}},{key:"isJoinCommunitySupported",get:function(){return!1}},{key:"isShareSupported",get:function(){return!1}},{key:"isCreatePostSupported",get:function(){return!1}},{key:"initialize",value:function(){return Promise.resolve()}},{key:"authorizePlayer",value:function(){return Promise.reject()}},{key:"getGameData",value:function(e){var t=this;return new Promise((function(r){t._loadGameDataFromLocalStorage().finally((function(){if(t._gameData){var o=t._gameData[e];r(void 0!==o?o:null)}else r(null)}))}))}},{key:"setGameData",value:function(e,t){return this._gameData||(this._gameData={}),this._gameData[e]=t,this._saveGameDataToLocalStorage()}},{key:"deleteGameData",value:function(e){return this._gameData?(delete this._gameData[e],this._saveGameDataToLocalStorage()):Promise.resolve()}},{key:"showInterstitial",value:function(){return Promise.reject()}},{key:"showRewarded",value:function(){return Promise.reject()}},{key:"inviteFriends",value:function(){return Promise.reject()}},{key:"joinCommunity",value:function(){return Promise.reject()}},{key:"share",value:function(){return Promise.reject()}},{key:"createPost",value:function(e){return Promise.reject()}},{key:"_loadGameDataFromLocalStorage",value:function(){var e=this;return new Promise((function(t,r){try{var o=e._localStorage.getItem(e.LOCAL_STORAGE_GAME_DATA_KEY);o&&(e._gameData=JSON.parse(o)),t()}catch(e){r(e)}}))}},{key:"_saveGameDataToLocalStorage",value:function(){var e=this;return new Promise((function(t,r){try{e._localStorage.setItem(e.LOCAL_STORAGE_GAME_DATA_KEY,JSON.stringify(e._gameData)),t()}catch(e){r(e)}}))}},{key:"_setInterstitialState",value:function(e){this._interstitialState!==e&&(this._interstitialState=e,this.emit(x,this._interstitialState))}},{key:"_setRewardedState",value:function(e){this._rewardedState!==e&&(this._rewardedState=e,this.emit(L,this._rewardedState))}},{key:"_canShowAdvertisement",value:function(){return!(this._interstitialState&&this._interstitialState!==B||this._rewardedState&&this._rewardedState!==V&&this._rewardedState!==U)}}])&&re(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();f().mixin(ne.prototype);const ie=ne;function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ce(e,t){return ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ce(e,t)}function le(e,t){if(t&&("object"===ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function fe(e){return fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fe(e)}const he=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ce(e,t)}(a,e);var t,r,o,n,i=(o=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fe(o);if(n){var r=fe(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return le(this,e)});function a(){return se(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"id",get:function(){return"mock"}},{key:"isInviteFriendsSupported",get:function(){return!!(this._options&&this._options.social&&this._options.social.simulateInviteFriends)&&this._options.social.simulateInviteFriends}},{key:"isJoinCommunitySupported",get:function(){return!!(this._options&&this._options.social&&this._options.social.simulateJoinCommunity)&&this._options.social.simulateJoinCommunity}},{key:"isShareSupported",get:function(){return!!(this._options&&this._options.social&&this._options.social.simulateShare)&&this._options.social.simulateShare}},{key:"showInterstitial",value:function(){var e=this;return this._options&&this._options.advertisement&&this._options.advertisement.simulateInterstitial?new Promise((function(t){t(),e._setInterstitialState(N),e._setInterstitialState(B)})):Promise.reject()}},{key:"showRewarded",value:function(){var e=this;return this._options&&this._options.advertisement&&this._options.advertisement.simulateRewarded?new Promise((function(t){t(),e._setRewardedState(K),e._setRewardedState(Y),e._setRewardedState(V)})):Promise.reject()}},{key:"inviteFriends",value:function(){return this.isInviteFriendsSupported?Promise.resolve():Promise.reject()}},{key:"joinCommunity",value:function(){return this.isJoinCommunitySupported?Promise.resolve():Promise.reject()}},{key:"share",value:function(){return this.isShareSupported?Promise.resolve():Promise.reject()}}])&&ue(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(ie);var pe=function(e){return new Promise((function(t){var r=document.createElement("script");r.src=e,r.addEventListener("load",t),document.head.appendChild(r)}))};function de(e){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}function me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ye(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function we(){return we="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var o=ve(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},we.apply(this,arguments)}function ve(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ge(e)););return e}function _e(e,t){return _e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_e(e,t)}function Pe(e,t){if(t&&("object"===de(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ge(e){return ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ge(e)}const be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_e(e,t)}(a,e);var t,r,o,n,i=(o=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ge(o);if(n){var r=ge(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Pe(this,e)});function a(){return me(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"id",get:function(){return"vk"}},{key:"language",get:function(){var e=new URL(window.location.href);if(e.searchParams.has("language"))switch(e.searchParams.get("language")){case 0:return"ru";case 1:return"uk";case 2:return"be";case 3:return"en"}return we(ge(a.prototype),"language",this)}},{key:"payload",get:function(){var e=new URL(window.location.href);return e.searchParams.has("hash")?e.searchParams.get("hash"):we(ge(a.prototype),"payload",this)}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPlayerAuthorized",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isCreatePostSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;return this._isInitialized?Promise.resolve():(this._initializationPromiseDecorator||(this._initializationPromiseDecorator=new c,pe("https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js").then((function(){e._sdk=window.vkBridge,e._sdk.send("VKWebAppInit").then((function(){e._sdk.send("VKWebAppGetUserInfo").then((function(t){t&&(e._playerId=t.id,e._playerName=t.first_name+" "+t.last_name,t.photo_100&&e._playerPhotos.push(t.photo_100),t.photo_200&&e._playerPhotos.push(t.photo_200),t.photo_max_orig&&e._playerPhotos.push(t.photo_max_orig))})).finally((function(){e._isInitialized=!0,e._initializationPromiseDecorator&&(e._initializationPromiseDecorator.resolve(),e._initializationPromiseDecorator=null)}))}))}))),this._initializationPromiseDecorator.promise)}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"getGameData",value:function(e){var t=this;return new Promise((function(r){t._sdk.send("VKWebAppStorageGet",{keys:[e]}).then((function(e){if(""!==e.keys[0].value){var t;try{t=JSON.parse(e.keys[0].value)}catch(r){t=e.keys[0].value}r(t)}else r(null)})).catch((function(){r(null)}))}))}},{key:"setGameData",value:function(e,t){var r=this;return new Promise((function(o,n){var i={key:e,value:t};"string"!=typeof t&&(i.value=JSON.stringify(t)),r._sdk.send("VKWebAppStorageSet",i).then((function(){o()})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?n(e.error_data.error_reason):n()}))}))}},{key:"deleteGameData",value:function(e){return this.setGameData(e,"")}},{key:"showInterstitial",value:function(){var e=this;return this._canShowAdvertisement()?(this._showInterstitialPromiseDecorator||(this._showInterstitialPromiseDecorator=new c,this._sdk.send("VKWebAppShowNativeAds",{ad_format:"preloader"}).then((function(t){t.result?(e._showInterstitialPromiseDecorator&&(e._showInterstitialPromiseDecorator.resolve(),e._showInterstitialPromiseDecorator=null),e._setInterstitialState(N),e._setInterstitialState(B)):(e._showInterstitialPromiseDecorator&&(e._showInterstitialPromiseDecorator.reject(),e._showInterstitialPromiseDecorator=null),e._setInterstitialState(J))})).catch((function(t){e._showInterstitialPromiseDecorator&&(e._showInterstitialPromiseDecorator.reject(t),e._showInterstitialPromiseDecorator=null),e._setInterstitialState(J)}))),this._showInterstitialPromiseDecorator.promise):Promise.reject()}},{key:"showRewarded",value:function(){var e=this;return this._canShowAdvertisement()?(this._showRewardedPromiseDecorator||(this._showRewardedPromiseDecorator=new c,this._sdk.send("VKWebAppShowNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(t){t.result?(e._showRewardedPromiseDecorator&&(e._showRewardedPromiseDecorator.resolve(),e._showRewardedPromiseDecorator=null),e._setRewardedState(K),e._setRewardedState(Y),e._setRewardedState(V)):(e._showRewardedPromiseDecorator&&(e._showRewardedPromiseDecorator.reject(),e._showRewardedPromiseDecorator=null),e._setRewardedState(U))})).catch((function(t){e._showRewardedPromiseDecorator&&(e._showRewardedPromiseDecorator.reject(t),e._showRewardedPromiseDecorator=null),e._setRewardedState(U)}))),this._showRewardedPromiseDecorator.promise):Promise.reject()}},{key:"inviteFriends",value:function(){var e=this;return this._inviteFriendsPromiseDecorator||(this._inviteFriendsPromiseDecorator=new c,this._sdk.send("VKWebAppShowInviteBox").then((function(t){t.success?e._inviteFriendsPromiseDecorator&&(e._inviteFriendsPromiseDecorator.resolve(),e._inviteFriendsPromiseDecorator=null):e._inviteFriendsPromiseDecorator&&(e._inviteFriendsPromiseDecorator.reject(),e._inviteFriendsPromiseDecorator=null)})).catch((function(t){e._inviteFriendsPromiseDecorator&&(t&&t.error_data&&t.error_data.error_reason?e._inviteFriendsPromiseDecorator.reject(t.error_data.error_reason):e._inviteFriendsPromiseDecorator.reject(),e._inviteFriendsPromiseDecorator=null)}))),this._inviteFriendsPromiseDecorator.promise}},{key:"joinCommunity",value:function(){var e=this;if(!this._options||!this._options.groupId)return Promise.reject();if("string"==typeof this._options.groupId){var t=parseInt(this._options.groupId);isNaN(t)||(this._options.groupId=t)}return this._joinCommunityPromiseDecorator||(this._joinCommunityPromiseDecorator=new c,this._sdk.send("VKWebAppJoinGroup",{group_id:this._options.groupId}).then((function(t){if(t&&t.result)return e._joinCommunityPromiseDecorator&&(e._joinCommunityPromiseDecorator.resolve(),e._joinCommunityPromiseDecorator=null),void window.open("https://vk.com/public"+e._options.groupId);e._joinCommunityPromiseDecorator&&(e._joinCommunityPromiseDecorator.reject(),e._joinCommunityPromiseDecorator=null)})).catch((function(t){e._joinCommunityPromiseDecorator&&(t&&t.error_data&&t.error_data.error_reason?e._joinCommunityPromiseDecorator.reject(t.error_data.error_reason):e._joinCommunityPromiseDecorator.reject(),e._joinCommunityPromiseDecorator=null)}))),this._joinCommunityPromiseDecorator.promise}},{key:"share",value:function(){var e=this;return this._sharePromiseDecorator||(this._sharePromiseDecorator=new c,this._sdk.send("VKWebAppShare").then((function(t){t&&t.type?e._sharePromiseDecorator&&(e._sharePromiseDecorator.resolve(),e._sharePromiseDecorator=null):e._sharePromiseDecorator&&(e._sharePromiseDecorator.reject(),e._sharePromiseDecorator=null)})).catch((function(t){e._sharePromiseDecorator&&(t&&t.error_data&&t.error_data.error_reason?e._sharePromiseDecorator.reject(t.error_data.error_reason):e._sharePromiseDecorator.reject(),e._sharePromiseDecorator=null)}))),this._sharePromiseDecorator.promise}},{key:"createPost",value:function(e){var t=this;return this._createPostPromiseDecorator||(this._createPostPromiseDecorator=new c,this._sdk.send("VKWebAppShowWallPostBox",{message:e}).then((function(e){e&&e.post_id?t._createPostPromiseDecorator&&(t._createPostPromiseDecorator.resolve(),t._createPostPromiseDecorator=null):t._createPostPromiseDecorator&&(t._createPostPromiseDecorator.reject(),t._createPostPromiseDecorator=null)})).catch((function(e){t._createPostPromiseDecorator&&(e&&e.error_data&&e.error_data.error_reason?t._createPostPromiseDecorator.reject(e.error_data.error_reason):t._createPostPromiseDecorator.reject(),t._createPostPromiseDecorator=null)}))),this._createPostPromiseDecorator.promise}}])&&ye(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(ie);function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Se(e,t){return Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Se(e,t)}function Oe(e,t){if(t&&("object"===De(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ie(e)}function Ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Re(){return Re="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var o=ze(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},Re.apply(this,arguments)}function ze(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ee(e)););return e}function Ee(e){return Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ee(e)}function Ce(e,t){Ae(e,t),t.add(e)}function Te(e,t,r){Ae(e,t),t.set(e,r)}function Ae(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function We(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ge(e,t,"get"))}function Ge(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function Fe(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var Me=new WeakMap,xe=new WeakSet,Le=new WeakSet,Ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Se(e,t)}(a,e);var t,r,o,n,i=(o=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ee(o);if(n){var r=Ee(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Oe(this,e)});function a(){var e;ke(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return Ce(Ie(e=i.call.apply(i,[this].concat(r))),Le),Ce(Ie(e),xe),Te(Ie(e),Me,{writable:!0,value:null}),e}return t=a,(r=[{key:"id",get:function(){return"yandex"}},{key:"language",get:function(){return this._sdk?this._sdk.environment.i18n.lang:Re(Ee(a.prototype),"language",this)}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;return this._isInitialized?Promise.resolve():(this._initializationPromiseDecorator||(this._initializationPromiseDecorator=new c,pe("https://yandex.ru/games/sdk/v2").then((function(){window.YaGames.init().then((function(t){e._sdk=t;var r=Fe(e,xe,Be).call(e),o=e._sdk.getStorage().then((function(t){e._localStorage=t}));Promise.all([r,o]).finally((function(){e._isInitialized=!0,e._initializationPromiseDecorator&&(e._initializationPromiseDecorator.resolve(),e._initializationPromiseDecorator=null)}))}))}))),this._initializationPromiseDecorator.promise)}},{key:"authorizePlayer",value:function(){var e=this;return null==this._authorizationPromiseDecorator&&(this._authorizationPromiseDecorator=new c,this._isPlayerAuthorized?Fe(this,xe,Be).call(this).then((function(){e._authorizationPromiseDecorator&&(e._authorizationPromiseDecorator.resolve(),e._authorizationPromiseDecorator=null)})):this._sdk.auth.openAuthDialog().then((function(){Fe(e,xe,Be).call(e).then((function(){e._authorizationPromiseDecorator&&(e._authorizationPromiseDecorator.resolve(),e._authorizationPromiseDecorator=null)}))})).catch((function(){e._authorizationPromiseDecorator&&(e._authorizationPromiseDecorator.reject(),e._authorizationPromiseDecorator=null)}))),this._authorizationPromiseDecorator.promise}},{key:"getGameData",value:function(e){var t=this;return new Promise((function(r){if(t._gameData)void 0===t._gameData[e]?r(null):r(t._gameData[e]);else{if(!We(t,Me))return Re(Ee(a.prototype),"getGameData",t).call(t,e);We(t,Me).getData().then((function(o){t._gameData=o,void 0===t._gameData[e]?r(null):r(t._gameData[e])})).catch((function(){r(null)}))}}))}},{key:"setGameData",value:function(e,t){return this._gameData||(this._gameData={}),this._gameData[e]=t,Fe(this,Le,Je).call(this)}},{key:"deleteGameData",value:function(e){return this._gameData?(delete this._gameData[e],Fe(this,Le,Je).call(this)):Promise.resolve()}},{key:"showInterstitial",value:function(){var e=this;return this._canShowAdvertisement()?(this._showInterstitialPromiseDecorator||(this._showInterstitialPromiseDecorator=new c,this._sdk.adv.showFullscreenAdv({callbacks:{onOpen:function(){e._showInterstitialPromiseDecorator&&(e._showInterstitialPromiseDecorator.resolve(),e._showInterstitialPromiseDecorator=null),e._setInterstitialState(N)},onClose:function(t){t?e._setInterstitialState(B):(e._showInterstitialPromiseDecorator&&(e._showInterstitialPromiseDecorator.reject(),e._showInterstitialPromiseDecorator=null),e._setInterstitialState(J))}}})),this._showInterstitialPromiseDecorator.promise):Promise.reject()}},{key:"showRewarded",value:function(){var e=this;return this._canShowAdvertisement()?(this._showRewardedPromiseDecorator||(this._showRewardedPromiseDecorator=new c,this._sdk.adv.showRewardedVideo({callbacks:{onOpen:function(){e._showRewardedPromiseDecorator&&(e._showRewardedPromiseDecorator.resolve(),e._showRewardedPromiseDecorator=null),e._setRewardedState(K)},onRewarded:function(){e._setRewardedState(Y)},onClose:function(){e._setRewardedState(V)},onError:function(t){e._showRewardedPromiseDecorator&&(e._showRewardedPromiseDecorator.reject(t),e._showRewardedPromiseDecorator=null),e._setRewardedState(U)}}})),this._showRewardedPromiseDecorator.promise):Promise.reject()}}])&&je(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(ie);function Be(){var e=this,t=!1;return this._options&&this._options.authorization&&this._options.authorization.scopes&&(t=this._options.authorization.scopes),new Promise((function(r){e._sdk.getPlayer({scopes:t}).then((function(t){e._playerId=t.getUniqueID(),e._isPlayerAuthorized="lite"!==t.getMode();var r=t.getName();""!==r&&(e._playerName=r),e._playerPhotos=[];var o,n,i=t.getPhoto("small"),a=t.getPhoto("medium"),s=t.getPhoto("large");i&&e._playerPhotos.push(i),a&&e._playerPhotos.push(a),s&&e._playerPhotos.push(s),n=t,function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(o=e,Ge(o,Me,"set"),n)})).finally((function(){r()}))}))}function Je(){var e=this;return new Promise((function(t,r){if(!We(e,Me))return Re(Ee(Ne.prototype),"_saveGameDataToLocalStorage",e).call(e);We(e,Me).setData(e._gameData).then((function(){t()})).catch((function(e){r(e)}))}))}const Ke=Ne;function Ve(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ue(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ye(e,t,"get"))}function Ye(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var qe=new WeakMap;const He=function(){function e(t){var r,o,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n={writable:!0,value:void 0},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,o=qe),o.set(r,n),function(e,t,r){(function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}})(e,Ye(e,t,"set"),r)}(this,qe,t)}var t,r;return t=e,(r=[{key:"isAuthorizationSupported",get:function(){return Ue(this,qe).isPlayerAuthorizationSupported}},{key:"isAuthorized",get:function(){return Ue(this,qe).isPlayerAuthorized}},{key:"id",get:function(){return Ue(this,qe).playerId}},{key:"name",get:function(){return Ue(this,qe).playerName}},{key:"photos",get:function(){return Ue(this,qe).playerPhotos}},{key:"authorize",value:function(){return Ue(this,qe).authorizePlayer()}}])&&Ve(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Qe(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Xe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ze(e,t,"get"))}function Ze(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var $e=new WeakMap;const et=function(){function e(t){var r,o,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n={writable:!0,value:void 0},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,o=$e),o.set(r,n),function(e,t,r){(function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}})(e,Ze(e,t,"set"),r)}(this,$e,t)}var t,r;return t=e,(r=[{key:"getData",value:function(e){return Xe(this,$e).getGameData(e)}},{key:"setData",value:function(e,t){return Xe(this,$e).setGameData(e,t)}},{key:"deleteData",value:function(e){return Xe(this,$e).deleteGameData(e)}}])&&Qe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function tt(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function rt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ot(e,t,"get"))}function ot(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var nt=new WeakMap;const it=function(){function e(t){var r,o,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n={writable:!0,value:void 0},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,o=nt),o.set(r,n),function(e,t,r){(function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}})(e,ot(e,t,"set"),r)}(this,nt,t)}var t,r;return t=e,(r=[{key:"isInviteFriendsSupported",get:function(){return rt(this,nt).isInviteFriendsSupported}},{key:"isJoinCommunitySupported",get:function(){return rt(this,nt).isJoinCommunitySupported}},{key:"isShareSupported",get:function(){return rt(this,nt).isShareSupported}},{key:"isCreatePostSupported",get:function(){return rt(this,nt).isCreatePostSupported}},{key:"inviteFriends",value:function(){return rt(this,nt).inviteFriends()}},{key:"joinCommunity",value:function(){return rt(this,nt).joinCommunity()}},{key:"share",value:function(){return rt(this,nt).share()}},{key:"createPost",value:function(e){return rt(this,nt).createPost(e)}}])&&tt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function at(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function st(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ut(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ct(e,t,r){lt(e,t),t.set(e,r)}function lt(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ft(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,pt(e,t,"set"),r),r}function ht(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,pt(e,t,"get"))}function pt(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var dt=new WeakMap,mt=new WeakMap,yt=new WeakMap,wt=new WeakMap,vt=new WeakMap,_t=new WeakMap,Pt=new WeakMap,gt=new WeakSet;function bt(){var e=new URL(window.location.href),t=["g","a","m","e","s",".","s","3",".","y","a","n","d","e","x",".","n","e","t"].join("");e.hostname.includes(t)?ft(this,yt,new Ke(this._options&&this._options.platforms&&this._options.platforms.yandex)):e.searchParams.has("api_id")&&e.searchParams.has("viewer_id")&&e.searchParams.has("auth_key")?ft(this,yt,new be(this._options&&this._options.platforms&&this._options.platforms.vk)):ft(this,yt,new he(this._options&&this._options.platforms&&this._options.platforms.mock))}const Dt=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),lt(this,t=gt),t.add(this),ct(this,dt,{writable:!0,value:!1}),ct(this,mt,{writable:!0,value:void 0}),ct(this,yt,{writable:!0,value:void 0}),ct(this,wt,{writable:!0,value:void 0}),ct(this,vt,{writable:!0,value:void 0}),ct(this,_t,{writable:!0,value:void 0}),ct(this,Pt,{writable:!0,value:void 0})}var t,r;return t=e,r=[{key:"version",get:function(){return"1.3.0"}},{key:"isInitialized",get:function(){return ht(this,dt)}},{key:"platform",get:function(){return ht(this,yt)}},{key:"player",get:function(){return ht(this,wt)}},{key:"game",get:function(){return ht(this,vt)}},{key:"advertisement",get:function(){return ht(this,_t)}},{key:"social",get:function(){return ht(this,Pt)}},{key:"initialize",value:function(e){var t=this;return ht(this,dt)?Promise.resolve():(ht(this,mt)||(ft(this,mt,new c),this._options=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?at(Object(r),!0).forEach((function(t){st(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):at(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}(this,gt,bt).call(this),ht(this,yt).initialize().then((function(){ft(t,wt,new He(ht(t,yt))),ft(t,vt,new et(ht(t,yt))),ft(t,_t,new ee(ht(t,yt))),ft(t,Pt,new it(ht(t,yt))),ft(t,dt,!0),console.log("%c InstantGamesBridge v."+t.version+" initialized. ","background: #01A5DA; color: white"),ht(t,mt)&&(ht(t,mt).resolve(),ft(t,mt,null))}))),ht(this,mt).promise)}}],r&&ut(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();window.instantGamesBridge=new Dt})()})();