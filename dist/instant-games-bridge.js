(()=>{var t={258:t=>{!function(e){t.exports=e;var r="listeners",n={on:function(t,e){return a(this,t).push(e),this},once:function(t,e){var r=this;return n.originalListener=e,a(r,t).push(n),r;function n(){i.call(r,t,n),e.apply(this,arguments)}},off:i,emit:function(t,e){var r=this,n=a(r,t,!0);if(!n)return!1;var o=arguments.length;if(1===o)n.forEach((function(t){t.call(r)}));else if(2===o)n.forEach((function(t){t.call(r,e)}));else{var i=Array.prototype.slice.call(arguments,1);n.forEach((function(t){t.apply(r,i)}))}return!!n.length}};function o(t){for(var e in n)t[e]=n[e];return t}function i(t,e){var n,o=this;if(arguments.length){if(e){if(n=a(o,t,!0)){if(!(n=n.filter((function(t){return t!==e&&t.originalListener!==e}))).length)return i.call(o,t);o[r][t]=n}}else if((n=o[r])&&(delete n[t],!Object.keys(n).length))return i.call(o)}else delete o[r];return o}function a(t,e,n){if(!n||t[r]){var o=t[r]||(t[r]={});return o[e]||(o[e]=[])}}o(e.prototype),e.mixin=o}((function t(){if(!(this instanceof t))return new t}))}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t={VK:"vk",VK_PLAY:"vk_play",OK:"ok",YANDEX:"yandex",CRAZY_GAMES:"crazy_games",ABSOLUTE_GAMES:"absolute_games",GAME_DISTRIBUTION:"game_distribution",PLAYGAMA:"playgama",MOCK:"mock"},e={PLATFORM:"platform",PLAYER:"player",GAME:"game",STORAGE:"storage",ADVERTISEMENT:"advertisement",SOCIAL:"social",DEVICE:"device",LEADERBOARD:"leaderboard",PAYMENTS:"payments",REMOTE_CONFIG:"remote_config",CLIPBOARD:"clipboard"},n={INTERSTITIAL_STATE_CHANGED:"interstitial_state_changed",REWARDED_STATE_CHANGED:"rewarded_state_changed",BANNER_STATE_CHANGED:"banner_state_changed",VISIBILITY_STATE_CHANGED:"visibility_state_changed"},o={VISIBLE:"visible",HIDDEN:"hidden"},i={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed"},a={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed",REWARDED:"rewarded"},u={LOADING:"loading",SHOWN:"shown",HIDDEN:"hidden",FAILED:"failed"},s={LOCAL_STORAGE:"local_storage",PLATFORM_INTERNAL:"platform_internal"},c={DESKTOP:"desktop",MOBILE:"mobile",TABLET:"tablet",TV:"tv"},l={GAME_READY:"game_ready",IN_GAME_LOADING_STARTED:"in_game_loading_started",IN_GAME_LOADING_STOPPED:"in_game_loading_stopped",GAMEPLAY_STARTED:"gameplay_started",GAMEPLAY_STOPPED:"gameplay_stopped",PLAYER_GOT_ACHIEVEMENT:"player_got_achievement"},f={INITIALIZE:"initialize",AUTHORIZE_PLAYER:"authorize_player",SHARE:"share",INVITE_FRIENDS:"invite_friends",JOIN_COMMUNITY:"join_community",CREATE_POST:"create_post",ADD_TO_HOME_SCREEN:"add_to_home_screen",ADD_TO_FAVORITES:"add_to_favorites",RATE:"rate",SET_LEADERBOARD_SCORE:"set_leaderboard_score",GET_LEADERBOARD_SCORE:"get_leaderboard_score",GET_LEADERBOARD_ENTRIES:"get_leaderboard_entries",GET_PURCHASES:"get_purchases",GET_CATALOG:"get_catalog",PURCHASE:"purchase",CONSUME_PURCHASE:"consume_purchase",GET_REMOTE_CONFIG:"get_remote_config",GET_STORAGE_DATA:"get_storage_data",SHOW_LEADERBOARD_NATIVE_POPUP:"show_leaderboard_native_popup",CLIPBOARD_WRITE:"clipboard_write"},p={message:"Before using the SDK you must initialize it"},y={message:"Storage not supported"},h={message:"Storage not available"},d={message:"GameDistribution Game ID is undefined"},m={message:"VK Play Game ID is undefined"},v={message:"OK Game params are not found"},_={message:"Message is too long"};function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g(n.key),n)}}function g(t){var e=function(t,e){if("object"!=b(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==b(e)?e:String(e)}function E(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function P(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,A(t,e,"set"),r),r}function w(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,A(t,e,"get"))}function A(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var O=new WeakMap,k=new WeakMap,T=new WeakMap;const I=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,O,{writable:!0,value:void 0}),E(this,k,{writable:!0,value:void 0}),E(this,T,{writable:!0,value:void 0}),P(this,O,new Promise((function(t,r){P(e,k,t),P(e,T,r)})))}var e,r;return e=t,(r=[{key:"promise",get:function(){return w(this,O)}},{key:"resolve",value:function(t){w(this,k).call(this,t)}},{key:"reject",value:function(t){w(this,T).call(this,t)}}])&&S(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function R(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,j(n.key),n)}}function j(t){var e=function(t,e){if("object"!=D(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==D(e)?e:String(e)}const L=function(){function t(e){var r,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=void 0,(n=j(n="_platformBridge"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._platformBridge=e}var e,r;return e=t,(r=[{key:"initialize",value:function(){return Promise.resolve()}}])&&R(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function C(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,B(n.key),n)}}function B(t){var e=function(t,e){if("object"!=N(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==N(e)?e:String(e)}function M(t,e){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},M(t,e)}function G(t){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},G(t)}const F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=G(n);if(o){var r=G(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===N(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"id",get:function(){return this._platformBridge.platformId}},{key:"sdk",get:function(){return this._platformBridge.platformSdk}},{key:"language",get:function(){return this._platformBridge.platformLanguage}},{key:"payload",get:function(){return this._platformBridge.platformPayload}},{key:"tld",get:function(){return this._platformBridge.platformTld}},{key:"sendMessage",value:function(t){return this._platformBridge.sendMessage(t)}}])&&C(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(L);function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function U(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,z(n.key),n)}}function z(t){var e=function(t,e){if("object"!=W(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==W(e)?e:String(e)}function H(t,e){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},H(t,e)}function V(t){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},V(t)}const Y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=V(n);if(o){var r=V(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===W(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isAuthorizationSupported",get:function(){return this._platformBridge.isPlayerAuthorizationSupported}},{key:"isAuthorized",get:function(){return this._platformBridge.isPlayerAuthorized}},{key:"id",get:function(){return this._platformBridge.playerId}},{key:"name",get:function(){return this._platformBridge.playerName}},{key:"photos",get:function(){return this._platformBridge.playerPhotos}},{key:"authorize",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.authorize(e)}return this._platformBridge.authorizePlayer(t)}}])&&U(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(L);var x=r(258),K=r.n(x);function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function J(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,q(n.key),n)}}function q(t){var e=function(t,e){if("object"!=Z(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Z(e)?e:String(e)}function X(t,e){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},X(t,e)}function $(t){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$(t)}var Q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&X(t,e)}(u,t);var e,r,o,i,a=(o=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=$(o);if(i){var r=$(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Z(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=a.call(this,t))._platformBridge.on(n.VISIBILITY_STATE_CHANGED,(function(t){return e.emit(n.VISIBILITY_STATE_CHANGED,t)})),e}return e=u,(r=[{key:"visibilityState",get:function(){return this._platformBridge.visibilityState}}])&&J(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(L);K().mixin(Q.prototype);const tt=Q;function et(t){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},et(t)}function rt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nt(n.key),n)}}function nt(t){var e=function(t,e){if("object"!=et(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==et(e)?e:String(e)}function ot(t,e){return ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ot(t,e)}function it(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function at(t){return at=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},at(t)}function ut(t,e){var r=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}(t,e);return function(t,e){return e.get?e.get.call(t):e.value}(t,r)}var st=new WeakMap;const ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ot(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=at(n);if(o){var r=at(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===et(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return it(t)}(this,t)});function a(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var o=arguments.length,u=new Array(o),s=0;s<o;s++)u[s]=arguments[s];return e=it(t=i.call.apply(i,[this].concat(u))),n={writable:!0,value:[]},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,r=st),r.set(e,n),t}return e=a,(r=[{key:"defaultType",get:function(){return this._platformBridge.defaultStorageType}},{key:"isSupported",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.isSupported(e)}return this._platformBridge.isStorageSupported(t)}},{key:"isAvailable",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.isSupported(e)}return this._platformBridge.isStorageAvailable(t)}},{key:"get",value:function(t,e){var r=this;if(e){var n=e[this._platformBridge.platformId];if(n)return this.get(t,n)}var o=e;o||(o=this.defaultType);var i=ut(this,st)[o];return i&&void 0!==i[t]?Promise.resolve(i[t]):this._platformBridge.getDataFromStorage(t,o).then((function(e){return r._addToCache(o,t,e),e}))}},{key:"set",value:function(t,e,r){var n=this;if(r){var o=r[this._platformBridge.platformId];if(o)return this.set(t,e,o)}var i=r;return i||(i=this.defaultType),this._platformBridge.setDataToStorage(t,e,i).then((function(){return n._addToCache(i,t,e)}))}},{key:"delete",value:function(t,e){var r=this;if(e){var n=e[this._platformBridge.platformId];if(n)return this.delete(t,n)}var o=e;return o||(o=this.defaultType),this._platformBridge.deleteDataFromStorage(t,o).then((function(){return r._deleteFromCache(o,t)}))}},{key:"_addToCache",value:function(t,e,r){if(ut(this,st)[t]||(ut(this,st)[t]=[]),Array.isArray(e))for(var n=0;n<e.length;n++)ut(this,st)[t][e[n]]=r[e[n]];else ut(this,st)[t][e]=r}},{key:"_deleteFromCache",value:function(t,e){if(ut(this,st)[t])if(Array.isArray(e))for(var r=0;r<e.length;r++)delete ut(this,st)[t][e[r]];else delete ut(this,st)[t][e]}}])&&rt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(L);function lt(t){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lt(t)}function ft(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pt(n.key),n)}}function pt(t){var e=function(t,e){if("object"!=lt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==lt(e)?e:String(e)}function yt(t,e){dt(t,e),e.add(t)}function ht(t,e,r){dt(t,e),e.set(t,r)}function dt(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function mt(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function vt(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,bt(t,e,"set"),r),r}function _t(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,bt(t,e,"get"))}function bt(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var St="created",gt="completed",Et=new WeakMap,Pt=new WeakMap,wt=new WeakMap,At=new WeakMap,Ot=new WeakSet,kt=new WeakSet,Tt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),yt(this,kt),yt(this,Ot),ht(this,Et,{writable:!0,value:0}),ht(this,Pt,{writable:!0,value:0}),ht(this,wt,{writable:!0,value:St}),ht(this,At,{writable:!0,value:0}),vt(this,Et,e)}var e,r;return e=t,(r=[{key:"state",get:function(){return _t(this,wt)}},{key:"start",value:function(){var t=this;_t(this,wt)!==St&&_t(this,wt)!==gt||(vt(this,Pt,_t(this,Et)),mt(this,Ot,It).call(this,"started"),vt(this,At,setInterval((function(){vt(t,Pt,_t(t,Pt)-1),t.emit("time_left_changed",_t(t,Pt)),_t(t,Pt)<=0&&(mt(t,kt,Dt).call(t),mt(t,Ot,It).call(t,gt))}),1e3)))}},{key:"stop",value:function(){mt(this,kt,Dt).call(this),mt(this,Ot,It).call(this,"stopped")}}])&&ft(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function It(t){vt(this,wt,t),this.emit("state_changed",_t(this,wt))}function Dt(){vt(this,Pt,0),clearInterval(_t(this,At))}K().mixin(Tt.prototype);const Rt=Tt;function jt(t){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jt(t)}function Lt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nt(n.key),n)}}function Nt(t){var e=function(t,e){if("object"!=jt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==jt(e)?e:String(e)}function Ct(t,e){return Ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ct(t,e)}function Bt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mt(t){return Mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Mt(t)}function Gt(t,e){Wt(t,e),e.add(t)}function Ft(t,e,r){Wt(t,e),e.set(t,r)}function Wt(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ut(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Vt(t,e,"set"),r),r}function zt(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Ht(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Vt(t,e,"get"))}function Vt(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Yt=new WeakMap,xt=new WeakMap,Kt=new WeakSet,Zt=new WeakSet,Jt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ct(t,e)}(l,t);var e,r,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Mt(o);if(s){var r=Mt(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===jt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Bt(t)}(this,t)});function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),Gt(Bt(e=c.call(this,t)),Zt),Gt(Bt(e),Kt),Ft(Bt(e),Yt,{writable:!0,value:void 0}),Ft(Bt(e),xt,{writable:!0,value:60}),e._platformBridge.on(n.INTERSTITIAL_STATE_CHANGED,(function(t){t===i.CLOSED&&Ht(Bt(e),xt)>0&&zt(Bt(e),Kt,qt).call(Bt(e)),e.emit(n.INTERSTITIAL_STATE_CHANGED,t)})),e._platformBridge.on(n.REWARDED_STATE_CHANGED,(function(t){return e.emit(n.REWARDED_STATE_CHANGED,t)})),e._platformBridge.on(n.BANNER_STATE_CHANGED,(function(t){return e.emit(n.BANNER_STATE_CHANGED,t)})),e}return e=l,(r=[{key:"isBannerSupported",get:function(){return this._platformBridge.isBannerSupported}},{key:"bannerState",get:function(){return this._platformBridge.bannerState}},{key:"interstitialState",get:function(){return this._platformBridge.interstitialState}},{key:"rewardedState",get:function(){return this._platformBridge.rewardedState}},{key:"minimumDelayBetweenInterstitial",get:function(){return Ht(this,xt)}},{key:"setMinimumDelayBetweenInterstitial",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(void 0!==e)return void this.setMinimumDelayBetweenInterstitial(e)}var r=jt(t),n=Ht(this,xt);switch(r){case"number":n=t;break;case"string":if(n=parseInt(t,10),Number.isNaN(n))return;break;default:return}Ut(this,xt,n),Ht(this,Yt)&&(Ht(this,Yt).stop(),zt(this,Kt,qt).call(this))}},{key:"showBanner",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return void this.showBanner(e)}this.bannerState!==u.LOADING&&this.bannerState!==u.SHOWN&&(this._platformBridge._setBannerState(u.LOADING),this.isBannerSupported?this._platformBridge.showBanner(t):this._platformBridge._setBannerState(u.FAILED))}},{key:"hideBanner",value:function(){this.bannerState!==u.LOADING&&this.bannerState!==u.HIDDEN&&this.isBannerSupported&&this._platformBridge.hideBanner()}},{key:"showInterstitial",value:function(t){if(!zt(this,Zt,Xt).call(this)){if(t){var e=t[this._platformBridge.platformId];if(e)return void this.showInterstitial(e)}var r=!1;t&&"boolean"==typeof t.ignoreDelay&&(r=t.ignoreDelay),this._platformBridge._setInterstitialState(i.LOADING),!Ht(this,Yt)||Ht(this,Yt).state===gt||r?this._platformBridge.showInterstitial():this._platformBridge._setInterstitialState(i.FAILED)}}},{key:"showRewarded",value:function(){zt(this,Zt,Xt).call(this)||(this._platformBridge._setRewardedState(a.LOADING),this._platformBridge.showRewarded())}}])&&Lt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(L);function qt(){Ut(this,Yt,new Rt(Ht(this,xt))),Ht(this,Yt).start()}function Xt(){return this.interstitialState===i.LOADING||this.interstitialState===i.OPENED||!![a.LOADING,a.OPENED,a.REWARDED].includes(this.rewardedState)}K().mixin(Jt.prototype);const $t=Jt;function Qt(t){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qt(t)}function te(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ee(n.key),n)}}function ee(t){var e=function(t,e){if("object"!=Qt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Qt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Qt(e)?e:String(e)}function re(t,e){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},re(t,e)}function ne(t){return ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ne(t)}const oe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&re(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ne(n);if(o){var r=ne(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Qt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isInviteFriendsSupported",get:function(){return this._platformBridge.isInviteFriendsSupported}},{key:"isJoinCommunitySupported",get:function(){return this._platformBridge.isJoinCommunitySupported}},{key:"isShareSupported",get:function(){return this._platformBridge.isShareSupported}},{key:"isCreatePostSupported",get:function(){return this._platformBridge.isCreatePostSupported}},{key:"isAddToHomeScreenSupported",get:function(){return this._platformBridge.isAddToHomeScreenSupported}},{key:"isAddToFavoritesSupported",get:function(){return this._platformBridge.isAddToFavoritesSupported}},{key:"isRateSupported",get:function(){return this._platformBridge.isRateSupported}},{key:"isExternalLinksAllowed",get:function(){return this._platformBridge.isExternalLinksAllowed}},{key:"inviteFriends",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.inviteFriends(e)}return this._platformBridge.inviteFriends(t)}},{key:"joinCommunity",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.joinCommunity(e)}return this._platformBridge.joinCommunity(t)}},{key:"share",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.share(e)}return this._platformBridge.share(t)}},{key:"createPost",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.createPost(e)}return this._platformBridge.createPost(t)}},{key:"addToHomeScreen",value:function(){return this._platformBridge.addToHomeScreen()}},{key:"addToFavorites",value:function(){return this._platformBridge.addToFavorites()}},{key:"rate",value:function(){return this._platformBridge.rate()}}])&&te(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(L);function ie(t){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ie(t)}function ae(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ue(n.key),n)}}function ue(t){var e=function(t,e){if("object"!=ie(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ie(e)?e:String(e)}function se(t,e){return se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},se(t,e)}function ce(t){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ce(t)}const le=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&se(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ce(n);if(o){var r=ce(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ie(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"type",get:function(){return this._platformBridge.deviceType}}])&&ae(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(L);function fe(t){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fe(t)}function pe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ye(n.key),n)}}function ye(t){var e=function(t,e){if("object"!=fe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fe(e)?e:String(e)}function he(t,e){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},he(t,e)}function de(t){return de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},de(t)}const me=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&he(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=de(n);if(o){var r=de(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===fe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isLeaderboardSupported}},{key:"isNativePopupSupported",get:function(){return this._platformBridge.isLeaderboardNativePopupSupported}},{key:"isMultipleBoardsSupported",get:function(){return this._platformBridge.isLeaderboardMultipleBoardsSupported}},{key:"isSetScoreSupported",get:function(){return this._platformBridge.isLeaderboardSetScoreSupported}},{key:"isGetScoreSupported",get:function(){return this._platformBridge.isLeaderboardGetScoreSupported}},{key:"isGetEntriesSupported",get:function(){return this._platformBridge.isLeaderboardGetEntriesSupported}},{key:"setScore",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.setScore(e)}return this._platformBridge.setLeaderboardScore(t)}},{key:"getScore",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.getScore(e)}return this._platformBridge.getLeaderboardScore(t)}},{key:"getEntries",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.getEntries(e)}return this._platformBridge.getLeaderboardEntries(t)}},{key:"showNativePopup",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.showNativePopup(e)}return this._platformBridge.showLeaderboardNativePopup(t)}}])&&pe(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(L);function ve(t){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ve(t)}function _e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,be(n.key),n)}}function be(t){var e=function(t,e){if("object"!=ve(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ve(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ve(e)?e:String(e)}function Se(t,e){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Se(t,e)}function ge(t){return ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ge(t)}const Ee=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Se(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ge(n);if(o){var r=ge(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ve(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isPaymentsSupported}},{key:"purchase",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.purchase(e)}return this._platformBridge.purchase(t)}},{key:"getPurchases",value:function(){return this._platformBridge.getPaymentsPurchases()}},{key:"getCatalog",value:function(){return this._platformBridge.getPaymentsCatalog()}},{key:"consumePurchase",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.consumePurchase(e)}return this._platformBridge.consumePurchase(t)}}])&&_e(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(L);function Pe(t){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pe(t)}function we(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ae(n.key),n)}}function Ae(t){var e=function(t,e){if("object"!=Pe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Pe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Pe(e)?e:String(e)}function Oe(t,e){return Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Oe(t,e)}function ke(t){return ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ke(t)}const Te=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oe(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ke(n);if(o){var r=ke(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Pe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isRemoteConfigSupported}},{key:"get",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.get(e)}return this._platformBridge.getRemoteConfig(t)}}])&&we(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(L);function Ie(t){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ie(t)}function De(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Re(n.key),n)}}function Re(t){var e=function(t,e){if("object"!=Ie(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ie(e)?e:String(e)}function je(t,e){return je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},je(t,e)}function Le(t){return Le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Le(t)}const Ne=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&je(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Le(n);if(o){var r=Le(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ie(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isClipboardSupported}},{key:"read",value:function(){return this._platformBridge.clipboardRead()}},{key:"write",value:function(t){return this._platformBridge.clipboardWrite(t)}}])&&De(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(L);function Ce(t){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ce(t)}function Be(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Me(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fe(n.key),n)}}function Ge(t,e,r){return(e=Fe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fe(t){var e=function(t,e){if("object"!=Ce(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ce(e)?e:String(e)}function We(t,e){var r=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}(t,e);return function(t,e){return e.get?e.get.call(t):e.value}(t,r)}var Ue=new WeakMap,ze=function(){function e(t){var r,i,a,u=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ge(this,"_isInitialized",!1),Ge(this,"_platformSdk",null),Ge(this,"_isPlayerAuthorized",!1),Ge(this,"_playerId",null),Ge(this,"_playerName",null),Ge(this,"_playerPhotos",[]),Ge(this,"_visibilityState",null),Ge(this,"_localStorage",null),Ge(this,"_defaultStorageType",s.LOCAL_STORAGE),Ge(this,"_platformStorageCachedData",null),Ge(this,"_isBannerSupported",!1),Ge(this,"_interstitialState",null),Ge(this,"_rewardedState",null),Ge(this,"_bannerState",null),a={writable:!0,value:{}},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,i=Ue),i.set(r,a);try{this._localStorage=window.localStorage}catch(t){}this._visibilityState="visible"===document.visibilityState?o.VISIBLE:o.HIDDEN,document.addEventListener("visibilitychange",(function(){u._visibilityState="visible"===document.visibilityState?o.VISIBLE:o.HIDDEN,u.emit(n.VISIBILITY_STATE_CHANGED,u._visibilityState)})),t&&(this._options=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Be(Object(r),!0).forEach((function(e){Ge(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Be(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t))}var r,l;return r=e,(l=[{key:"platformId",get:function(){return t.MOCK}},{key:"platformSdk",get:function(){return this._platformSdk}},{key:"platformLanguage",get:function(){var t=navigator.language;return"string"==typeof t?t.substring(0,2).toLowerCase():"en"}},{key:"platformPayload",get:function(){return new URL(window.location.href).searchParams.get("payload")}},{key:"platformTld",get:function(){return null}},{key:"visibilityState",get:function(){return this._visibilityState}},{key:"isPlayerAuthorizationSupported",get:function(){return!1}},{key:"isPlayerAuthorized",get:function(){return this._isPlayerAuthorized}},{key:"playerId",get:function(){return this._playerId}},{key:"playerName",get:function(){return this._playerName}},{key:"playerPhotos",get:function(){return this._playerPhotos}},{key:"defaultStorageType",get:function(){return this._defaultStorageType}},{key:"isBannerSupported",get:function(){return this._isBannerSupported}},{key:"bannerState",get:function(){return this._bannerState}},{key:"interstitialState",get:function(){return this._interstitialState}},{key:"rewardedState",get:function(){return this._rewardedState}},{key:"isInviteFriendsSupported",get:function(){return!1}},{key:"isJoinCommunitySupported",get:function(){return!1}},{key:"isShareSupported",get:function(){return!1}},{key:"isCreatePostSupported",get:function(){return!1}},{key:"isAddToHomeScreenSupported",get:function(){return!1}},{key:"isAddToFavoritesSupported",get:function(){return!1}},{key:"isRateSupported",get:function(){return!1}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"deviceType",get:function(){if(navigator&&navigator.userAgent){var t=navigator.userAgent.toLowerCase();if(/android|webos|iphone|ipod|blackberry|iemobile|opera mini/i.test(t))return c.MOBILE;if(/ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP)))/.test(t))return c.TABLET}return c.DESKTOP}},{key:"isLeaderboardSupported",get:function(){return!1}},{key:"isLeaderboardNativePopupSupported",get:function(){return!1}},{key:"isLeaderboardMultipleBoardsSupported",get:function(){return!1}},{key:"isLeaderboardSetScoreSupported",get:function(){return!1}},{key:"isLeaderboardGetScoreSupported",get:function(){return!1}},{key:"isLeaderboardGetEntriesSupported",get:function(){return!1}},{key:"isPaymentsSupported",get:function(){return!1}},{key:"isRemoteConfigSupported",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!0}},{key:"initialize",value:function(){return Promise.resolve()}},{key:"sendMessage",value:function(){return Promise.resolve()}},{key:"authorizePlayer",value:function(){return Promise.reject()}},{key:"isStorageSupported",value:function(t){switch(t){case s.LOCAL_STORAGE:return null!==this._localStorage;case s.PLATFORM_INTERNAL:default:return!1}}},{key:"isStorageAvailable",value:function(t){switch(t){case s.LOCAL_STORAGE:return null!==this._localStorage;case s.PLATFORM_INTERNAL:default:return!1}}},{key:"getDataFromStorage",value:function(t,e){if(e===s.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++)r.push(this._getDataFromLocalStorage(t[n]));return Promise.resolve(r)}var o=this._getDataFromLocalStorage(t);return Promise.resolve(o)}return Promise.reject(y)}return Promise.reject(y)}},{key:"setDataToStorage",value:function(t,e,r){if(r===s.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(t)){for(var n=0;n<t.length;n++)this._setDataToLocalStorage(t[n],e[n]);return Promise.resolve()}return this._setDataToLocalStorage(t,e),Promise.resolve()}return Promise.reject(y)}return Promise.reject(y)}},{key:"deleteDataFromStorage",value:function(t,e){if(e===s.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(t)){for(var r=0;r<t.length;r++)this._deleteDataFromLocalStorage(t[r]);return Promise.resolve()}return this._deleteDataFromLocalStorage(t),Promise.resolve()}return Promise.reject(y)}return Promise.reject(y)}},{key:"showBanner",value:function(){this._setBannerState(u.FAILED)}},{key:"hideBanner",value:function(){this._setBannerState(u.HIDDEN)}},{key:"showInterstitial",value:function(){this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){this._setRewardedState(a.FAILED)}},{key:"inviteFriends",value:function(){return Promise.reject()}},{key:"joinCommunity",value:function(){return Promise.reject()}},{key:"share",value:function(){return Promise.reject()}},{key:"createPost",value:function(){return Promise.reject()}},{key:"addToHomeScreen",value:function(){return Promise.reject()}},{key:"addToFavorites",value:function(){return Promise.reject()}},{key:"rate",value:function(){return Promise.reject()}},{key:"setLeaderboardScore",value:function(){return Promise.reject()}},{key:"getLeaderboardScore",value:function(){return Promise.reject()}},{key:"getLeaderboardEntries",value:function(){return Promise.reject()}},{key:"showLeaderboardNativePopup",value:function(){return Promise.reject()}},{key:"purchase",value:function(){return Promise.reject()}},{key:"getPaymentsPurchases",value:function(){return Promise.reject()}},{key:"getPaymentsCatalog",value:function(){return Promise.reject()}},{key:"consumePurchase",value:function(){return Promise.reject()}},{key:"getRemoteConfig",value:function(){return Promise.reject()}},{key:"clipboardRead",value:function(){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.readText():Promise.reject()}},{key:"clipboardWrite",value:function(t){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.writeText(t):Promise.reject()}},{key:"_getDataFromLocalStorage",value:function(t){var e=this._localStorage.getItem(t);if("string"==typeof e)try{e=JSON.parse(e)}catch(t){}return e}},{key:"_setDataToLocalStorage",value:function(t,e){this._localStorage.setItem(t,"object"===Ce(e)?JSON.stringify(e):e)}},{key:"_deleteDataFromLocalStorage",value:function(t){this._localStorage.removeItem(t)}},{key:"_setInterstitialState",value:function(t){this._interstitialState===t&&t!==i.FAILED||(this._interstitialState=t,this.emit(n.INTERSTITIAL_STATE_CHANGED,this._interstitialState))}},{key:"_setRewardedState",value:function(t){this._rewardedState===t&&t!==a.FAILED||(this._rewardedState=t,this.emit(n.REWARDED_STATE_CHANGED,this._rewardedState))}},{key:"_setBannerState",value:function(t){this._bannerState===t&&t!==u.FAILED||(this._bannerState=t,this.emit(n.BANNER_STATE_CHANGED,this._bannerState))}},{key:"_createPromiseDecorator",value:function(t){var e=new I;return We(this,Ue)[t]=e,e}},{key:"_getPromiseDecorator",value:function(t){return We(this,Ue)[t]}},{key:"_resolvePromiseDecorator",value:function(t,e){We(this,Ue)[t]&&(We(this,Ue)[t].resolve(e),delete We(this,Ue)[t])}},{key:"_rejectPromiseDecorator",value:function(t,e){We(this,Ue)[t]&&(We(this,Ue)[t].reject(e),delete We(this,Ue)[t])}}])&&Me(r.prototype,l),Object.defineProperty(r,"prototype",{writable:!1}),e}();K().mixin(ze.prototype);const He=ze;var Ve=function(t){return new Promise((function(e){var r=document.createElement("script");r.src=t,r.addEventListener("load",e),document.head.appendChild(r)}))},Ye=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length<=0?Promise.resolve():new Promise((function(t){var r=setInterval((function(){for(var n=window,o=0;o<e.length;o++){var i=n[e[o]];if(!i)return;n=i}t(),clearInterval(r)}),100)}))};function xe(t){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xe(t)}function Ke(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ze(n.key),n)}}function Ze(t){var e=function(t,e){if("object"!=xe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xe(e)?e:String(e)}function Je(){return Je="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$e(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Je.apply(this,arguments)}function qe(t,e){return qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qe(t,e)}function Xe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $e(t){return $e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$e(t)}function Qe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function tr(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function er(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,rr(t,e,"get"))}function rr(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var nr=new WeakMap,or=new WeakSet;function ir(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"result",i=this._getPromiseDecorator(t);return i||(i=this._createPromiseDecorator(t),this._platformSdk.send(e,n).then((function(e){e[o]?r._resolvePromiseDecorator(t):r._rejectPromiseDecorator(t)})).catch((function(e){r._rejectPromiseDecorator(t,e)}))),i.promise}const ar=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qe(t,e)}(y,e);var r,n,o,l,p=(o=y,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=$e(o);if(l){var r=$e(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===xe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Xe(t)}(this,t)});function y(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Qe(e=Xe(t=p.call.apply(p,[this].concat(o))),r=or),r.add(e),function(t,e,r){Qe(t,e),e.set(t,{writable:!0,value:void 0})}(Xe(t),nr),t}return r=y,(n=[{key:"platformId",get:function(){return t.VK}},{key:"platformLanguage",get:function(){var t=new URL(window.location.href);if(t.searchParams.has("language")){var e=t.searchParams.get("language"),r=0;try{r=parseInt(e,10)}catch(t){r=0}switch(r){case 0:default:return"ru";case 1:return"uk";case 2:return"be";case 3:return"en"}}return Je($e(y.prototype),"platformLanguage",this)}},{key:"platformPayload",get:function(){var t=new URL(window.location.href);return t.searchParams.has("hash")?t.searchParams.get("hash"):Je($e(y.prototype),"platformPayload",this)}},{key:"deviceType",get:function(){switch(er(this,nr)){case"html5_ios":case"html5_android":case"html5_mobile":return c.MOBILE;case"web":return c.DESKTOP;default:return Je($e(y.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPlayerAuthorized",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isCreatePostSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return"html5_android"===er(this,nr)}},{key:"isAddToFavoritesSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!0}},{key:"isLeaderboardSupported",get:function(){return!0}},{key:"isLeaderboardNativePopupSupported",get:function(){return this.deviceType===c.MOBILE}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e,r,n,o=this._getPromiseDecorator(f.INITIALIZE);if(!o){o=this._createPromiseDecorator(f.INITIALIZE);var i=new URL(window.location.href);i.searchParams.has("platform")&&(e=this,r=nr,n=i.searchParams.get("platform"),function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(e,rr(e,r,"set"),n)),Ve("https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js").then((function(){Ye("vkBridge").then((function(){t._platformSdk=window.vkBridge,t._platformSdk.send("VKWebAppInit").then((function(){t._isBannerSupported=!0,t._platformSdk.send("VKWebAppGetUserInfo").then((function(e){e&&(t._playerId=e.id,t._playerName="".concat(e.first_name," ").concat(e.last_name),e.photo_100&&t._playerPhotos.push(e.photo_100),e.photo_200&&t._playerPhotos.push(e.photo_200),e.photo_max_orig&&t._playerPhotos.push(e.photo_max_orig))})).finally((function(){t._isInitialized=!0,t._defaultStorageType=s.PLATFORM_INTERNAL,t._resolvePromiseDecorator(f.INITIALIZE)}))}))}))}))}return o.promise}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(t){return t===s.PLATFORM_INTERNAL||Je($e(y.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===s.PLATFORM_INTERNAL||Je($e(y.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e){var r=this;return e===s.PLATFORM_INTERNAL?new Promise((function(e,n){var o=Array.isArray(t)?t:[t];r._platformSdk.send("VKWebAppStorageGet",{keys:o}).then((function(r){if(Array.isArray(t)){var n=[];return o.forEach((function(t){var e=r.keys.findIndex((function(e){return e.key===t}));if(e<0)n.push(null);else if(""!==r.keys[e].value){var o;try{o=JSON.parse(r.keys[e].value)}catch(t){o=r.keys[e].value}n.push(o)}else n.push(null)})),void e(n)}if(""!==r.keys[0].value){var i;try{i=JSON.parse(r.keys[0].value)}catch(t){i=r.keys[0].value}e(i)}else e(null)})).catch((function(t){t&&t.error_data&&t.error_data.error_reason?n(t.error_data.error_reason):n()}))})):Je($e(y.prototype),"getDataFromStorage",this).call(this,t,e)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;if(r===s.PLATFORM_INTERNAL){if(Array.isArray(t)){for(var o=[],i=0;i<t.length;i++){var a={key:t[i],value:e[i]};"string"!=typeof e[i]&&(a.value=JSON.stringify(e[i])),o.push(this._platformSdk.send("VKWebAppStorageSet",a))}return Promise.all(o)}var u={key:t,value:e};return"string"!=typeof e&&(u.value=JSON.stringify(e)),new Promise((function(t,e){n._platformSdk.send("VKWebAppStorageSet",u).then((function(){t()})).catch((function(t){t&&t.error_data&&t.error_data.error_reason?e(t.error_data.error_reason):e()}))}))}return Je($e(y.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){if(e===s.PLATFORM_INTERNAL){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++)r.push(this.setDataToStorage(t[n],"",e));return Promise.all(r)}return this.setDataToStorage(t,"",e)}return Je($e(y.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showBanner",value:function(t){var e=this,r="bottom",n="resize",o=!1;t&&("string"==typeof t.position&&(r=t.position),"string"==typeof t.layoutType&&(n=t.layoutType),"boolean"==typeof t.canClose&&(o=t.canClose)),this._platformSdk.send("VKWebAppShowBannerAd",{banner_location:r,layout_type:n,can_close:o}).then((function(t){t.result?e._setBannerState(u.SHOWN):e._setBannerState(u.FAILED)})).catch((function(){e._setBannerState(u.FAILED)}))}},{key:"hideBanner",value:function(){var t=this;this._platformSdk.send("VKWebAppHideBannerAd").then((function(e){e.result&&t._setBannerState(u.HIDDEN)}))}},{key:"showInterstitial",value:function(){var t=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"interstitial"}).then((function(e){e.result&&t._setInterstitialState(i.OPENED)})).finally((function(){t._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"interstitial"}).then((function(e){t._setInterstitialState(e.result?i.CLOSED:i.FAILED)})).catch((function(){t._setInterstitialState(i.FAILED)}))}))}},{key:"showRewarded",value:function(){var t=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(e){e.result&&t._setRewardedState(a.OPENED)})).finally((function(){t._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(e){e.result?(t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setRewardedState(a.FAILED)})).catch((function(){t._setRewardedState(a.FAILED)}))}))}},{key:"inviteFriends",value:function(){return tr(this,or,ir).call(this,f.INVITE_FRIENDS,"VKWebAppShowInviteBox",{},"success")}},{key:"joinCommunity",value:function(t){if(!t||!t.groupId)return Promise.reject();var e=t.groupId;return"string"==typeof e&&(e=parseInt(e,10),Number.isNaN(e))?Promise.reject():tr(this,or,ir).call(this,f.JOIN_COMMUNITY,"VKWebAppJoinGroup",{group_id:e}).then((function(){window.open("https://vk.com/public".concat(e))}))}},{key:"share",value:function(t){var e={};return t&&t.link&&(e.link=t.link),tr(this,or,ir).call(this,f.SHARE,"VKWebAppShare",e,"type")}},{key:"createPost",value:function(t){var e={};return t&&t.message&&(e.message=t.message),t&&t.attachments&&(e.attachments=t.attachments),tr(this,or,ir).call(this,f.CREATE_POST,"VKWebAppShowWallPostBox",e,"post_id")}},{key:"addToHomeScreen",value:function(){return this.isAddToHomeScreenSupported?tr(this,or,ir).call(this,f.ADD_TO_HOME_SCREEN,"VKWebAppAddToHomeScreen"):Promise.reject()}},{key:"addToFavorites",value:function(){return tr(this,or,ir).call(this,f.ADD_TO_FAVORITES,"VKWebAppAddToFavorites")}},{key:"showLeaderboardNativePopup",value:function(t){if(!this.isLeaderboardNativePopupSupported)return Promise.reject();if(!t||!t.userResult)return Promise.reject();var e={user_result:t.userResult};return"boolean"==typeof t.global&&(e.global=t.global?1:0),tr(this,or,ir).call(this,f.SHOW_LEADERBOARD_NATIVE_POPUP,"VKWebAppShowLeaderBoardBox",e)}},{key:"clipboardWrite",value:function(t){return tr(this,or,ir).call(this,f.CLIPBOARD_WRITE,"VKWebAppCopyText",{text:t})}}])&&Ke(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),y}(He);function ur(t){return ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ur(t)}function sr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function cr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?sr(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=fr(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function lr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fr(n.key),n)}}function fr(t){var e=function(t,e){if("object"!=ur(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ur(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ur(e)?e:String(e)}function pr(){return pr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dr(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},pr.apply(this,arguments)}function yr(t,e){return yr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yr(t,e)}function hr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dr(t){return dr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dr(t)}function mr(t,e,r){vr(t,e),e.set(t,r)}function vr(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _r(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,gr(t,e,"set"),r),r}function br(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Sr(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,gr(t,e,"get"))}function gr(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Er=new WeakMap,Pr=new WeakMap,wr=new WeakMap,Ar=new WeakMap,Or=new WeakSet;function kr(t){var e=this;return new Promise((function(r){var n={scopes:!1};t&&"boolean"==typeof t.scopes&&(n.scopes=t.scopes),e._platformSdk.getPlayer(n).then((function(t){e._playerId=t.getUniqueID(),e._isPlayerAuthorized="lite"!==t.getMode(),e._defaultStorageType=e._isPlayerAuthorized?s.PLATFORM_INTERNAL:s.LOCAL_STORAGE;var r=t.getName();""!==r&&(e._playerName=r),e._playerPhotos=[];var n=t.getPhoto("small"),o=t.getPhoto("medium"),i=t.getPhoto("large");n&&e._playerPhotos.push(n),o&&e._playerPhotos.push(o),i&&e._playerPhotos.push(i),_r(e,Pr,t)})).finally((function(){r()}))}))}const Tr=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yr(t,e)}(h,e);var r,n,o,p,y=(o=h,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=dr(o);if(p){var r=dr(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ur(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return hr(t)}(this,t)});function h(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return vr(e=hr(t=y.call.apply(y,[this].concat(o))),r=Or),r.add(e),mr(hr(t),Er,{writable:!0,value:!1}),mr(hr(t),Pr,{writable:!0,value:null}),mr(hr(t),wr,{writable:!0,value:null}),mr(hr(t),Ar,{writable:!0,value:null}),t}return r=h,(n=[{key:"platformId",get:function(){return t.YANDEX}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.lang.toLowerCase():pr(dr(h.prototype),"platformLanguage",this)}},{key:"platformTld",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.tld.toLowerCase():pr(dr(h.prototype),"platformTld",this)}},{key:"deviceType",get:function(){switch(this._platformSdk&&this._platformSdk.deviceInfo.type){case c.DESKTOP:return c.DESKTOP;case c.MOBILE:return c.MOBILE;case c.TABLET:return c.TABLET;case c.TV:return c.TV;default:return pr(dr(h.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return Sr(this,Er)}},{key:"isRateSupported",get:function(){return!0}},{key:"isLeaderboardSupported",get:function(){return!0}},{key:"isLeaderboardMultipleBoardsSupported",get:function(){return!0}},{key:"isLeaderboardSetScoreSupported",get:function(){return!0}},{key:"isLeaderboardGetScoreSupported",get:function(){return!0}},{key:"isLeaderboardGetEntriesSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isRemoteConfigSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(f.INITIALIZE);return e||(e=this._createPromiseDecorator(f.INITIALIZE),Ve("https://yandex.ru/games/sdk/v2").then((function(){Ye("YaGames","init").then((function(){window.YaGames.init().then((function(e){var r;t._platformSdk=e;var n=br(t,Or,kr).call(t),o=null===(r=t._platformSdk.features.PluginEngineDataReporterAPI)||void 0===r?void 0:r.report({engineName:"",engineVersion:"",pluginName:"instant-games-bridge",pluginVersion:"1.13.0"}),i=t._platformSdk.shortcut.canShowPrompt().then((function(e){_r(t,Er,e.canShow)})),a=new Promise((function(t){setTimeout(t,1e3)})),s=Promise.race([i,a]),c=t._platformSdk.getLeaderboards().then((function(e){_r(t,wr,e)})),l=t._platformSdk.getPayments().then((function(e){_r(t,Ar,e)}));t._isBannerSupported=!0;var p=t._platformSdk.adv.getBannerAdvStatus().then((function(e){e.stickyAdvIsShowing&&t._setBannerState(u.SHOWN)}));Promise.all([n,o,s,c,l,p]).finally((function(){t._isInitialized=!0,t._resolvePromiseDecorator(f.INITIALIZE)}))}))}))}))),e.promise}},{key:"sendMessage",value:function(t){var e;return t===l.GAME_READY?(null===(e=this._platformSdk.features.LoadingAPI)||void 0===e||e.ready(),Promise.resolve()):pr(dr(h.prototype),"sendMessage",this).call(this,t)}},{key:"authorizePlayer",value:function(t){var e=this,r=this._getPromiseDecorator(f.AUTHORIZE_PLAYER);return r||(r=this._createPromiseDecorator(f.AUTHORIZE_PLAYER),this._isPlayerAuthorized?br(this,Or,kr).call(this,t).then((function(){e._resolvePromiseDecorator(f.AUTHORIZE_PLAYER)})):this._platformSdk.auth.openAuthDialog().then((function(){br(e,Or,kr).call(e,t).then((function(){e._resolvePromiseDecorator(f.AUTHORIZE_PLAYER)}))})).catch((function(t){e._rejectPromiseDecorator(f.AUTHORIZE_PLAYER,t)}))),r.promise}},{key:"isStorageSupported",value:function(t){return t===s.PLATFORM_INTERNAL||pr(dr(h.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===s.PLATFORM_INTERNAL?this._isPlayerAuthorized:pr(dr(h.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e){var r=this;return e===s.PLATFORM_INTERNAL?this._isPlayerAuthorized?new Promise((function(e,n){if(r._platformStorageCachedData){if(Array.isArray(t)){for(var o=[],i=0;i<t.length;i++){var a=void 0===r._platformStorageCachedData[t[i]]?null:r._platformStorageCachedData[t[i]];o.push(a)}return void e(o)}e(void 0===r._platformStorageCachedData[t]?null:r._platformStorageCachedData[t])}else Sr(r,Pr)?Sr(r,Pr).getData().then((function(n){if(r._platformStorageCachedData=n,Array.isArray(t)){for(var o=[],i=0;i<t.length;i++){var a=void 0===r._platformStorageCachedData[t[i]]?null:r._platformStorageCachedData[t[i]];o.push(a)}e(o)}else e(void 0===r._platformStorageCachedData[t]?null:r._platformStorageCachedData[t])})).catch((function(t){n(t)})):n()})):Promise.reject():pr(dr(h.prototype),"getDataFromStorage",this).call(this,t,e)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===s.PLATFORM_INTERNAL?new Promise((function(r,o){if(Sr(n,Pr)){var i=null!==n._platformStorageCachedData?cr({},n._platformStorageCachedData):{};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;Sr(n,Pr).setData(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(t){o(t)}))}else o()})):pr(dr(h.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===s.PLATFORM_INTERNAL?new Promise((function(e,n){if(Sr(r,Pr)){var o=null!==r._platformStorageCachedData?cr({},r._platformStorageCachedData):{};if(Array.isArray(t))for(var i=0;i<t.length;i++)delete o[t[i]];else delete o[t];Sr(r,Pr).setData(o).then((function(){r._platformStorageCachedData=o,e()})).catch((function(t){n(t)}))}else n()})):pr(dr(h.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showBanner",value:function(){var t=this;this._platformSdk.adv.showBannerAdv().then((function(e){e.stickyAdvIsShowing?t._setBannerState(u.SHOWN):t._setBannerState(u.FAILED)})).catch((function(){t._setBannerState(u.FAILED)}))}},{key:"hideBanner",value:function(){var t=this;this._platformSdk.adv.hideBannerAdv().then((function(e){e.stickyAdvIsShowing||t._setBannerState(u.HIDDEN)}))}},{key:"showInterstitial",value:function(){var t=this;this._platformSdk.adv.showFullscreenAdv({callbacks:{onOpen:function(){t._setInterstitialState(i.OPENED)},onClose:function(e){e?t._setInterstitialState(i.CLOSED):t._setInterstitialState(i.FAILED)},onError:function(t){console.error(t)}}})}},{key:"showRewarded",value:function(){var t=this;this._platformSdk.adv.showRewardedVideo({callbacks:{onOpen:function(){t._setRewardedState(a.OPENED)},onRewarded:function(){t._setRewardedState(a.REWARDED)},onClose:function(){t._setRewardedState(a.CLOSED)},onError:function(){t._setRewardedState(a.FAILED)}}})}},{key:"addToHomeScreen",value:function(){var t=this;if(!this.isAddToHomeScreenSupported)return Promise.reject();var e=this._getPromiseDecorator(f.ADD_TO_HOME_SCREEN);return e||(e=this._createPromiseDecorator(f.ADD_TO_HOME_SCREEN),this._platformSdk.shortcut.showPrompt().then((function(e){"accepted"!==e.outcome?t._rejectPromiseDecorator(f.ADD_TO_HOME_SCREEN):t._resolvePromiseDecorator(f.ADD_TO_HOME_SCREEN)})).catch((function(e){t._rejectPromiseDecorator(f.ADD_TO_HOME_SCREEN,e)}))),e.promise}},{key:"rate",value:function(){var t=this,e=this._getPromiseDecorator(f.RATE);return e||(e=this._createPromiseDecorator(f.RATE),this._platformSdk.feedback.canReview().then((function(e){e.value?t._platformSdk.feedback.requestReview().then((function(e){e.feedbackSent?t._resolvePromiseDecorator(f.RATE):t._rejectPromiseDecorator(f.RATE)})).catch((function(e){t._rejectPromiseDecorator(f.RATE,e)})):t._rejectPromiseDecorator(f.RATE,e.reason)})).catch((function(e){t._rejectPromiseDecorator(f.RATE,e)}))),e.promise}},{key:"setLeaderboardScore",value:function(t){var e=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!(Sr(this,wr)&&t&&t.score&&t.leaderboardName))return Promise.reject();var r=this._getPromiseDecorator(f.SET_LEADERBOARD_SCORE);return r||(r=this._createPromiseDecorator(f.SET_LEADERBOARD_SCORE),"string"==typeof t.score&&(t.score=parseInt(t.score,10)),Sr(this,wr).setLeaderboardScore(t.leaderboardName,t.score).then((function(){e._resolvePromiseDecorator(f.SET_LEADERBOARD_SCORE)})).catch((function(t){e._rejectPromiseDecorator(f.SET_LEADERBOARD_SCORE,t)}))),r.promise}},{key:"getLeaderboardScore",value:function(t){var e=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!Sr(this,wr)||!t||!t.leaderboardName)return Promise.reject();var r=this._getPromiseDecorator(f.GET_LEADERBOARD_SCORE);return r||(r=this._createPromiseDecorator(f.GET_LEADERBOARD_SCORE),Sr(this,wr).getLeaderboardPlayerEntry(t.leaderboardName).then((function(t){e._resolvePromiseDecorator(f.GET_LEADERBOARD_SCORE,t.score)})).catch((function(t){e._rejectPromiseDecorator(f.GET_LEADERBOARD_SCORE,t)}))),r.promise}},{key:"getLeaderboardEntries",value:function(t){var e=this;if(!Sr(this,wr)||!t||!t.leaderboardName)return Promise.reject();var r=this._getPromiseDecorator(f.GET_LEADERBOARD_ENTRIES);if(!r){r=this._createPromiseDecorator(f.GET_LEADERBOARD_ENTRIES);var n={includeUser:!1,quantityAround:5,quantityTop:5};"boolean"==typeof t.includeUser&&(n.includeUser=t.includeUser),"string"==typeof t.quantityAround&&(t.quantityAround=parseInt(t.quantityAround,10)),"number"==typeof t.quantityAround&&(n.quantityAround=t.quantityAround),"string"==typeof t.quantityTop&&(t.quantityTop=parseInt(t.quantityTop,10)),"number"==typeof t.quantityTop&&(n.quantityTop=t.quantityTop),Sr(this,wr).getLeaderboardEntries(t.leaderboardName,n).then((function(t){var r=null;t&&t.entries.length>0&&(r=t.entries.map((function(t){var e=[],r=t.player.getAvatarSrc("small"),n=t.player.getAvatarSrc("medium"),o=t.player.getAvatarSrc("large");return r&&e.push(r),n&&e.push(n),o&&e.push(o),{id:t.player.uniqueID,score:t.score,rank:t.rank,name:t.player.publicName,photos:e}}))),e._resolvePromiseDecorator(f.GET_LEADERBOARD_ENTRIES,r)})).catch((function(t){e._rejectPromiseDecorator(f.GET_LEADERBOARD_ENTRIES,t)}))}return r.promise}},{key:"purchase",value:function(t){var e=this;if(!Sr(this,Ar)||!t.id)return Promise.reject();var r=this._getPromiseDecorator(f.PURCHASE);return r||(r=this._createPromiseDecorator(f.PURCHASE),Sr(this,Ar).purchase(t).then((function(t){e._resolvePromiseDecorator(f.PURCHASE,t)})).catch((function(t){e._rejectPromiseDecorator(f.PURCHASE,t)}))),r.promise}},{key:"getPaymentsPurchases",value:function(){var t=this;if(!Sr(this,Ar))return Promise.reject();var e=this._getPromiseDecorator(f.GET_PURCHASES);return e||(e=this._createPromiseDecorator(f.GET_PURCHASES),Sr(this,Ar).getPurchases().then((function(e){t._resolvePromiseDecorator(f.GET_PURCHASES,e)})).catch((function(e){t._rejectPromiseDecorator(f.GET_PURCHASES,e)}))),e.promise}},{key:"getPaymentsCatalog",value:function(){var t=this;if(!Sr(this,Ar))return Promise.reject();var e=this._getPromiseDecorator(f.GET_CATALOG);return e||(e=this._createPromiseDecorator(f.GET_CATALOG),Sr(this,Ar).getCatalog().then((function(e){t._resolvePromiseDecorator(f.GET_CATALOG,e)})).catch((function(e){t._rejectPromiseDecorator(f.GET_CATALOG,e)}))),e.promise}},{key:"consumePurchase",value:function(t){var e=this;if(!Sr(this,Ar)||!t.purchaseToken)return Promise.reject();var r=this._getPromiseDecorator(f.CONSUME_PURCHASE);return r||(r=this._createPromiseDecorator(f.CONSUME_PURCHASE),Sr(this,Ar).consumePurchase(t.purchaseToken).then((function(t){e._resolvePromiseDecorator(f.CONSUME_PURCHASE,t)})).catch((function(t){e._rejectPromiseDecorator(f.CONSUME_PURCHASE,t)}))),r.promise}},{key:"getRemoteConfig",value:function(t){var e=this;if(!this._platformSdk)return Promise.reject();if(t&&(null==t||!t.defaultFlags)&&(null==t||!t.clientFeatures))return Promise.reject();var r=this._getPromiseDecorator(f.GET_REMOTE_CONFIG);return r||(r=this._createPromiseDecorator(f.GET_REMOTE_CONFIG),(t?this._platformSdk.getFlags(t):this._platformSdk.getFlags()).then((function(t){e._resolvePromiseDecorator(f.GET_REMOTE_CONFIG,t)})).catch((function(t){e._rejectPromiseDecorator(f.GET_REMOTE_CONFIG,t)}))),r.promise}},{key:"clipboardWrite",value:function(t){var e=this,r=this._getPromiseDecorator(f.CLIPBOARD_WRITE);return r||(r=this._createPromiseDecorator(f.CLIPBOARD_WRITE),this._platformSdk.clipboard.writeText(t).then((function(){e._resolvePromiseDecorator(f.CLIPBOARD_WRITE,!0)})).catch((function(t){e._rejectPromiseDecorator(f.CLIPBOARD_WRITE,t)}))),r.promise}}])&&lr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),h}(He);class Ir extends Error{}function Dr(t){return Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dr(t)}function Rr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jr(n.key),n)}}function jr(t){var e=function(t,e){if("object"!=Dr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Dr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Dr(e)?e:String(e)}function Lr(){return Lr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Br(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Lr.apply(this,arguments)}function Nr(t,e){return Nr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nr(t,e)}function Cr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Br(t){return Br=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Br(t)}function Mr(t,e,r){Gr(t,e),e.set(t,r)}function Gr(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Fr(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Wr(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,zr(t,e,"set"),r),r}function Ur(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,zr(t,e,"get"))}function zr(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}Ir.prototype.name="InvalidTokenError";var Hr=new WeakMap,Vr=new WeakMap,Yr=new WeakMap,xr=new WeakSet;function Kr(){var t=this;return Ur(this,Vr)?new Promise((function(e,r){t._platformSdk.user.getUserToken().then((function(r){var n=function(t,e){if("string"!=typeof t)throw new Ir("Invalid token specified: must be a string");e||(e={});const r=!0===e.header?0:1,n=t.split(".")[r];if("string"!=typeof n)throw new Ir(`Invalid token specified: missing part #${r+1}`);let o;try{o=function(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(t){return decodeURIComponent(atob(t).replace(/(.)/g,((t,e)=>{let r=e.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(e)}catch(t){return atob(e)}}(n)}catch(t){throw new Ir(`Invalid token specified: invalid base64 for part #${r+1} (${t.message})`)}try{return JSON.parse(o)}catch(t){throw new Ir(`Invalid token specified: invalid json for part #${r+1} (${t.message})`)}}(r);t._isPlayerAuthorized=!0,t._defaultStorageType=t._isPlayerAuthorized?s.PLATFORM_INTERNAL:s.LOCAL_STORAGE,t._isPlayerAuthorized&&n.userId&&(t._playerId=n.userId),t._isPlayerAuthorized&&n.username&&(t._playerName=n.username),t._isPlayerAuthorized&&n.profilePictureUrl&&(t._playerPhotos=[n.profilePictureUrl]),e()})).catch((function(t){r(t)}))})):Promise.reject()}const Zr=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nr(t,e)}(h,e);var r,n,o,p,y=(o=h,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Br(o);if(p){var r=Br(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Dr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Cr(t)}(this,t)});function h(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return Gr(e=Cr(t=y.call.apply(y,[this].concat(o))),r=xr),r.add(e),Mr(Cr(t),Hr,{writable:!0,value:!1}),Mr(Cr(t),Vr,{writable:!0,value:!1}),Mr(Cr(t),Yr,{writable:!0,value:{adStarted:function(){Ur(Cr(t),Hr)?t._setRewardedState(a.OPENED):t._setInterstitialState(i.OPENED)},adFinished:function(){Ur(Cr(t),Hr)?(t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setInterstitialState(i.CLOSED)},adError:function(){Ur(Cr(t),Hr)?t._setRewardedState(a.FAILED):t._setInterstitialState(i.FAILED)}}}),t}return r=h,(n=[{key:"platformId",get:function(){return t.CRAZY_GAMES}},{key:"platformLanguage",get:function(){return Ur(this,Vr)?this._platformSdk.user.systemInfo.countryCode.toLowerCase():Lr(Br(h.prototype),"platformLanguage",this)}},{key:"isPlayerAuthorizationSupported",get:function(){return Ur(this,Vr)}},{key:"deviceType",get:function(){if(Ur(this,Vr)){var t=this._platformSdk.user.systemInfo.device.type.toLowerCase();if([c.DESKTOP,c.MOBILE,c.TABLET].includes(t))return t}return Lr(Br(h.prototype),"deviceType",this)}},{key:"isExternalLinksAllowed",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(f.INITIALIZE);return e||(e=this._createPromiseDecorator(f.INITIALIZE),Ve("https://sdk.crazygames.com/crazygames-sdk-v3.js").then((function(){Ye("CrazyGames","SDK","init").then((function(){t._platformSdk=window.CrazyGames.SDK,t._defaultStorageType=s.LOCAL_STORAGE,t._isBannerSupported=!0,t._platformSdk.init().then((function(){Wr(t,Vr,t._platformSdk.user.isUserAccountAvailable);var e=Fr(t,xr,Kr).call(t);Promise.all([e]).finally((function(){t._isInitialized=!0,t._resolvePromiseDecorator(f.INITIALIZE)}))}))}))}))),e.promise}},{key:"authorizePlayer",value:function(){var t=this;if(!Ur(this,Vr))return Promise.reject();if(this._isPlayerAuthorized)return Promise.resolve();var e=this._getPromiseDecorator(f.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(f.AUTHORIZE_PLAYER),this._platformSdk.user.showAuthPrompt().then((function(){Fr(t,xr,Kr).call(t).then((function(){t._resolvePromiseDecorator(f.AUTHORIZE_PLAYER)}))})).catch((function(e){t._rejectPromiseDecorator(f.AUTHORIZE_PLAYER,e)}))),e.promise}},{key:"sendMessage",value:function(t){switch(t){case l.IN_GAME_LOADING_STARTED:return this._platformSdk.game.loadingStart(),Promise.resolve();case l.IN_GAME_LOADING_STOPPED:return this._platformSdk.game.loadingStop(),Promise.resolve();case l.GAMEPLAY_STARTED:return this._platformSdk.game.gameplayStart(),Promise.resolve();case l.GAMEPLAY_STOPPED:return this._platformSdk.game.gameplayStop(),Promise.resolve();case l.PLAYER_GOT_ACHIEVEMENT:return this._platformSdk.game.happytime(),Promise.resolve();default:return Lr(Br(h.prototype),"sendMessage",this).call(this,t)}}},{key:"isStorageSupported",value:function(t){return t===s.PLATFORM_INTERNAL||Lr(Br(h.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===s.PLATFORM_INTERNAL||Lr(Br(h.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e){var r=this;return e===s.PLATFORM_INTERNAL?new Promise((function(e,n){if(Array.isArray(t)){var o=[];t.forEach((function(t){var e=r._platformSdk.data.getItem(t);e||n();try{e=JSON.parse(e)}catch(t){}o.push(e)})),e(o)}var i=r._platformSdk.data.getItem(t);i||n();try{i=JSON.parse(i)}catch(t){}e(i)})):Lr(Br(h.prototype),"getDataFromStorage",this).call(this,t,e)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;if(r===s.PLATFORM_INTERNAL){if(Array.isArray(t)){for(var o=[],i=0;i<t.length;i++){var a=e[i];"string"!=typeof e[i]&&(a=JSON.stringify(e[i])),o.push(this._platformSdk.data.setItem(t[i],a))}return Promise.all(o)}var u=e;return"string"!=typeof e&&(u=JSON.stringify(e)),new Promise((function(e,r){n._platformSdk.data.setItem(t,u).then((function(){e()})).catch((function(t){r(t)}))}))}return Lr(Br(h.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){if(e===s.PLATFORM_INTERNAL){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++)r.push(this._platformSdk.data.removeItem(t[n]));return Promise.all(r)}this._platformSdk.data.removeItem(t)}return Lr(Br(h.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showBanner",value:function(t){var e=this;t&&t.containerId&&"string"==typeof t.containerId?this._platformSdk.banner.requestResponsiveBanner([t.containerId]).then((function(){e._setBannerState(u.SHOWN)})).catch((function(){e._setBannerState(u.FAILED)})):this._setBannerState(u.FAILED)}},{key:"hideBanner",value:function(){this._platformSdk.banner.clearAllBanners(),this._setBannerState(u.HIDDEN)}},{key:"showInterstitial",value:function(){Wr(this,Hr,!1),this._platformSdk.ad.requestAd("midgame",Ur(this,Yr))}},{key:"showRewarded",value:function(){Wr(this,Hr,!0),this._platformSdk.ad.requestAd("rewarded",Ur(this,Yr))}}])&&Rr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),h}(He);function Jr(t){return Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jr(t)}function qr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Xr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?qr(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=Qr(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function $r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qr(n.key),n)}}function Qr(t){var e=function(t,e){if("object"!=Jr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Jr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Jr(e)?e:String(e)}function tn(){return tn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nn(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},tn.apply(this,arguments)}function en(t,e){return en=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},en(t,e)}function rn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nn(t){return nn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nn(t)}var on=new WeakSet;function an(){var t=this;return this._playerId=this._platformSdk.options.player_id,this._isPlayerAuthorized="false"===this._platformSdk.options.guest,new Promise((function(e){t._platformSdk.getUsers([t._playerId],(function(r){if(r&&1===r.length){var n=r[0];t._playerName=n.full_name,""!==n.avatar&&(t._playerPhotos=[n.avatar])}e()}))}))}const un=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&en(t,e)}(l,e);var r,n,o,u,c=(o=l,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=nn(o);if(u){var r=nn(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Jr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return rn(t)}(this,t)});function l(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e=rn(t=c.call.apply(c,[this].concat(o))),r=on),r.add(e),t}return r=l,(n=[{key:"platformId",get:function(){return t.ABSOLUTE_GAMES}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(f.INITIALIZE);return e||(e=this._createPromiseDecorator(f.INITIALIZE),Ve("https://unpkg.com/@agru/sdk/dist/umd/index.min.js").then((function(){t._platformSdk=new window.AgRuSdk,t._platformSdk.on(window.AgRuSdkMethods.ShowCampaign,(function(e,r){"rewarded"===e.type?null===r?e.status?t._setRewardedState(a.OPENED):(e.reward&&t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setRewardedState(a.FAILED):null===r?e.status?t._setInterstitialState(i.OPENED):t._setInterstitialState(i.CLOSED):t._setInterstitialState(i.FAILED)}));var e=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}(t,on,an).call(t);Promise.all([e]).finally((function(){t._isInitialized=!0,t._defaultStorageType=t._isPlayerAuthorized?s.PLATFORM_INTERNAL:s.LOCAL_STORAGE,t._resolvePromiseDecorator(f.INITIALIZE)}))}))),e.promise}},{key:"authorizePlayer",value:function(){var t=this;if(this._isPlayerAuthorized)return Promise.resolve();var e=this._getPromiseDecorator(f.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(f.AUTHORIZE_PLAYER),this._platformSdk.authorize((function(e,r){null===r?t._resolvePromiseDecorator(f.AUTHORIZE_PLAYER):t._rejectPromiseDecorator(f.AUTHORIZE_PLAYER,r)}))),e.promise}},{key:"isStorageSupported",value:function(t){return t===s.PLATFORM_INTERNAL||tn(nn(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===s.PLATFORM_INTERNAL?this._isPlayerAuthorized:tn(nn(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e){var r=this;return e===s.PLATFORM_INTERNAL?new Promise((function(e,n){if(r._platformStorageCachedData){if(Array.isArray(t)){for(var o=[],i=0;i<t.length;i++){var a=void 0===r._platformStorageCachedData[t[i]]?null:r._platformStorageCachedData[t[i]];o.push(a)}return void e(o)}e(void 0===r._platformStorageCachedData[t]?null:r._platformStorageCachedData[t])}else r._isPlayerAuthorized?r._platformSdk.getSaveData((function(o,i){if(null===i){if(r._platformStorageCachedData=o||{},Array.isArray(t)){for(var a=[],u=0;u<t.length;u++){var s=void 0===r._platformStorageCachedData[t[u]]?null:r._platformStorageCachedData[t[u]];a.push(s)}return void e(a)}e(void 0===r._platformStorageCachedData[t]?null:r._platformStorageCachedData[t])}else n(i)})):n()})):tn(nn(l.prototype),"getDataFromStorage",this).call(this,t,e)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===s.PLATFORM_INTERNAL?new Promise((function(r,o){if(n._isPlayerAuthorized){var i=null!==n._platformStorageCachedData?Xr({},n._platformStorageCachedData):{};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;n._platformSdk.setSaveData(i,(function(t,e){null===e&&(n._platformStorageCachedData=i,r()),o(e)}))}else o()})):tn(nn(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===s.PLATFORM_INTERNAL?new Promise((function(e,n){if(r._isPlayerAuthorized){var o=null!==r._platformStorageCachedData?Xr({},r._platformStorageCachedData):{};if(Array.isArray(t))for(var i=0;i<t.length;i++)delete o[t[i]];else delete o[t];r._platformSdk.setSaveData(o,(function(t,i){null===i&&(r._platformStorageCachedData=o,e()),n(i)}))}else n()})):tn(nn(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showInterstitial",value:function(){this._platformSdk.showCampaign("default")}},{key:"showRewarded",value:function(){this._platformSdk.showCampaign("rewarded")}}])&&$r(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(He);function sn(t){return sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sn(t)}function cn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ln(n.key),n)}}function ln(t){var e=function(t,e){if("object"!=sn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=sn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==sn(e)?e:String(e)}function fn(t,e){return fn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fn(t,e)}function pn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yn(t){return yn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yn(t)}function hn(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,mn(t,e,"set"),r),r}function dn(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,mn(t,e,"get"))}function mn(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var vn=new WeakMap;const _n=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fn(t,e)}(p,e);var r,n,o,c,l=(o=p,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=yn(o);if(c){var r=yn(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===sn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return pn(t)}(this,t)});function p(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=pn(t=l.call.apply(l,[this].concat(i))),n={writable:!0,value:!1},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,r=vn),r.set(e,n),t}return r=p,(n=[{key:"platformId",get:function(){return t.GAME_DISTRIBUTION}},{key:"initialize",value:function(){if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);if(!t)if(t=this._createPromiseDecorator(f.INITIALIZE),this._options&&"string"==typeof this._options.gameId){var e=this;window.GD_OPTIONS={gameId:this._options.gameId,onEvent:function(t){switch(t.name){case"SDK_READY":e._platformSdk=window.gdsdk,e._platformSdk.preloadAd("rewarded"),e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE);break;case"SDK_GAME_START":dn(e,vn)?e._setRewardedState(a.CLOSED):e._setInterstitialState(i.CLOSED);break;case"SDK_GAME_PAUSE":dn(e,vn)?e._setRewardedState(a.OPENED):e._setInterstitialState(i.OPENED);break;case"SDK_REWARDED_WATCH_COMPLETE":e._setRewardedState(a.REWARDED)}}},this._defaultStorageType=s.LOCAL_STORAGE,this._isBannerSupported=!0,Ve("https://html5.api.gamedistribution.com/main.min.js")}else this._rejectPromiseDecorator(f.INITIALIZE,d);return t.promise}},{key:"showBanner",value:function(t){var e=this;t&&t.containerId&&"string"==typeof t.containerId?this._platformSdk.showAd("display",{containerId:t.containerId}).then((function(){e._setBannerState(u.SHOWN)})).catch((function(){e._setBannerState(u.FAILED)})):this._setBannerState(u.FAILED)}},{key:"hideBanner",value:function(){this._setBannerState(u.HIDDEN)}},{key:"showInterstitial",value:function(){var t=this;hn(this,vn,!1),this._platformSdk?this._platformSdk.showAd().catch((function(){t._setInterstitialState(i.FAILED)})):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var t=this;hn(this,vn,!0),this._platformSdk?this._platformSdk.showAd("rewarded").catch((function(){t._setRewardedState(a.FAILED)})):this._setRewardedState(a.FAILED)}}])&&cn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(He);function bn(t){return bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bn(t)}function Sn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gn(n.key),n)}}function gn(t){var e=function(t,e){if("object"!=bn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=bn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==bn(e)?e:String(e)}function En(t,e){return En=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},En(t,e)}function Pn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wn(t){return wn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wn(t)}function An(t,e){On(t,e),e.add(t)}function On(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function kn(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,In(t,e,"get"))}function Tn(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,In(t,e,"set"),r),r}function In(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function Dn(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var Rn=new WeakMap,jn=new WeakSet,Ln=new WeakSet,Nn=new WeakSet,Cn=new WeakSet,Bn=new WeakSet,Mn=new WeakSet;function Gn(t){var e=t.code&&"AdsNotFound"===t.code;switch(t.type){case"adCompleted":kn(this,Rn)?(this._setRewardedState(a.REWARDED),this._setRewardedState(a.CLOSED)):this._setInterstitialState(i.CLOSED);break;case"adError":kn(this,Rn)?this._setRewardedState(a.FAILED):this._setInterstitialState(i.FAILED);break;case"adDismissed":kn(this,Rn)?this._setRewardedState(e?a.FAILED:a.CLOSED):this._setInterstitialState(e?i.FAILED:i.CLOSED)}}function Fn(t){t&&"ok"===t.status&&(this._isPlayerAuthorized=2===t.loginStatus||3===t.loginStatus),this._isPlayerAuthorized?this._platformSdk.userProfile():(this._isInitialized=!0,this._resolvePromiseDecorator(f.INITIALIZE))}function Wn(t){"ok"===t.status&&(this._playerId=t.uid,this._playerName=t.nick,this._playerPhotos=[t.avatar]),this._isInitialized=!0,this._resolvePromiseDecorator(f.INITIALIZE)}function Un(t){"ok"===t.status?(this._resolvePromiseDecorator(f.AUTHORIZE_PLAYER),this._platformSdk.reloadWindow()):this._rejectPromiseDecorator(f.AUTHORIZE_PLAYER,t.errmsg)}function zn(t){0!==(null==t?void 0:t.length)?this._resolvePromiseDecorator(f.GET_CATALOG,t):this._rejectPromiseDecorator(f.GET_CATALOG)}function Hn(t){t&&t.uid?this._resolvePromiseDecorator(f.PURCHASE,t.uid):this._rejectPromiseDecorator(f.PURCHASE)}const Vn=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&En(t,e)}(c,e);var r,n,o,u,s=(o=c,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=wn(o);if(u){var r=wn(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===bn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Pn(t)}(this,t)});function c(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return An(Pn(t=s.call.apply(s,[this].concat(i))),Mn),An(Pn(t),Bn),An(Pn(t),Cn),An(Pn(t),Nn),An(Pn(t),Ln),An(Pn(t),jn),n={writable:!0,value:!1},On(e=Pn(t),r=Rn),r.set(e,n),t}return r=c,(n=[{key:"platformId",get:function(){return t.VK_PLAY}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isClipboardSupported",get:function(){return!1}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(f.INITIALIZE);if(!e)if(e=this._createPromiseDecorator(f.INITIALIZE),this._options&&this._options.gameId){var r=this._options.gameId,n={appid:r,userProfileCallback:function(e){return Dn(t,Nn,Wn).call(t,e)},getLoginStatusCallback:function(e){return Dn(t,Ln,Fn).call(t,e)},registerUserCallback:function(e){return Dn(t,Cn,Un).call(t,e)},adsCallback:function(e){return Dn(t,jn,Gn).call(t,e)},getGameInventoryItemsCallback:function(e){return Dn(t,Bn,zn).call(t,e)},paymentReceivedCallback:function(e){return Dn(t,Mn,Hn).call(t,e)}};Ve("https://vkplay.ru/app/".concat(r,"/static/mailru.core.js")).then((function(){Ye("iframeApi").then((function(){window.iframeApi(n).then((function(e){t._platformSdk=e,t._platformSdk.getLoginStatus()}))}))}))}else this._rejectPromiseDecorator(f.INITIALIZE,m);return e.promise}},{key:"showInterstitial",value:function(){var t=this;Tn(this,Rn,!1),this._platformSdk.showAds({interstitial:!0}).then((function(){t._setInterstitialState(i.OPENED)})).catch((function(){t._setInterstitialState(i.FAILED)}))}},{key:"showRewarded",value:function(){var t=this;Tn(this,Rn,!0),this._platformSdk.showAds({interstitial:!1}).then((function(){t._setRewardedState(a.OPENED)})).catch((function(){t._setRewardedState(a.FAILED)}))}},{key:"authorizePlayer",value:function(){if(this._isPlayerAuthorized)return Promise.resolve();var t=this._getPromiseDecorator(f.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(f.AUTHORIZE_PLAYER),this._platformSdk.registerUser()),t}},{key:"getPaymentsCatalog",value:function(){var t=this._getPromiseDecorator(f.GET_CATALOG);return t||(t=this._createPromiseDecorator(f.GET_CATALOG),this._platformSdk.getGameInventoryItems()),t.promise}},{key:"purchase",value:function(t){if(!t)return Promise.reject();var e=this._getPromiseDecorator(f.PURCHASE);return e||(e=this._createPromiseDecorator(f.PURCHASE),this._platformSdk.paymentFrameItem(t)),e.promise}}])&&Sn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(He);function Yn(t){return Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yn(t)}function xn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Kn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xn(Object(r),!0).forEach((function(e){ro(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Zn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,no(n.key),n)}}function Jn(){return Jn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$n(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Jn.apply(this,arguments)}function qn(t,e){return qn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qn(t,e)}function Xn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $n(t){return $n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$n(t)}function Qn(t,e){eo(t,e),e.add(t)}function to(t,e,r){eo(t,e),e.set(t,r)}function eo(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ro(t,e,r){return(e=no(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function no(t){var e=function(t,e){if("object"!=Yn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Yn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Yn(e)?e:String(e)}function oo(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function io(t,e){var r=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}(t,e);return function(t,e){return e.get?e.get.call(t):e.value}(t,r)}var ao="AUTHORIZED",uo={VALUABLE_ACCESS:"VALUABLE_ACCESS",PHOTO_CONTENT:"PHOTO_CONTENT"},so=new WeakMap,co=new WeakMap,lo=new WeakMap,fo=new WeakSet,po=new WeakSet,yo=new WeakSet,ho=new WeakSet,mo=new WeakSet,vo=new WeakSet,_o=new WeakSet,bo=new WeakSet,So=new WeakSet,go=new WeakSet,Eo=new WeakSet,Po=new WeakSet,wo=new WeakSet,Ao=new WeakSet,Oo=new WeakSet;function ko(){return{userProfile:{fields:"uid,name,pic50x50,pic128x128,pic_base",method:"users.getCurrentUser"},hasAppPermission:function(t){return{method:"users.hasAppPermission",ext_perm:t}}}}function To(){var t=this;return{userProfileCallback:function(e,r,n){return oo(t,fo,Do).call(t,e,r,n)},hasValueAccessCallback:function(e,r,n){return oo(t,yo,jo).call(t,r,n)}}}function Io(){var t=this;return{showPermissions:function(){return oo(t,ho,Lo).call(t)},loadAd:function(e){return oo(t,mo,No).call(t,e)},showLoadedAd:function(e,r){return oo(t,vo,Co).call(t,r)},showAd:function(e,r){return oo(t,_o,Bo).call(t,r)},requestBannerAds:function(e,r){return oo(t,bo,Mo).call(t,e,r)},showBannerAds:function(e,r){return oo(t,go,Fo).call(t,r)},hideBannerAds:function(e,r){return oo(t,So,Go).call(t,r)},setBannerFormat:function(e){return oo(t,Eo,Wo).call(t,e)},showInvite:function(e){return oo(t,Po,Uo).call(t,e)},showRatingDialog:function(e,r){return oo(t,wo,zo).call(t,e,r)},joinGroup:function(e,r){return oo(t,Ao,Ho).call(t,e,r)},showLoginSuggestion:function(e,r){return oo(t,po,Ro).call(t,e,r)},postMediatopic:function(e,r){return oo(t,Oo,Vo).call(t,e,r)}}}function Do(t,e){"ok"===t&&(this._playerId=e.uid,this._playerName=e.name,this._playerPhotos=[e.pic50x50,e.pic128x128,e.pic_base]),this._isInitialized=!0,this._platformSdk.Client.call(io(this,so).hasAppPermission(uo.VALUABLE_ACCESS),io(this,co).hasValueAccessCallback)}function Ro(t,e){if("error"===t)return this._isPlayerAuthorized=!1,void this._rejectPromiseDecorator(f.AUTHORIZE_PLAYER,e);this._isPlayerAuthorized=!0,this._resolvePromiseDecorator(f.AUTHORIZE_PLAYER)}function jo(t){if(this._hasValuableAccessPermission=!!t,this._defaultStorageType=this._hasValuableAccessPermission?s.PLATFORM_INTERNAL:s.LOCAL_STORAGE,this._hasValuableAccessPermission||this._hasValuableAccessPermissionShowed)this._resolvePromiseDecorator(f.INITIALIZE);else{var e=Object.values(uo).map((function(t){return'"'.concat(t,'"')})).join(",");this._platformSdk.UI.showPermissions("[".concat(e,"]"))}}function Lo(){this._hasValuableAccessPermissionShowed=!0,this._platformSdk.Client.call(io(this,so).hasAppPermission(uo.VALUABLE_ACCESS),io(this,co).hasValueAccessCallback)}function No(t){"error"===t?this._setRewardedState(a.FAILED):(this._setRewardedState(a.OPENED),this._platformSdk.UI.showLoadedAd())}function Co(t){switch(t){case"complete":this._setRewardedState(a.REWARDED),this._setRewardedState(a.CLOSED);break;case"skip":this._setRewardedState(a.CLOSED);break;default:this._setRewardedState(a.FAILED)}}function Bo(t){switch(t){case"ready":case"ad_prepared":break;case"ad_shown":this._setInterstitialState(i.OPENED),this._setInterstitialState(i.CLOSED);break;default:this._setInterstitialState(i.FAILED)}}function Mo(t,e){if("error"!==t)switch(e){case"ad_loaded":this._platformSdk.invokeUIMethod("showBannerAds");break;case"banner_shown":case"ad_shown":this._setBannerState(u.SHOWN);break;case"hidden_by_user":this._setBannerState(u.HIDDEN)}else this._setBannerState(u.FAILED)}function Go(t){t?this._setBannerState(u.HIDDEN):this._setBannerState(u.FAILED)}function Fo(t){t||this._setBannerState(u.FAILED)}function Wo(t){"error"===t?this._setBannerState(u.FAILED):this.showBanner(this._platformBannerOptions)}function Uo(t){"error"===t?this._rejectPromiseDecorator(f.INVITE_FRIENDS):this._resolvePromiseDecorator(f.INVITE_FRIENDS)}function zo(t,e){"error"===t?this._rejectPromiseDecorator(f.RATE,e):this._resolvePromiseDecorator(f.RATE)}function Ho(t,e){"error"===t?this._rejectPromiseDecorator(f.JOIN_COMMUNITY,e):this._resolvePromiseDecorator(f.JOIN_COMMUNITY)}function Vo(t,e){"error"===t?this._rejectPromiseDecorator(f.CREATE_POST,e):this._resolvePromiseDecorator(f.CREATE_POST)}const Yo=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qn(t,e)}(l,e);var r,n,o,u,c=(o=l,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=$n(o);if(u){var r=$n(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Yn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Xn(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Qn(Xn(t=c.call.apply(c,[this].concat(r))),Oo),Qn(Xn(t),Ao),Qn(Xn(t),wo),Qn(Xn(t),Po),Qn(Xn(t),Eo),Qn(Xn(t),go),Qn(Xn(t),So),Qn(Xn(t),bo),Qn(Xn(t),_o),Qn(Xn(t),vo),Qn(Xn(t),mo),Qn(Xn(t),ho),Qn(Xn(t),yo),Qn(Xn(t),po),Qn(Xn(t),fo),to(Xn(t),lo,{get:Io,set:void 0}),to(Xn(t),co,{get:To,set:void 0}),to(Xn(t),so,{get:ko,set:void 0}),ro(Xn(t),"_hasValuableAccessPermission",!1),ro(Xn(t),"_hasValuableAccessPermissionShowed",!1),ro(Xn(t),"_platformBannerOptions",{}),t}return r=l,(n=[{key:"platformId",get:function(){return t.OK}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isCreatePostSupported",get:function(){return!0}},{key:"isRateSupported",get:function(){return!0}},{key:"isClipboardSupported",get:function(){return!1}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(f.INITIALIZE);return e||(e=this._createPromiseDecorator(f.INITIALIZE),Ve("//api.ok.ru/js/fapi5.js").then((function(){Ye("FAPI").then((function(){t._platformSdk=window.FAPI,window.API_callback=function(e,r,n){return io(t,lo)[e](r,n)};var e=t._platformSdk.Util.getRequestParameters()||{};e.api_server&&e.apiconnection?t._platformSdk.init(e.api_server,e.apiconnection,(function(){var e,r=null===(e=t._platformSdk)||void 0===e?void 0:e.saved_state;t._isPlayerAuthorized=!r||r===ao,t._isPlayerAuthorized?t._platformSdk.Client.call(io(t,so).userProfile,io(t,co).userProfileCallback):(t._isInitialized=!0,t._resolvePromiseDecorator(f.INITIALIZE))}),(function(){t._rejectPromiseDecorator(f.INITIALIZE)})):t._rejectPromiseDecorator(f.INITIALIZE,v)}))}))),e.promise}},{key:"authorizePlayer",value:function(){if(this._isPlayerAuthorized)return Promise.resolve();var t=this._getPromiseDecorator(f.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(f.AUTHORIZE_PLAYER),this._platformSdk.UI.showLoginSuggestion(ao)),t.promise}},{key:"isStorageSupported",value:function(t){return t===s.PLATFORM_INTERNAL||Jn($n(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===s.PLATFORM_INTERNAL?this._hasValuableAccessPermission:Jn($n(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e){var r=this;return e===s.PLATFORM_INTERNAL?this._hasValuableAccessPermission?new Promise((function(e,n){var o=Array.isArray(t)?t:[t],i={method:"storage.get",keys:o,scope:"CUSTOM"};r._platformSdk.Client.call(i,(function(r,i,a){if(i){var u,s=i.data||{};if(Array.isArray(t)){var c=[];return o.forEach((function(t){if(""!==s[t]&&void 0!==s[t]){var e;try{e=JSON.parse(s[t])}catch(r){e=s[t]}c.push(e)}else c.push(null)})),void e(c)}if(""===s[t]||void 0===s[t])return void e(null);try{u=JSON.parse(s[t])}catch(e){u=s[t]}e(u)}else n(a)}))})):Promise.reject(h):Jn($n(l.prototype),"getDataFromStorage",this).call(this,t,e)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;if(r===s.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(h);for(var o=Array.isArray(t)?t:[t],i=Array.isArray(t)?e:[e],a=[],u=function(){var t=o[c],e=i[c];"string"!=typeof e&&(e=JSON.stringify(e));var r={method:"storage.set",key:t,value:e},u=new Promise((function(t,e){n._platformSdk.Client.call(r,(function(r,n){n?t():e()}))}));a.push(u)},c=0;c<o.length;c++)u();return Promise.all(a)}return Jn($n(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;if(e===s.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(h);for(var n=Array.isArray(t)?t:[t],o=[],i=function(){var t={method:"storage.set",key:n[a]},e=new Promise((function(e,n){r._platformSdk.Client.call(t,(function(t,r){r?e():n()}))}));o.push(e)},a=0;a<n.length;a++)i();return Promise.all(o)}return Jn($n(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showInterstitial",value:function(){try{this._platformSdk.UI.showAd()}catch(t){this._setInterstitialState(i.FAILED)}}},{key:"showRewarded",value:function(){try{this._platformSdk.UI.loadAd()}catch(t){this._setRewardedState(a.FAILED)}}},{key:"showBanner",value:function(t){if(t){if("string"==typeof t.layoutType)return this._platformBannerOptions=Kn(Kn({},t),{},{layoutType:null}),void this._platformSdk.invokeUIMethod("setBannerFormat",t.layoutType);if("string"==typeof t.position)return void this._platformSdk.invokeUIMethod("requestBannerAds",t.position)}this._platformSdk.invokeUIMethod("requestBannerAds","bottom")}},{key:"hideBanner",value:function(){this._platformSdk.invokeUIMethod("hideBannerAds")}},{key:"inviteFriends",value:function(t){var e=(t||{}).text;if(!t||"string"!=typeof e)return Promise.reject();var r=this._getPromiseDecorator(f.INVITE_FRIENDS);return r||(r=this._createPromiseDecorator(f.INVITE_FRIENDS),e.length>120?this._rejectPromiseDecorator(f.INVITE_FRIENDS,_):this._platformSdk.UI.showInvite(e)),r.promise}},{key:"rate",value:function(){var t=this._getPromiseDecorator(f.RATE);return t||(t=this._createPromiseDecorator(f.RATE),this._platformSdk.UI.showRatingDialog()),t.promise}},{key:"createPost",value:function(t){if(!t||null==t||!t.media)return Promise.reject();var e,r=this._getPromiseDecorator(f.CREATE_POST);return r||(r=this._createPromiseDecorator(f.CREATE_POST),this._platformSdk.UI.postMediatopic(t,null!==(e=t.status)&&void 0!==e&&e)),r.promise}},{key:"joinCommunity",value:function(t){if(!t||null==t||!t.groupId)return Promise.reject();var e,r=this._getPromiseDecorator(f.JOIN_COMMUNITY);return r||(r=this._createPromiseDecorator(f.JOIN_COMMUNITY),this._platformSdk.UI.joinGroup(t.groupId,null!==(e=t.enableMessages)&&void 0!==e&&e)),r.promise}}])&&Zn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(He);function xo(t){return xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xo(t)}function Ko(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zo(n.key),n)}}function Zo(t){var e=function(t,e){if("object"!=xo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=xo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xo(e)?e:String(e)}function Jo(t,e){return Jo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Jo(t,e)}function qo(t){return qo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qo(t)}const Xo=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jo(t,e)}(c,e);var r,n,o,u,s=(o=c,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=qo(o);if(u){var r=qo(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===xo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function c(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),s.apply(this,arguments)}return r=c,(n=[{key:"platformId",get:function(){return t.PLAYGAMA}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(f.INITIALIZE);return e||(e=this._createPromiseDecorator(f.INITIALIZE),Ve("https://developer.playgama.com/sdk/v1.js").then((function(){Ye("PLAYGAMA_SDK").then((function(){t._platformSdk=window.PLAYGAMA_SDK,t._isInitialized=!0,t._resolvePromiseDecorator(f.INITIALIZE)}))}))),e.promise}},{key:"showInterstitial",value:function(){var t=this;this._platformSdk.advService.showInterstitial({onOpen:function(){t._setInterstitialState(i.OPENED)},onEmpty:function(){t._setInterstitialState(i.FAILED)},onClose:function(){t._setInterstitialState(i.CLOSED)},onError:function(){t._setInterstitialState(i.FAILED)}})}},{key:"showRewarded",value:function(){var t=this;this._platformSdk.advService.showRewarded({onOpen:function(){t._setRewardedState(a.OPENED)},onRewarded:function(){t._setRewardedState(a.REWARDED)},onEmpty:function(){t._setRewardedState(a.FAILED)},onClose:function(){t._setRewardedState(a.CLOSED)},onError:function(){t._setRewardedState(a.FAILED)}})}}])&&Ko(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(He);function $o(t){return $o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$o(t)}function Qo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ti(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ei(n.key),n)}}function ei(t){var e=function(t,e){if("object"!=$o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=$o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$o(e)?e:String(e)}function ri(t,e){oi(t,e),e.add(t)}function ni(t,e,r){oi(t,e),e.set(t,r)}function oi(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ii(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,si(t,e,"set"),r),r}function ai(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function ui(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,si(t,e,"get"))}function si(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var ci=new WeakMap,li=new WeakMap,fi=new WeakMap,pi=new WeakMap,yi=new WeakSet,hi=new WeakSet;function di(){var e=t.MOCK;if(this._options&&this._options.forciblySetPlatformId)switch(this._options.forciblySetPlatformId){case t.VK:e=t.VK;break;case t.VK_PLAY:e=t.VK_PLAY;break;case t.YANDEX:e=t.YANDEX;break;case t.CRAZY_GAMES:e=t.CRAZY_GAMES;break;case t.ABSOLUTE_GAMES:e=t.ABSOLUTE_GAMES;break;case t.GAME_DISTRIBUTION:e=t.GAME_DISTRIBUTION;break;case t.OK:e=t.OK;break;case t.PLAYGAMA:e=t.PLAYGAMA;break;default:e=t.MOCK}else{var r=new URL(window.location.href),n=["y","a","n","d","e","x",".","n","e","t"].join("");if(r.searchParams.has("platform_id"))switch(r.searchParams.get("platform_id")){case t.VK:e=t.VK;break;case t.VK_PLAY:e=t.VK_PLAY;break;case t.YANDEX:e=t.YANDEX;break;case t.CRAZY_GAMES:e=t.CRAZY_GAMES;break;case t.ABSOLUTE_GAMES:e=t.ABSOLUTE_GAMES;break;case t.GAME_DISTRIBUTION:e=t.GAME_DISTRIBUTION;break;case t.OK:e=t.OK;break;case t.PLAYGAMA:e=t.PLAYGAMA;break;default:e=t.MOCK}else r.hostname.includes(n)||r.hash.includes("yandex")?e=t.YANDEX:r.hostname.includes("crazygames.")||r.hostname.includes("1001juegos.com")?e=t.CRAZY_GAMES:r.hostname.includes("gamedistribution.com")?e=t.GAME_DISTRIBUTION:r.searchParams.has("api_id")&&r.searchParams.has("viewer_id")&&r.searchParams.has("auth_key")?e=t.VK:r.searchParams.has("app_id")&&r.searchParams.has("player_id")&&r.searchParams.has("game_sid")&&r.searchParams.has("auth_key")&&(e=t.ABSOLUTE_GAMES)}switch(e){case t.VK:ii(this,fi,new ar(this._options&&this._options.platforms&&this._options.platforms[t.VK]));break;case t.VK_PLAY:ii(this,fi,new Vn(this._options&&this._options.platforms&&this._options.platforms[t.VK_PLAY]));break;case t.YANDEX:ii(this,fi,new Tr(this._options&&this._options.platforms&&this._options.platforms[t.YANDEX]));break;case t.CRAZY_GAMES:ii(this,fi,new Zr(this._options&&this._options.platforms&&this._options.platforms[t.CRAZY_GAMES]));break;case t.ABSOLUTE_GAMES:ii(this,fi,new un(this._options&&this._options.platforms&&this._options.platforms[t.ABSOLUTE_GAMES]));break;case t.GAME_DISTRIBUTION:ii(this,fi,new _n(this._options&&this._options.platforms&&this._options.platforms[t.GAME_DISTRIBUTION]));break;case t.OK:ii(this,fi,new Yo(this._options&&this._options.platforms&&this._options.platforms[t.OK]));break;case t.PLAYGAMA:ii(this,fi,new Xo(this._options&&this._options.platforms&&this._options.platforms[t.PLAYGAMA]));break;default:ii(this,fi,new He)}}function mi(t){return ui(this,ci)||console.error(p),ui(this,pi)[t]}const vi=function(){function r(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),ri(this,hi),ri(this,yi),ni(this,ci,{writable:!0,value:!1}),ni(this,li,{writable:!0,value:null}),ni(this,fi,{writable:!0,value:null}),ni(this,pi,{writable:!0,value:{}})}var f,p;return f=r,p=[{key:"version",get:function(){return"1.13.0"}},{key:"isInitialized",get:function(){return ui(this,ci)}},{key:"platform",get:function(){return ai(this,hi,mi).call(this,e.PLATFORM)}},{key:"player",get:function(){return ai(this,hi,mi).call(this,e.PLAYER)}},{key:"game",get:function(){return ai(this,hi,mi).call(this,e.GAME)}},{key:"storage",get:function(){return ai(this,hi,mi).call(this,e.STORAGE)}},{key:"advertisement",get:function(){return ai(this,hi,mi).call(this,e.ADVERTISEMENT)}},{key:"social",get:function(){return ai(this,hi,mi).call(this,e.SOCIAL)}},{key:"device",get:function(){return ai(this,hi,mi).call(this,e.DEVICE)}},{key:"leaderboard",get:function(){return ai(this,hi,mi).call(this,e.LEADERBOARD)}},{key:"payments",get:function(){return ai(this,hi,mi).call(this,e.PAYMENTS)}},{key:"remoteConfig",get:function(){return ai(this,hi,mi).call(this,e.REMOTE_CONFIG)}},{key:"clipboard",get:function(){return ai(this,hi,mi).call(this,e.CLIPBOARD)}},{key:"PLATFORM_ID",get:function(){return t}},{key:"PLATFORM_MESSAGE",get:function(){return l}},{key:"MODULE_NAME",get:function(){return e}},{key:"EVENT_NAME",get:function(){return n}},{key:"INTERSTITIAL_STATE",get:function(){return i}},{key:"REWARDED_STATE",get:function(){return a}},{key:"BANNER_STATE",get:function(){return u}},{key:"STORAGE_TYPE",get:function(){return s}},{key:"VISIBILITY_STATE",get:function(){return o}},{key:"DEVICE_TYPE",get:function(){return c}},{key:"initialize",value:function(t){var r=this;return ui(this,ci)?Promise.resolve():(ui(this,li)||(ii(this,li,new I),this._options=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qo(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=ei(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t),ai(this,yi,di).call(this),ui(this,fi).initialize().then((function(){ui(r,pi)[e.PLATFORM]=new F(ui(r,fi)),ui(r,pi)[e.PLAYER]=new Y(ui(r,fi)),ui(r,pi)[e.GAME]=new tt(ui(r,fi)),ui(r,pi)[e.STORAGE]=new ct(ui(r,fi)),ui(r,pi)[e.ADVERTISEMENT]=new $t(ui(r,fi)),ui(r,pi)[e.SOCIAL]=new oe(ui(r,fi)),ui(r,pi)[e.DEVICE]=new le(ui(r,fi)),ui(r,pi)[e.LEADERBOARD]=new me(ui(r,fi)),ui(r,pi)[e.PAYMENTS]=new Ee(ui(r,fi)),ui(r,pi)[e.REMOTE_CONFIG]=new Te(ui(r,fi)),ui(r,pi)[e.CLIPBOARD]=new Ne(ui(r,fi)),ii(r,ci,!0),console.info("%c InstantGamesBridge v.".concat(r.version," initialized. "),"background: #01A5DA; color: white"),ui(r,li)&&(ui(r,li).resolve(),ii(r,li,null))}))),ui(this,li).promise)}}],p&&ti(f.prototype,p),Object.defineProperty(f,"prototype",{writable:!1}),r}();window.bridge=new vi,window.instantGamesBridge=window.bridge})()})();